!function(){if(!window.VRender){var l=window.VRender=function(){};l.$=$,l.ENV={},l.event_defined="vrender_defined",l.event_statepush="vrender_statepush",l.event_statereplace="vrender_statereplace",l.event_statepop="vrender_statepop",l.event_routerbefore="vrender_router_before",l.event_routerchange="vrender_router_change",l.event_beforeapi="vrender_api_before";var n=!(l.event_buildcomplete="vrender_build_complete"),r={},a={},s={},o=[],d=0,c=l.Utils=function(){};window.define=function(t,e,i){c.isFunction(t)?(i=t,e=t=null):c.isArray(t)?(i=e,e=t,t=null):c.isFunction(e)&&(i=e,e=null),c.isBlank(t)&&(t=c.randomTxt(32)),h(t)?c.isFunction(r[t])&&r[t]($,l,c):c.isFunction(i)&&(n?u(t,i,e):s[t]={definition:i,deps:e})};var u=function(t,e,i){i=c.toArray(i);var n=function(){c.isFunction(e)&&(e=e($,l,c)||e),r[t]=e,l.trigger(l.event_defined,t,e)};if(0<i.length){var s=function(){return!c.find(i,function(t){return!h(t)})};s()?n():l.on(l.event_defined,function(){s()&&(l.off(l.event_defined,arguments.callee),n())})}else n()},h=function(t){return r.hasOwnProperty(t)};window.requirejs=function(n,s){if(r.hasOwnProperty(n))return c.isFunction(s)&&s(r[n]),r[n];l.on(l.event_defined,function(t,e,i){n===e&&(l.off(l.event_defined,arguments.callee),c.isFunction(s)&&s(i))})},l.navigate=function(t,e){if(c.isNotBlank(t)){var i={router:t,replace:!1,trigger:!0,animate:!1};e&&(i=$.extend(i,e));var n={type:l.event_routerbefore};l.trigger(n,i),!0!==n.isPreventDefault&&(c.isTrue(i.replace)?window.location.replace(t):window.location=t)}},l.require=function(t,s){c.isFunction(s)&&(c.isBlank(t)?s(!1,null):g(t,null,function(t,e,i,n){s(i,n)}))},l.fetch=function(t,e,i,n){p("GET",t,e,i,n)},l.send=function(t,e,i,n){p("POST",t,e,i,n)};var p=function(t,e,i,n,s){if(c.isFunction(i)&&(s=n,n=i,i=null),c.isFunction(n)||(n=function(){}),c.isBlank(e))return n("服务请求失败：url不能为空"),!1;if(c.isNotBlank(i)){var r={};for(var a in i)c.isNotNull(i[a])&&(r[a]=i[a]);i=r}return l.trigger(l.event_beforeapi,e,i),/^(\/|http)/.test(e)||(e="/api?n="+e,i=c.isBlank(i)?null:{data:JSON.stringify(i)},t="POST"),"GET"===t&&c.isNotBlank(i)&&(e+=(e.indexOf("?")<0?"?":"&")+$.param(i),i=null),$.ajax({type:t,cache:!1,url:e,dataType:"json",data:i,success:function(t){n(!1,t)},error:function(t){var e=t.responseText||!0;if(200!==t.status){if(401===t.status)e="请登录";else if(404===t.status)e="请求错误，请稍候重试..";else if(500===t.status){try{e=JSON.parse(e)}catch(t){}e=(e&&e.hasOwnProperty("msg")?e.msg:e)||"服务器错误"}!s&&c.isFunction(l.onAjaxError)&&l.onAjaxError(e,t),n(e)}else n(!1,e)}})};l.load=function(i,t,s){if(c.isNull(t)&&c.isNull(s)&&(t=i,i=null),c.isFunction(t)&&(s=t,t=i,i=null),i&&"string"==typeof i&&(i=$(i)),0===(t=c.toArray(t)).length)c.isFunction(s)&&s(null);else{var r=t.length,a=[],n=function(t,e,i,n){!i&&n&&c.pushAll(a,n),(r-=1)<=0&&c.isFunction(s)&&s(a)};c.each(t,function(t){if("string"==typeof t&&(t={uri:t}),c.isBlank(t.uri))n();else{var e=t.uri.toLowerCase();/\.js$/.test(e)?f(t.uri,t.attributes,n):/\.css$/.test(e)?m(i,t.uri,t.attributes,n):g(t.uri,t.attributes,n)}})}};var f=function(n,s){$.getScript(n).done(function(t){if(c.isFunction(s)){var e=[];if(t){var i=t.match(/define\(["'][\w-]+["']\)/g);c.each(i,function(t){t=t.substring(8,t.length-1),r.hasOwnProperty(t)&&e.push(r[t])})}s(n,"js",!1,e)}}).fail(function(t){console.error("js load error",t.responseText||t),c.isFunction(l.onAjaxError)&&l.onAjaxError("js load error",t),c.isFunction(s)&&s(n,"js",t)})},m=function(t,e,i,n){var s=a[e];if(!s){var r=$("<link href='"+e+"' rel='stylesheet' type='text/css'>").appendTo("head");s=a[e]={$el:r}}i&&s.$el.attr(i),t&&(c.isArray(s.views)||(s.views=[]),s.views.push(t)),c.isFunction(n)&&n(e,"css")},g=function(e,t,i){c.isNotBlank(e)&&c.isFunction(i)?$.ajax({type:"GET",cache:!1,url:e,data:t,success:function(t){i(e,"html",!1,t)},error:function(t){console.error("html load error",t.responseText||t),c.isFunction(l.onAjaxError)&&l.onAjaxError("html load error",t),i(e,"html",t,null)}}):c.isFunction(i)&&i(e,"html",!1,null)};l.cache=function(t,e){if(c.isBlank(t))return null;if(null===e)return $.jStorage.deleteKey(t),null;if(void 0===e){if(e=$.jStorage.get(t))try{return JSON.parse(e)}catch(t){}return null}return $.jStorage.set(t,JSON.stringify(e)),e},l.trigger=function(t,e){l.emitter&&(e=Array.prototype.slice.call(arguments,0),l.emitter.trigger.apply(l.emitter,e))},l.on=function(t,e,i){!l.emitter&&l.EventEmitter&&(l.emitter=new l.EventEmitter),l.emitter&&l.emitter.on(t,e,i)},l.one=function(t,e,i){!l.emitter&&l.EventEmitter&&(l.emitter=new l.EventEmitter),l.emitter&&l.emitter.one(t,e,i)},l.off=function(t,e){l.emitter&&l.emitter.off(t,e)},l.onenter=function(t,e,i){if(c.isFunction(e)&&(i=e,e=null),t=$(t),c.isFunction(i)){var n=function(t){13===t.which&&i()};c.isBlank(e)?t.on("keydown",n):t.on("keydown",e,n)}else t.off("keydown",e)},l.onInputChange=function(t,n){var e=$(t);if(e.is("input, textarea")||(e=e.find("input, textarea")),c.isFunction(n)){e.on("focusin",function(t){var e=$(t.currentTarget),i=e.data("vrender-inputchange");i&&i.timer&&clearInterval(i.timer),(i={lastValue:e.val()}).timer=setInterval(function(){s(e,i)},100),e.data("vrender-inputchange",i)}),e.on("focusout",function(t){var e=$(t.currentTarget),i=e.data("vrender-inputchange");i&&i.timer&&clearInterval(i.timer),e.removeData("vrender-inputchange"),s(e,i||{})});var s=function(t,e){var i=t.val();i!=e.lastValue&&(e.lastValue=i,c.isFunction(n)&&n(t,i))}}else e.off("focusin"),e.off("focusout")},l.scheduleTask=function(t,e){if(!c.isBlank(t)){if(c.isFunction(e)){var i=c.findBy(o,"name",t);i?i.task=e:o.push({name:t,task:e})}else c.removeBy(o,"name",t);0===o.length?(d&&clearInterval(d),d=0):d||(d=setInterval(function(){c.each(o,function(t){t.task()})},400))}};var i=function(){for(var t in a){var e=a[t];if(c.isArray(e.views)){for(var i=e.views.length-1;0<=i;i--)c.isDomExist(e.views[i])||e.views.splice(i,1);0===e.views.length&&(e.$el.remove(),delete a[t])}}};l.plugins={};var v=l.Component=function(){};v.bindName="vrender-component",v.VIEWID=Date.now(),v.registerList=[],v.loadBefore=function(t,e){},v.dataAdapter=function(t){return t},v.errorHandler=function(t){console.error(t)},v.register=function(t,e){c.isNotBlank(t)&&c.isFunction(e)&&v.registerList.push({s:t,fun:e})},v.build=function(t){if(c.isBlank(t))return[];if(!(t=$(t))||0===t.length)return[];var n=[];return c.each(v.registerList,function(i){t.find(i.s).each(function(){var t=$(this),e=t.data(v.bindName);e||(e=new i.fun(t)),n.push(e)})}),l.trigger(l.event_buildcomplete),n},v.get=function(t){return $(t).data(v.bindName)},v.find=function(t,e,i){return(t=$(t))&&0!==t.length?c.isBlank(e)?v.build(t):c.map(t.find(e),function(t){return c.isFunction(i)?new i(t):v.get(t)}):[]},v.create=function(t,e,i){var n=(t=$.extend({},t)).tagName||t.tag||"div";(n=/img|input|br/.test(n)?$("<"+n+"/>"):$("<"+n+"></"+n+">")).attr("id",c.trimToNull(t.id)),n.attr("name",c.trimToNull(t.name)),n.attr("vid","0"+v.VIEWID++),c.isNotBlank(t.clsName)&&n.addClass(t.clsName),c.isNotBlank(t.style)&&n.addClass(t.style),t.target&&n.appendTo(t.target);var s=i&&new i(t);s&&c.isFunction(s.render)&&s.render($,n);var r=c.getFormatSize(t.width,l.ENV.useRem),a=c.getFormatSize(t.height,l.ENV.useRem);if(c.isFunction(e)){var o=new e(n,t,s);!r||c.isFunction(o.isWidthEnabled)&&!o.isWidthEnabled()||n.css("width",r),!a||c.isFunction(o.isHeightEnabled)&&!o.isHeightEnabled()||n.css("height",a),n=o}else r&&n.css("width",r),a&&n.css("height",a);return n},v.load=function(t,i,n){if(c.isBlank(t))return v.errorHandler("组件试图加载数据错误：api不能为空"),!1;i=$.extend({},i),v.loadBefore(t,i),this.lastLoadApi=t,this.lastLoadParams=i;var s=this;return l.fetch(t,i,function(t,e){t||(e=v.dataAdapter(e),c.isArray(e)?s._pageInfo=null:(s._pageInfo={},s._pageInfo.page=parseInt(i.p_no)||1,s._pageInfo.size=parseInt(i.p_size)||20,s._pageInfo.total=parseInt(e&&e.total)||0,e=e&&e.hasOwnProperty("data")?e.data:e)),c.isFunction(n)&&n(t,e)}),!0},l.$ref=function(t,e){e||(e=$("body")),e instanceof $||(e=$(e));var i=e.find("[ref='"+t+"']");return i&&0<i.length?(1<i.length&&(i=i.eq(0)),i.data("mfhInstance")||v.get(i)||i):null},window.$vr=l,window.$ref=l.$ref,$.ajaxSetup({cache:!0}),$(function(){for(var t in n=!0,v.isMobile=c.getUAState(navigator.userAgent).isMobile,s){var e=s[t];u(t,e.definition,e.deps)}s=[],l.scheduleTask("VRender.cssfilemonitor",i)})}}(),function(){VRender.ENV.isApp=!0,VRender.ENV.useRem=document.documentElement.hasAttribute("data-dpr");VRender.ENV.useRem&&function(){var e=parseInt(window.devicePixelRatio)||1,t=1/(e=Math.min(e,2)),i="width="+document.documentElement.clientWidth*e+",initial-scale="+t+",maximum-scale="+t+",minimum-scale="+t+",user-scalable=no";$("meta[name='viewport']").attr("content",i);var n=$("html").attr("data-dpr",e);$(window).resize(function(){var t=document.documentElement.clientWidth*e*100/(parseInt(n.attr("data-mw"))||640);n.attr("data-fs",t),n.css("fontSize",t+"px")}).resize()}(),$(function(){VRender.ENV.isIphone=document.body.hasAttribute("iphone")})}(),function(r){var a=r?VRender.Utils:exports;a.each=function(t,e){if(o(e)&&t&&0<t.length)for(var i=o(t.eq),n=0,s=t.length;n<s;n++){if(!1===e(i?t.eq(n):t[n],n))break}},a.filter=function(t,e){var i=[];if(o(e)&&t&&0<t.length)for(var n=o(t.eq),s=0,r=t.length;s<r;s++){var a=n?t.eq(s):t[s];e(a,s)&&i.push(a)}return i},a.filterBy=function(t,i,n){return i?a.filter(t,function(t,e){return t&&t[i]==n}):[]},a.find=function(t,e){if(o(e)&&t&&0<t.length)for(var i=o(t.eq),n=0,s=t.length;n<s;n++){var r=i?t.eq(n):t[n];if(e(r,n))return r}return null},a.findBy=function(t,i,n){return i?a.find(t,function(t,e){return t&&t[i]==n}):null},a.index=function(t,e){if(o(e)&&t&&0<t.length)for(var i=o(t.eq),n=0,s=t.length;n<s;n++){if(e(i?t.eq(n):t[n],n))return n}return-1},a.indexBy=function(t,i,n){return i?a.index(t,function(t,e){return t&&t[i]==n}):-1},a.isArray=function(t){return t&&t instanceof Array},a.map=function(t,e){var i=[];if(o(e))if(a.isArray(t))for(var n=0,s=t.length;n<s;n++)i.push(e(t[n],n));else if(r&&t instanceof $)for(n=0,s=t.length;n<s;n++)i.push(e(t.eq(n),n));return i},a.remove=function(t,e){var i=[];if(o(e)&&t&&0<t.length)for(var n=o(t.eq),s=t.length-1;0<=s;s--){var r=n?t.eq(s):t[s];e(r,s)&&(i.unshift(r),o(r.remove)?r.remove():o(t.splice)&&t.splice(s,1))}return i},
a.removeBy=function(t,i,n){return i?a.remove(t,function(t,e){return t&&t[i]==n}):[]},a.toArray=function(t){return null==t||!1===t?[]:t instanceof Array?t:[t]};var o=function(t){return"function"==typeof t}}("undefined"!=typeof VRender),function(t){var i=typeof VRender!=="undefined"?VRender.Utils:exports;i._dateBase=new Date(2018,0,1,0,0,0),i.compare=function(t,e){var i=t.getTime(),n=e.getTime();return i===n?0:i<n?-1:1},i.getDays=function(t,e){return t instanceof Date?(e instanceof Date||(e=i._dateBase),e=e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate()):new Date(2018,0,1),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),parseInt((t.getTime()-e.getTime())/864e5)):0},i.getMinutes=function(t,e){return t instanceof Date?(e instanceof Date||(e=i._dateBase),e=e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()):new Date(2018,0,1),t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),parseInt((t.getTime()-e.getTime())/6e4)):0},i.isSameDay=function(t,e){return t instanceof Date&&e instanceof Date&&(t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate())},i.isToday=function(t){return t instanceof Date&&i.isSameDay(t,new Date)},i.isTomorrow=function(t){if(t instanceof Date){var e=new Date;return e.setDate(e.getDate()+1),i.isSameDay(t,e)}return!1},i.isYesterday=function(t){if(t instanceof Date){var e=new Date;return e.setDate(e.getDate()-1),i.isSameDay(t,e)}return!1},i.toDate=function(t){if(t instanceof Date)return t;if("string"==typeof t){t=t.replace(/-/g,"/");var e=Date.parse(t);if(isNaN(e)){var i=t.indexOf(".");if(0<i){var n=parseInt(t.substr(i+1)||0);e=Date.parse(t.substr(0,i))+n}}return isNaN(e)?null:new Date(e)}return"number"==typeof t?new Date(t):null},i.toDateString=function(t,e){e=e||"yyyy-MM-dd";var i=(t=t||new Date).getMonth()+1,n=t.getDate(),s=t.getHours(),r=t.getMinutes(),a=t.getSeconds(),o=t.getMilliseconds(),l=e.replace("yyyy",t.getFullYear());if(/M/.test(l)&&(l=l.replace(/MM/g,i<10?"0"+i:i).replace(/M/g,i)),/d/.test(l)&&(l=l.replace(/dd/g,n<10?"0"+n:n).replace(/d/g,n)),/H/.test(l)&&(l=l.replace(/HH/g,s<10?"0"+s:s).replace(/H/g,s)),/m/.test(l)&&(l=l.replace(/mm/g,r<10?"0"+r:r).replace(/m/g,r)),/s/.test(l)&&(l=l.replace(/ss/g,a<10?"0"+a:a).replace(/s/g,a)),/SSS/.test(l)&&(l=l.replace(/SSS/g,o<10?"00"+o:o<100?"0"+o:o)),/hh/.test(l)){var d=(s+12)%12;s<1?d="午夜"+d:1<=s&&s<5?d="凌晨"+d:5<=s&&s<6?d="清晨"+d:6<=s&&s<8?d="早上"+d:8<=s&&s<11?d="上午"+d:11<=s&&s<13?d="中午"+d:13<=s&&s<17?d="下午"+d:17<=s&&s<18?d="傍晚"+d:18<=s&&s<=23&&(d="晚上"+d),l=l.replace(/hh/g,d)}return l},i.toLocalDateString=function(t){if(!(t instanceof Date))return"";var e=new Date;return e.getFullYear()>t.getFullYear()?i.toDateString(t,"yyyy年MM月dd日"):i.isSameDay(t,e)?i.toDateString(t,"今天 HH:mm"):(e.setDate(e.getDate()-1),i.isSameDay(t,e)?i.toDateString(t,"昨天 HH:mm"):i.toDateString(t,"MM月dd日"))}}(),function(isFront){var StringUtils=isFront?VRender.Utils:exports;StringUtils.endWith=function(t,e){return!isEmptyStr(t)&&!isEmptyStr(e)&&(!(t.length<e.length)&&t.substring(t.length-e.length)==e)},StringUtils.format=function(text,data){for(var chars=String(text).split(""),length=chars.length,param=null,result="",i=0;i<length;i++){var ch=chars[i];if("{"===ch)if(null===param)param="";else{if(""!==param)break;result+="{",param=null}else if("}"===ch)if(null===param)result+="}";else{try{var value=eval(param);result+=value||0===value?value:""}catch(t){}param=null}else null===param?result+=ch:param+=ch}return result},StringUtils.isBlank=function(t){return t?"string"==typeof t&&0===String(t).replace(/\s+/g,"").length:"0"!==t&&0!==t&&!1!==t},StringUtils.isNotBlank=function(t){return!StringUtils.isBlank(t)},StringUtils.startWith=function(t,e){return!isEmptyStr(t)&&!isEmptyStr(e)&&(!(t.length<e.length)&&t.substr(0,e.length)===e)},StringUtils.strLen=function(t,e){return isEmptyStr(t)?0:(e&&(t=t.replace(/[\u4E00-\u9FFF]/g,"..")),t.length)},StringUtils.trimToEmpty=function(t){return StringUtils.isBlank(t)?"":(""+t).trim()},StringUtils.trimToNull=function(t){return StringUtils.isBlank(t)?null:(""+t).trim()},StringUtils.trimToUndefined=function(t){return StringUtils.isBlank(t)?void 0:(""+t).trim()};var isEmptyStr=function(t){return null==t||0===t.length}}("undefined"!=typeof VRender),function(t){var c=typeof VRender!=="undefined"?VRender.Utils:exports,s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),e=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,i=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$"),o=[];c.debounce=function(e,i,t,n){if(c.isFunction(e)&&(t,t=i,i=e,e=null),c.isFunction(i)){e=e||i._name;var s=c.find(o,function(t){return t.handler==i||t.name==e});s||(s={handler:i,name:e,timerId:0},o.push(s)),s.timerId&&clearTimeout(s.timerId);var r=this,a=s.params=Array.prototype.slice.call(arguments,2);s.timerId=setTimeout(function(){i.apply(r,a),c.remove(o,function(t){return t.handler==i||t.name==e})},Math.max(0,parseInt(t)||0))}},c.equal=function(t,e){if(t==e)return!0;if(c.isNull(t))return c.isNull(e);if(c.isNull(e))return!1;if("object"!=typeof t||"object"!=typeof e)return t===e;if(t instanceof Array){if(e instanceof Array){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(!c.equal(t[i],e[i]))return!1;return!0}return!1}return t.hasOwnProperty("id")?t.id==e.id:t.hasOwnProperty("code")?t.code==e.code:!!t.hasOwnProperty("value")&&t.value==e.value},c.exec=function(i,n,s,r,t){if(c.isFunction(i)?(r=i,t=n,i=n=s=null):i instanceof Array&&(t=r,r=s,s=n,n=i,i=null),n&&(c.isFunction(n)?(t=s,r=n,n=s=null):n instanceof Array||(t=r,r=s,s=n,n=null)),s&&c.isFunction(s)&&(t=r,r=s,s=null),i||(i=this),c.isFunction(r)||(r=function(){}),n&&0!==n.length){var a=0,o=n.length;if(t){var l=[];for(a=0;a<n.length;a++)n[a].call(i,s,function(t,e){o-=1,t&&l.push(t),o<=0&&r.call(i,l.join("")||!1,e||s)})}else{var d=function(t,e){t?r.call(i,t,s):(a+=1)<o?n[a].call(i,e||s,d):r.call(i,!1,e||s)};n[0].call(i,s,d)}}else r.call(i,!1,s)},c.extend="undefined"!=typeof $?$.extend:null,c.getIndexValue=function(t){return t||0===t?isNaN(t)?-1:0<=(t=parseInt(t))?t:-1:-1},c.getFormatSize=function(t,e){return t||0===t?isNaN(t)?t:(t=parseFloat(t)||0,e?t/100+"rem":t+"px"):null},c.getSelection=function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection},c.getSelectionRange=function(){var t=c.getSelection();return t&&t.createRange?t.createRange():t.getRangeAt(0)},c.getUAState=function(t){var e={ie:!1,chrome:!1,firefox:!1,opera:!1,safari:!1},i=t.toLowerCase();return/micromessenger/.test(i)?e.wx=!0:/msie ([\d.]+)/.test(i)?e.ie=!0:/firefox\/([\d.]+)/.test(i)?e.firefox=!0:/chrome\/([\d.]+)/.test(i)?e.chrome=!0:/opera.([\d.]+)/.test(i)?e.opera=!0:/safari/.test(i)&&/version\/([\d.]+)/.test(i)&&(e.safari=!0),e.isIphone=/iphone/.test(i),e.isAndroid=/android/.test(i),e.isMobile=/mobile/.test(i)||e.isIphone||e.isAndroid,e},c.getUrlParams=function(t){var e=window.location.search.substr(1).split("&");if(c.isBlank(t)){for(var i={},n=0;n<e.length;n++){(s=e[n].split("="))[0]&&(i[s[0]]=s[1]||"")}return i}for(n=0;n<e.length;n++){var s;if((s=e[n].split("="))[0]==t)return s[1]||""}return null},c.isAlphaKey=function(t,e){return 65<=t.which&&t.which<=90||!!(e&&97<=t.which&&t.which<=122)},c.isControlKey=function(t){if(t.ctrlKey||t.metaKey||t.shiftKey)return!0;return 0<=[8,37,38,39,40,116,9,17,16,13,20].indexOf(t.which)},c.isDomExist=function(t){return t&&0<$("body").find(t).length},c.isEmail=function(t){return t&&e.test(""+t)},c.isEmpty=function(t){if(void 0===t)return!0;if(null===t)return!0;if(""===t)return!0;for(var e in t)return!1;return!0},c.isFunction=function(t){return t&&"function"==typeof t},c.isMobile=function(t){return t&&/^1\d{10}$/.test(""+t)},c.isNull=function(t){return null==t},c.isNumberKey=function(t){return!t.shiftKey&&(48<=t.which&&t.which<=57||96<=t.which&&t.which<=105)},c.isNotEmpty=function(t){return!c.isEmpty(t)},c.isNotNull=function(t){return!c.isNull(t)},c.isNumberic=function(t){return!c.isNull(t)&&("number"==typeof t||!isNaN(t))},c.isPhone=function(t){return t&&/^(0(10|2\d|[3-9]\d{2})-)?\d{7,8}(-\d{1,8})?$/.test(""+t)},c.isPrimitive=function(t){return"string"==typeof t||"number"==typeof t},c.isTrue=function(t){return!!t&&(!0===t||1===t||!("false"===(t=String(t).toLowerCase())||"no"===t||"0"===t))},c.isUrl=function(t){return t&&i.test(""+t)},c.nextTick=function(t){window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)},c.notNull=c.isNotNull,c.offset=function(t,e,i,n){t instanceof $||(t=$(t));var s=c.offsetToWindow(t);s.width=parseInt(i),s.width=0<s.width?s.width:t.outerWidth(),s.height=parseInt(n),s.height=0<s.height?s.height:t.outerHeight();var r=$(window);if(s.windowLeft=s.left,s.windowTop=s.top,s.windowWidth=r.width(),s.windowHeight=r.height(),s.overflowX=s.left<0||s.left+s.width>s.windowWidth,s.overflowY=s.top<0||s.top+s.height>s.windowHeight,s.overflowWindowX=s.overflowX,s.overflowWindowY=s.overflowY,!e||e instanceof $||(e=$(e)),e&&0<e.length){var a=c.offsetToWindow(e);s.containerLeft=a.left,s.containerTop=a.top,s.containerWidth=e.width(),s.containerHeight=e.height(),s.left-=a.left,s.top-=a.top,s.overflowX=s.left<0||s.left+s.width>s.containerWidth,s.overflowY=s.top<0||s.top+s.height>s.containerHeight,s.overflowContainerX=s.overflowX,s.overflowContainerY=s.overflowY}return s.isOverflowX=s.overflowWindowX||!!s.overflowContainerX,s.isOverflowY=s.overflowWindowY||!!s.overflowContainerY,s},c.offsetToHtml=function(t){for(var e=(t=$(t)).offset();(t=t.parent())&&0!=t.length&&(e.top-=t.scrollTop(),e.left-=t.scrollLeft(),!t.is("html")););return e},c.offsetToWindow=function(t){if(t instanceof $&&(t=t.get(0)),t){var e=t.getBoundingClientRect();return{left:e.x,top:e.y}}return{left:0,top:0}},c.parentUntil=function(t,e,i){for(t=$(t);null!=t&&0<t.length;){if(t.is(e))return t;if(i&&t.is(i))return $("");t=t.parent()}return $("")},c.parseUrl=function(t){var e=document.createElement(
"a");e.href=t||"";var i={};if(i.origin=t,i.href=e.href,i.protocol=e.protocol.replace(":",""),i.host=e.host,i.hostname=e.hostname,i.port=e.port,i.pathname=e.pathname,i.search=e.search,i.hash=e.hash,i.params={},e.search)for(var n=e.search.substr(1).split("&"),s=0,r=n.length;s<r;s++){var a=n[s].split("=");i.params[a[0]]=a[1]}return i},c.randomTxt=function(t){for(var e=[],i=s,n=0;n<t;n++)e.push(i[Math.ceil(61*Math.random())]);return e.join("")},c.toLocalMobile=function(t,e){if(!c.isMobile(t))return t;var i=[];return e&&i.push("+86"),i.push(t.substr(0,3)),i.push(t.substr(3,4)),i.push(t.substr(7,4)),i.join(" ")},c.toPx=function(t){if(t){var e=/rem$/.test(""+t);if(t=parseFloat(t),isNaN(t))return NaN;if(t&&e){var i=parseFloat($("html").attr("data-fs"));i||(i=parseFloat($("html").css("fontSize"))),i&&(t*=i)}return t}return 0===t?0:NaN},c.toRem=function(t){if(t){var e=/rem$/.test(""+t);if(t=parseFloat(t),isNaN(t))return NaN;if(t&&!e){var i=parseFloat($("html").attr("data-fs"));i||(i=parseFloat($("html").css("fontSize"))),i&&(t/=i)}return t}return 0===t?0:NaN}}(),function(){if("undefined"!=typeof VRender&&!VRender.EventEmitter){var a=VRender.Utils,t=(VRender.EventEmitter=function(){}).prototype=new Object;t.trigger=function(t,e){var i="string"==typeof t?{type:t}:t;if(i&&a.isNotBlank(i.type)&&a.isArray(this.events))for(var n=Array.prototype.slice.call(arguments,1),s=this.events.length-1;0<=s;s--){var r=this.events[s];r&&r.name===i.type&&(i.data=r.data,i.preventDefault=function(){i.isPreventDefault=!0},r.listener.apply(this,[i].concat(n)),delete i.data,delete i.preventDefault,r.once&&this.events.splice(s,1))}return this},t.on=function(t,e,i){return n.call(this,!1,t,e,i),this},t.one=function(t,e,i){return n.call(this,!0,t,e,i),this},t.off=function(e,i){return a.remove(this.events,function(t){if(t.name===e)return!a.isNotNull(i)||t.listener==i}),this},t.hasListen=function(t){return!!a.findBy(this.events,"name",t)};var n=function(t,e,i,n){"string"==typeof e&&a.isNotBlank(e)&&(a.isFunction(i)&&!a.isFunction(n)&&(n=i,i=null),a.isFunction(n)&&(a.isArray(this.events)||(this.events=[]),this.events.push({name:e,data:i,listener:n,once:!!t})))}}}(),function(){if("undefined"!=typeof VRender&&!VRender.FrontComponent){var n=VRender.Utils,s=VRender.FrontComponent=function(t,e){this.className=/^\./.test(t)?t.substr(1):t,this.ComponentClass=e},t=s.prototype=new VRender.EventEmitter;s.get=function(t){return $(t).data("mfhInstance")},t.find=function(t,e){(t=$(t)).is("."+this.className)||(t=t.find("."+this.className));var i=this;return n.map(t,function(t){return i.make(t,e)})},t.create=function(t){var e=$("<div></div>");(t=t||{}).target&&(t.targetAsInstance?e=t.target:e.appendTo(t.target)),e.addClass(this.className),e.attr("name",n.trimToNull(t.name)),n.isFunction(this.render)&&this.render(e,t);var i=new this.ComponentClass(e,t);return e.data("mfhInstance",i),i},t.make=function(t,e){var i=(t=$(t)).data("mfhInstance");return i||(i=new this.ComponentClass(t,e),t.data("mfhInstance",i)),i},VRender.frontComponent=function(t,e,i){var n=new s(t,e);return n.render=i,n}}}(),function(l){if(!l){if(VRender.Component.Render)return;VRender.Component.Render={}}var d=l?require(__vrender__).Utils:VRender.Utils,o={doAdapter:function(t,e){if(t&&t._vr_adapter_flag)return t;var i=this.options.dataAdapter||this.options.adapter;return d.isFunction(this.getDataAdapter)&&(i=this.getDataAdapter()),d.isFunction(i)&&(t=i(t,e))&&(t._vr_adapter_flag=!0),t},getDataKey:function(t){if(d.isBlank(t))return null;if(d.isPrimitive(t))return t;var e=this.options.keyField;return d.isFunction(this.getKeyField)&&(e=this.getKeyField()),d.isNotBlank(e)?t[e]:t.hasOwnProperty("id")?t.id:t.hasOwnProperty("code")?t.code:t.hasOwnProperty("value")?t.value:null},getDataLabel:function(t,e){var i=this.options.labelFunction;if(d.isFunction(this.getLabelFunction)&&(i=this.getLabelFunction()),d.isFunction(i))return i.call(this,t,e);if(d.isBlank(t))return"";if(d.isPrimitive(t))return""+t;var n=this.options.labelField;return d.isFunction(this.getLabelField)&&(n=this.getLabelField()),d.isNotBlank(n)?d.isNull(t[n])?"":t[n]:t.hasOwnProperty("label")?d.isNull(t.label)?"":t.label:t.hasOwnProperty("name")?d.isNull(t.name)?"":t.name:t.hasOwnProperty("value")?d.isNull(t.value)?"":t.value:""+t},getMapData:function(t){var e=this.options.dataMapper||this.options.mapper;if(d.isFunction(this.getDataMapper)&&(e=this.getDataMapper()),d.isFunction(e))return e(t);if(d.isNull(t))return null;if(d.isPrimitive(t))return t;var i={};return t.hasOwnProperty("id")&&(i.id=t.id),t.hasOwnProperty("code")&&(i.code=t.code),t.hasOwnProperty("name")&&(i.name=t.name),t.hasOwnProperty("value")&&(i.value=t.value),t.hasOwnProperty("label")&&(i.label=t.label),i},isMultiple:function(){return this.options.hasOwnProperty("multiple")?d.isTrue(this.options.multiple):d.isTrue(this.options.multi)},renderData:function(t,e){if(d.isFunction(this.getMapData)&&(e=this.getMapData(e)),e)if(d.isPrimitive(e))t.attr("data-v",e);else for(var i in e)t.attr("data-"+i,d.trimToEmpty(e[i]))},renderFunction:function(t,e,i){l&&d.isNotBlank(e)&&d.isFunction(i)&&t.write("<div class='ui-fn' style='display:none' name='"+e+"' fn-state='"+(i._state||"")+"' fn-data='"+(i._data||"")+"'>"+escape(i)+"</div>")},renderSubView:function(t,e){e&&(d.isFunction(e.render)?e.render(t):t.append(e.$el||e))}},i=function(t,e){this.context=e?t:null,this.options=e||t,this.options=this.options||{}},t=i.prototype=new Object;i.render=function(t,e){this.renderData(t,e),o.renderFunction.call(this,e,"adapter",this.getDataAdapter()),o.renderFunction.call(this,e,"mapper",this.getDataMapper())},t.render=function(t,e){i.render.call(this,t,e)},t.renderData=function(t,e){o.renderData.call(this,e,this.getData())},t.isRenderAsApp=function(){return l?(this.hasOwnProperty("_isApp")||(this._isApp=!1,this.context&&d.isFunction(this.context.isRenderAsApp)&&(this._isApp=this.context.isRenderAsApp())),this._isApp):VRender.ENV.isApp},t.isRenderAsIphone=function(){return l?(this.hasOwnProperty("_isIphone")||(this._isIphone=!1,this.context&&d.isFunction(this.context.isRenderAsIphone)&&(this._isIphone=this.context.isRenderAsIphone())),this._isIphone):VRender.ENV.isIphone},t.isRenderAsRem=function(){return l?(this.hasOwnProperty("_isRem")||(this._isRem=!1,this.context&&d.isFunction(this.context.isRenderAsRem)&&(this._isRem=this.context.isRenderAsRem())),this._isRem):VRender.ENV.useRem},t.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},t.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},t.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},t.getMapData=function(t){return o.getMapData.call(this,t)},t._getDataKey=function(t){return o.getDataKey.call(this,t)},t._getDataLabel=function(t){return o.getDataLabel.call(this,t)},t._doAdapter=function(t){return t?o.doAdapter.call(this,t):null};var s=function(t,e){i.call(this,t,e)},e=s.prototype=new i;s.render=function(t,e){i.render.call(this,t,e),e.attr("opt-key",d.trimToNull(this.getKeyField())),e.attr("opt-lbl",d.trimToNull(this.getLabelField())),e.attr("opt-disable",d.trimToNull(this.options.disableField)),o.renderFunction(e,"lblfunc",this.getLabelFunction()),o.renderFunction(e,"irender",this.getItemRenderer()),this._renderItems(t,e),this._renderEmptyView(t,e),this._renderLoadView(t,e),this._renderPager(t,e)},s.renderData=function(t,e,i){if(0<(i=d.toArray(i)||[]).length){var n=this.getDataMapper();d.isFunction(n)&&(i=d.map(i,n))}e.attr("data-items",escape(JSON.stringify(i)))},s.renderItems=function(n,s,t){if((t=t||this.getData())&&0<t.length){var r=this,a=this._render_items=[];d.each(t,function(t,e){var i=r._getNewItem(n,s,t,e);i&&(a.push({item:i,data:t,index:e}),r._renderOneItem(n,i,t,e))}),setTimeout(function(){r._render_items=null},0)}},s.renderOneItem=function(t,e,i,n,s){l?this.renderItemData(t,e,n):e.data("itemData",n),this._isDisabled(n,s)&&e.addClass("disabled").attr("disabled","disabled"),i=i||e;var r=this.getItemRenderer();if(d.isFunction(r)){var a=null;a=(r._state,r.call(this,t,e,n,s)),d.isNotNull(a)&&i.empty().append(a)}else{var o=this._getDataLabel(n,s);i.html(d.isNull(o)?"":o)}},s.renderPager=function(t,e,i){l&&(!i&&d.isFunction(this.getPaginator)&&(i=this.getPaginator()),i&&("string"==typeof i?e.attr("opt-pager",d.trimToNull(i)):d.isFunction(i.getViewId)&&e.attr("opt-pager","[vid='"+i.getViewId()+"']")))},s.renderEmptyView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-empty");var s=d.isFunction(this._getEmptyView)?this._getEmptyView():this.options.emptyView;if(s)o.renderSubView.call(this,n,s);else{(s=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-emptydef");var r=this.options.emptyText||this.options.empty;d.isFunction(this._getEmptyText)&&(r=this._getEmptyText()),(r=d.isNull(r)?"没有数据":d.trimToEmpty(r))&&t("<p></p>").appendTo(s).text(r)}return n},s.renderLoadView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-load");var s=d.isFunction(this._getLoadView)?this._getLoadView():this.options.loadingView;if(s)o.renderSubView.call(this,n,s);else{var r=t("<div></div>").appendTo(n);r.addClass((i||"ui")+"-loaddef");var a=d.isFunction(this._getLoadText)?this._getLoadText():this.options.loadingText;(a=d.isNull(a)?"正在加载..":d.trimToEmpty(a))&&t("<p></p>").appendTo(r).html(a)}return n},s.renderMoreView=function(t,e,i){var n=t("<div></div>").appendTo(e);if(n.addClass((i||"ui")+"-more"),this._pageInfo&&n.attr("page-no",this._pageInfo.page),s=d.isFunction(this._getMoreView)?this._getMoreView():this.options.moreView)o.renderSubView.call(this,n,s);else{var s;(s=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-moredef");var r=d.isFunction(this._getMoreText)?this._getMoreText():this.options.moreText;(r=d.isNull(r)?"加载更多":d.trimToEmpty(r))&&t("<p></p>").appendTo(s).html(r)}return n},s.doAdapter=function(t){if((t=d.toArray(t))._vr_adapter_flag)return t;var i=this;return(t=d.map(t,function(t,e){return o.doAdapter.call(i,t,e)}))._vr_adapter_flag=!0,t},e.render=function(t,e){s.render.call(this,t,e)},e.renderData=function(t,e){l&&s.renderData.call(this,t,e,this.getData())},e.renderItemData=function(t,e,i){o.renderData.call(this,t,e,i)},
e.getPaginator=function(){return this.options.paginator||this.options.pager},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&s.renderItems.call(this,t,i)},e._getItemContainer=function(t,e){return e},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderOneItem=function(t,e,i,n){s.renderOneItem.call(this,t,e,null,i,n)},e._renderPager=function(t,e){s.renderPager.call(this,t,e)},e._renderEmptyView=function(t,e){s.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){s.renderLoadView.call(this,t,e)},e._renderMoreView=function(t,e){s.renderMoreView.call(this,t,e)},e.getKeyField=function(){return this.options.keyField},e.getLabelField=function(){return this.options.labelField},e.getLabelFunction=function(){return this.options.labelFunction},e.getItemRenderer=function(){return this.options.itemRenderer},e._isDisabled=function(t,e){if(t){var i=this.options.disableField||"disabled";if(i&&t.hasOwnProperty(i))return d.isTrue(t[i])}return!1},e._getDataLabel=function(t,e){return o.getDataLabel.call(this,t,e)},e._doAdapter=function(t){return s.doAdapter.call(this,t)};var r=function(t,e){s.call(this,t,e)},n=r.prototype=new s;if(r.render=function(t,e){s.render.call(this,t,e),this.isMultiple()&&e.attr("multiple","multiple"),this.renderSelection(t,e)},r.renderSelection=function(t,e,i){var n=this.getSelectedIndex(!0),s=this.getSelectedKey(!0);if(n&&e.attr("data-inds",n.join(",")),s&&e.attr("data-ids",s.join(",")),l&&this.options.apiName&&(n&&e.attr("data-tryindex",n.join(",")),s&&e.attr("data-tryid",s.join(","))),i&&0<i.length){s=s||[];var r=this;d.each(i,function(t,e){r._isSelected(t.data,t.index,n,s)&&(d.isFunction(r._setItemSelected)?r._setItemSelected(t.item,!0):t.item.addClass("selected"))})}},r.getSelectedIndex=function(t){var e=this.options.selectedIndex;if(d.isBlank(e))return t||this.isMultiple()?null:-1;d.isArray(e)||(e=(""+e).split(","));var i=[];return d.each(e,function(t){if(!isNaN(t)){var e=parseInt(t);!isNaN(e)&&0<=e&&i.push(e)}}),this.isMultiple()?0<i.length?i:null:i&&0<i.length?t?[i[0]]:i[0]:-1},r.getSelectedKey=function(t){var e=this.options.selectedKey;if(d.isBlank(e))return t||this.isMultiple()?[]:null;d.isArray(e)||(e=(""+e).split(","));var i=[];return d.each(e,function(t){(t||0===t)&&i.push(isNaN(t)?t:parseInt(t))}),0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},r.getSelectedData=function(t,e){var i=[];if((e=e||this.getData())&&0<e.length)for(var n=this.getSelectedIndex(!0),s=this.getSelectedKey(!0)||[],r=0,a=e.length;r<a;r++){var o=e[r];this._isSelected(o,r,n,s)&&i.push(o)}return 0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},r.isSelected=function(t,e,i,n){if(i||n||(i=this.getSelectedIndex(!0),n=this.getSelectedKey(!0)||[]),i)return!((e=d.getIndexValue(e))<0)&&0<=i.indexOf(e);if(n){var s=this._getDataKey(t);return 0<=d.index(n,function(t){return t==s})}return!1},r.isAllSelected=function(t){if((t=t||this.getData())&&0<t.length){for(var e=this.getSelectedIndex(!0),i=this.getSelectedKey(!0)||[],n=0,s=t.length;n<s;n++)if(!this._isSelected(t[n],n,e,i))return!1;return!0}return!1},n.render=function(t,e){r.render.call(this,t,e)},n.renderSelection=function(t,e){r.renderSelection.call(this,t,e,this._render_items)},n.getSelectedIndex=function(t){return r.getSelectedIndex.call(this,t)},n.getSelectedKey=function(t){return r.getSelectedKey.call(this,t)},n.getSelectedData=function(t){return r.getSelectedData.call(this,t)},n.isMultiple=function(){return o.isMultiple.call(this)},n.isAllSelected=function(){return r.isAllSelected.call(this)},n._isSelected=function(t,e,i,n){return r.isSelected.call(this,t,e,i,n)},n._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},l)module.exports={fn:o,_base:i,_item:s,_select:r};else{var a=VRender.Component.Render;a.fn=o,a._base=i,a._item=s,a._select=r}}("undefined"==typeof VRender),function(){if(!VRender.Component.base){var l=VRender.Utils,d=VRender.Component,s=d.Render,a=s.fn||{};a.getFunction=function(t,e){if(this.options.hasOwnProperty(t))return this.options[t];if(this.hasOwnProperty(t))return this[t];var i=null,n=this.$el.children(".ui-fn[name='"+(e||t)+"']");if(n&&0<n.length){if(i=n.text(),l.isNotBlank(i)&&((i=new Function("var Utils=VRender.Utils;return ("+unescape(i)+");")())._state=n.attr("fn-state")||null,i._data=n.attr("fn-data")||null,i._data))try{i._data=JSON.parse(i._data)}catch(t){}n.remove()}return this[t]=i},a.load=function(t,e,s){if(t=t||this.lastLoadApi||this.$el.attr("api-name"),l.isBlank(t))return!1;var r=this,a=this.$el.addClass("is-loading"),o=this.loadTimerId=Date.now();return d.load.call(this,t,e,function(t,e){if(o==r.loadTimerId){a.removeClass("is-loading");var i=l.isFunction(r.getPaginator)&&r.getPaginator();if(i&&l.isFunction(i.set)){var n=r._pageInfo||{};i.set(n.total,n.page,n.size)}l.isFunction(s)&&s(t,e)}}),!0},a.getIntValues=function(t,e,i){l.isArray(t)||(t=l.isBlank(t)?[]:(""+t).split(",")),e=l.isNull(e)?Number.NEGATIVE_INFINITY:e,i=l.isNull(i)?Number.POSITIVE_INFINITY:i;var n=[];return l.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&n.indexOf(t)<0&&e<=t&&t<=i&&n.push(t))}),n},a.equalIndex=function(t,e){if(t=a.getIntValues(t,0),e=a.getIntValues(e,0),t.length!=e.length)return!1;t.sort(function(t,e){return e<t}),e.sort(function(t,e){return e<t});for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0},a.snapshoot=function(){var n={},s={},r=this,t={};return this._rootSnapshoot||(this._rootSnapshoot=t),t.shoot=function(t,e){if(t=t||n,l.isFunction(r._snapshoot_shoot)){var i=Array.prototype.slice.call(arguments);i[0]=t,r._snapshoot_shoot.apply(r,i)}else t.data=r.getData()},t.compare=function(t){var e=Array.prototype.slice.call(arguments);return l.isFunction(r._snapshoot_compare)?r._snapshoot_compare.apply(r,[n].concat(e)):(this.shoot.apply(this,[s].concat(e)),n.data==s.data)},t.done=function(t){var e=!1;if(r._rootSnapshoot==this){var i=Array.prototype.slice.call(arguments);this.compare.apply(this,i)||(this.shoot.apply(this,[s].concat(i)),l.isFunction(r._snapshoot_change)&&r._snapshoot_change(s.data,n.data),r.trigger("change",s.data,n.data),r.$el.trigger("change",s.data,n.data),e=!0)}return this.release(),e},t.release=function(){r._rootSnapshoot==this&&(r._rootSnapshoot=null)},t.getState=function(){return n},t.shoot(n),s.data=n.data,t},a.getDropdownHeight=function(t,e){var i=0;i=this.isRenderAsApp()?.8*$(window).height():parseInt(t.css("maxHeight"))||e||300;var n=t.get(0).scrollHeight;return n<i&&(i=n),i},a.mouseDebounce=function(t,e){var i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),e()},500),i.attr("timerid",n))};var n=function(t){},t=n.prototype=new VRender.EventEmitter;n.init=function(t,e){var i=this.$el=$(t);if(i.data(d.bindName))return i.data(d.bindName);i.data(d.bindName,this),this.options=e||{},u.call(this,i,this.options);var n=this;return setTimeout(function(){h.call(n)},0),this},n.isElement=function(t){return t instanceof Element||t instanceof $},n.getInitParams=function(){if(!this.initParams){var t=null;if(this.options.hasOwnProperty("params"))t=this.options.params;else try{t=JSON.parse(this.$el.attr("api-params")||null)}catch(t){}this.initParams=l.extend({},t)}return l.extend({},this.initParams)},n.isAutoLoad=function(){return this.options.hasOwnProperty("autoLoad")||(this.options.autoLoad=this.$el.attr("api-autoload")),this.$el.removeAttr("api-autoload"),l.isTrue(this.options.autoLoad)},t.init=function(t,e){return n.init.call(this,t,e)},t.isRenderAsApp=function(){return VRender.ENV.isApp},t.isRenderAsIphone=function(){return VRender.ENV.isIphone},t.isRenderAsRem=function(){return VRender.ENV.useRem},t.getViewId=function(){return this.$el.attr("vid")},t.destory=function(){this.$el.remove()},t.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},t.setData=function(t){this.options.data=t,this._rerender()},t.getDataAdapter=function(){return this.options.hasOwnProperty("adapter")?this.options.adapter:a.getFunction.call(this,"dataAdapter","adapter")},t.setDataAdapter=function(t){this.options.adapter=t,delete this.options.dataAdapter,this.$el.children(".ui-fn[name='adapter']").remove(),this._rerender()},t.getDataMapper=function(){return this.options.hasOwnProperty("mapper")?this.options.mapper:a.getFunction.call(this,"dataMapper","mapper")},t.setDataMapper=function(t){this.options.mapper=t,delete this.options.dataMapper,this.$el.children(".ui-fn[name='mapper']").remove(),this._rerender()},t.isDisabled=function(){return this.$el.is(".disabled")},t.setDisabled=function(t){l.isNull(t)||l.isTrue(t)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled","disabled")},t.setVisible=function(t){l.isNull(t)||l.isTrue(t)?this.$el.removeClass("ui-hidden"):this.$el.addClass("ui-hidden")},t.load=function(t,e,i){l.isFunction(this._loadBefore)&&this._loadBefore(t,e);var n=this;return a.load.call(this,t,e,function(t,e){t||(l.isFunction(n.setData)?n.setData(e):n.options.data=e),setTimeout(function(){l.isFunction(n._loadAfter)&&n._loadAfter(t,e),l.isFunction(i)&&i(t,e),n.trigger("loaded",t,e)},0)})},t.reload=function(t,e){l.isFunction(t)&&(e=t,t=null);var i=this.lastLoadParams||{};return!isNaN(t)&&0<t&&(i.p_no=t),this.load(this.lastLoadApi,i,e)},t.isLoading=function(){return this.$el.is(".is-loading")},t.getInitParams=function(){return n.getInitParams.call(this)},t._rerender=function(){},t._getDataKey=function(t){return a.getDataKey.call(this,t)},t._getDataLabel=function(t,e){return a.getDataLabel.call(this,t,e)},t._doAdapter=function(t){return a.doAdapter.call(this,t)},t._isMounted=function(){return 0<$("body").find(this.$el).length},t._snapshoot=function(){return a.snapshoot.call(this)},t._getScrollContainer=function(){return this.$el.attr("opt-box")};var r=function(){},e=r.prototype=new n;r.init=function(t,e){var i=n.init.call(this,t,e);return i===this&&(this._initPager(),this._checkIfEmpty()),i},r.doAdapter=function(t){return s._item.doAdapter.call(this,t)},r.renderItems=function(t,e){s._item.renderItems.call(this,$,t,e),this._checkIfEmpty()},r.renderOneItem=function(t,e,i,n){
return s._item.renderOneItem.call(this,$,t,e,i,n)},r.addItem=function(t,e,i){e=l.getIndexValue(e),t=a.doAdapter.call(this,t,e);var n=null,s=(i=i||this.getData(),this._getItemContainer());if(s&&0<s.length){if(n=this._getNewItem($,s,t,e)){if(0<=e&&e<i.length){var r=this._getItems();r&&0<r.length&&r.eq(e).before(n)}this._renderOneItem($,n,t,e)}this._checkIfEmpty()}return 0<=e&&e<i.length?i.splice(e,0,t):i.push(t),n},r.updateItem=function(t,e,i){if(t=a.doAdapter.call(this,t,e),0<=(e=e||0===e?l.getIndexValue(e):this.getDataIndex(t)))if(e<(i=i||this.getData()).length){var n=this._getItemContainer();if(n&&0<n.length){var s=this._getItems(),r=this._getNewItem($,n,t,e);r?(s.eq(e).before(r).remove(),this._renderOneItem($,r,t,e)):s.eq(e).remove()}this._checkIfEmpty(),i.splice(e,1,t)}else e=-1;return e},r.removeItem=function(t,e,i){if(t&&0<t.length)e=t.index();else{if((e=l.getIndexValue(e))<0)return null;var n=this._getItems();n&&n.length>e&&(t=n.eq(e))}return t&&0<t.length&&(t.remove(),this._checkIfEmpty()),(i=i||this.getData())&&e<i.length?i.splice(e,1):null},r.initPager=function(){if(this.options.hasOwnProperty("pager"))this.setPaginator(this.options.pager);else{var t=this.$el.attr("opt-pager");t&&(t=$(t))&&0<t.length&&(t=d.get(t)||VRender.FrontComponent.get(t)||t,this.setPaginator(t)),this.$el.removeAttr("opt-pager")}},r.setPager=function(s){if(this.pager&&l.isFunction(this.pager.off)&&this.pager.off("change"),(this.pager=s)&&l.isFunction(s.on)){var r=this;s.on("change",function(t,e){var i=$.extend({},r.lastLoadParams);i.p_no=e&&e.page,i.p_size=e&&e.size,!i.p_no&&l.isFunction(s.getPage)&&(i.p_no=s.getPage()),!i.p_size&&l.isFunction(s.getSize)&&(i.p_size=s.getSize());var n=r._pageInfo||{};i.p_no==n.page&&i.p_size==n.size||r.load(r.lastLoadApi,i)})}},r.checkIfEmpty=function(){var t=this._getItems();t&&0<t.length?this.$el.removeClass("is-empty"):this.$el.addClass("is-empty")},r.isDisabled=function(t){if("number"==typeof t){var e=this._getItemAt(t);return!e||e.is(".disabled")}return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled")},r.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));var i=this.$el;if("number"==typeof e&&(i=this._getItemAt(e)),i&&((t=!(!l.isNull(t)&&!l.isTrue(t)))?i.addClass("disabled").attr("disabled","disabled"):i.removeClass("disabled").removeAttr("disabled"),l.isFunction(this.getDisableField))){var n=this.getDisableField();if(n){var s=this._getItemData(i);s&&(s[n]=t)}}},e.init=function(t,e){return r.init.call(this,t,e)},e.setData=function(t){this.options.data=this._doAdapter(t),this._rerender()},e.getDataAt=function(t){if((t=l.getIndexValue(t))<0)return null;var e=this.getData()||[];return t<e.length?e[i]:null},e.getDataIndex=function(e){var t=this.getData();if(t&&0<t.length){var i=this,n=this._getDataKey(e);return l.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},e.getDataByKey=function(t){return this.getDataAt(this.getIndexByKey(t))},e.getIndexByKey=function(e){var t=this.getData();if(t&&0<t.length){var i=this;return l.index(t,function(t){return i._getDataKey(t)==e})}return-1},e.getDataByName=function(t){return this.getDataAt(this.getIndexByName(t))},e.getIndexByName=function(t){var e=this.getData();return e&&0<e.length?l.indexBy(e,"name",t):-1},e.getKeyField=function(){return this.options.keyField||this.$el.attr("opt-key")},e.setKeyField=function(t){t=l.trimToEmpty(t),this.getKeyField()!=t&&(this.options.keyField=t,this.$el.attr("opt-key",this.options.keyField),this._rerender())},e.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-lbl")},e.setLabelField=function(t){t=l.trimToEmpty(t),this.getLabelField()!=t&&(this.options.labelField=t,this.$el.attr("opt-lbl",this.options.labelField),this._rerender())},e.getLabelFunction=function(){return a.getFunction.call(this,"labelFunction","lblfunc")},e.setLabelFunction=function(t){this.getLabelFunction()!=t&&(this.options.labelFunction=t,this.$el.children(".ui-fn[name='lblfunc']").remove(),this._rerender())},e.getItemRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:a.getFunction.call(this,"itemRenderer","irender")},e.setItemRenderer=function(t){this.getItemRenderer()!=t&&(this.options.renderer=t,delete this.options.itemRenderer,this.$el.children(".ui-fn[name='irender']").remove(),this._rerender())},e.getPaginator=function(){return this.pager},e.setPaginator=function(t){r.setPager.call(this,t)},e.length=function(){return l.toArray(this.getData()).length},e.isDisabled=function(t){return r.isDisabled.call(this,t)},e.setDisabled=function(t,e){r.setDisabled.call(this,t,e)},e.addItem=function(t,e){return r.addItem.call(this,t,e)},e.updateItem=function(t,e){return r.updateItem.call(this,t,e)},e.removeItem=function(t){return this.removeItemAt(this.getDataIndex(t))},e.removeItemAt=function(t){return r.removeItem.call(this,null,t)},e.addOrUpdateItem=function(t){var e=this.getDataIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},e.getItemData=function(t){var e=$(t);if(e&&0<e.length){var i=this._getItemContainer();if(i&&0<i.length){for(t=e.parent();;){if(!t||0==t.length){e=null;break}if(t.is(i))break;t=(e=t).parent()}if(e&&0<e.length)return this._getItemData(e)}}return null},e.more=function(n){if(this.lastLoadApi&&this.hasMore()&&!this.isLoading()){var t=l.extend({},this.lastLoadParams);t.p_no=parseInt(this._pageInfo&&this._pageInfo.page)||0,t.p_no+=1,l.isFunction(this._moreBefore)?this._moreBefore(this.lastLoadApi,t):l.isFunction(this._loadBefore)&&this._loadBefore(this.lastLoadApi,t);var s=this;return a.load.call(this,this.lastLoadApi,t,function(t,e){if(!t&&l.isArray(e))if(l.isFunction(s.addItem))l.each(e,function(t){s.addItem(t)});else{var i=this.options.data||[];this.options.data=i.concat(e)}setTimeout(function(){l.isFunction(s._moreAfter)?s._moreAfter(t,e):l.isFunction(s._loadAfter)&&s._loadAfter(t,e),l.isFunction(n)&&n(t,e),s.trigger("loaded",t,e)},0)}),!0}return!1},e.loadPage=function(t,e){if(this.lastLoadApi&&!this.isLoading()){var i=l.extend({},this.lastLoadParams);i.p_no=parseInt(t)||1,this.load(null,i,e)}},e.hasMore=function(){return!!this._pageInfo&&(parseInt(this._pageInfo.page)||1)*(parseInt(this._pageInfo.size)||20)<(parseInt(this._pageInfo.total)||0)},e.isEmpty=function(){if(this.$el.is(".is-empty"))return!0;var t=this.getData();return!t||0==t.length},e._doAdapter=function(t){return r.doAdapter.call(this,t)},e._getItemContainer=function(){return this.$el},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderItems=function(t,e,i){r.renderItems.call(this,e,i)},e._renderOneItem=function(t,e,i,n){return r.renderOneItem.call(this,e,null,i,n)},e._isDisabled=function(t,e){if(t){this.options.hasOwnProperty("disableField")||(this.options.disableField=this.$el.attr("opt-disabled"));var i=this.options.disableField;if(i&&t.hasOwnProperty(i))return l.isTrue(t[i])}return!1},e._rerender=function(){var e=this,t=function(){var t=e._getItemContainer();t&&0<t.length&&e._renderItems($,t.empty(),e.getData())};t._name="ui."+this.getViewId(),l.debounce(t,0)},e._getItems=function(t){var e=this._getItemContainer();if(e&&0<e.length)return e.children(t)},e._getItemAt=function(n){return 0<=(n=l.getIndexValue(n))?l.find(this._getItems(),function(t,e){var i=parseInt(t.attr("opt-ind"));return isNaN(i)&&(i=e),n==i}):null},e._getItemData=function(t,e){var i=t.data("itemData");if(!i){var n=this.getData();l.isArray(n)&&((isNaN(e)||!e&&0!==e)&&(e=parseInt(t.attr("opt-ind")),isNaN(e)&&(e=t.index())),i=n[e])}return l.isEmpty(i)?null:i},e._initPager=function(){r.initPager.call(this)},e._checkIfEmpty=function(){r.checkIfEmpty.call(this)},e._getLoadText=function(){return this.options.loadingText},e._getLoadView=function(){return this.options.loadingView},e._getMoreText=function(){return this.options.moreText},e._getMoreView=function(){return this.options.moreView},e._getEmptyText=function(){return this.options.emptyText||this.options.empty},e._getEmptyView=function(){return this.options.emptyView};var o=function(){},c=o.prototype=new r;o.init=function(t,e){return r.init.call(this,t,e)},o.getSelectedIndex=function(t){var n=this.$el.attr("data-inds");if(l.isNull(n)){n=[];var s=this,r=this.$el.attr("data-ids");l.isNull(r)?l.each(this.getData(),function(t,e){s._isSelected(t,e,[],[])&&n.push(e)}):0<r.length&&(r=r.split(","),l.each(this.getData(),function(t,e){var i=s._getDataKey(t);0<=l.index(r,function(t){return t==i})&&n.push(e)}))}else n=a.getIntValues(n,0);return this.isMultiple()?0<n.length?n:null:t?0<n.length?[n[0]]:null:0<n.length?n[0]:-1},o.setSelectedIndex=function(t){var e=l.isFunction(this.length)?this.length()-1:null,i=a.getIntValues(t,0,e);return 1<i.length&&!this.isMultiple()&&(i=[i[0]]),this.$el.attr("data-inds",i.join(",")),this.$el.removeAttr("data-ids"),i},o.getSelectedKey=function(t){var i=this,n=this.$el.attr("data-ids"),e=this.$el.attr("data-inds");if(l.isNotNull(e)){if(n=[],0<(e=a.getIntValues(e,0)).length){var s=this.getData()||[];l.each(e,function(t){var e=t<s.length?s[t]:null;e&&n.push(i._getDataKey(e))})}}else l.isNull(n)?(n=[],l.each(this.getData(),function(t,e){i._isSelected(t,e,[],[])&&n.push(i._getDataKey(t))})):l.isArray(n)||(n=n.split(","));if(!n||0==n.length)return null;var r=[];return l.each(n,function(t){(t||0===t)&&r.push(isNaN(t)?t:parseInt(t))}),0==r.length?null:this.isMultiple()?r:t?[r[0]]:r[0]},o.setSelectedKey=function(n){l.isArray(n)||(n=l.isBlank(n)?[]:l.trimToEmpty(n).split(","));var s=[],r=this;l.each(this.getData(),function(t,e){var i=r._getDataKey(t);0<=l.index(n,function(t){return t==i})&&s.push(e)}),this.setSelectedIndex(s)},o.getSelectedData=function(t,e){var i=this.getSelectedIndex(!0),n=[];i||(n=this.getSelectedKey(!0)||[]);var s=this,r=[];return e=e||this.getData(),l.each(e,function(t,e){s._isSelected(t,e,i,n)&&r.push(t)}),0==r.length?null:this.isMultiple()?r:t?[r[0]]:r[0]},o.updateSelection=function(){var i=[],n=this;return l.each(this._getItems(),function(t,e){n._isItemSelected(t)&&i.push(e)}),o.setSelectedIndex.call(this,i),i},c.init=function(t,e){return o.init.call(this,t,e)},c.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},c.setMultiple=function(t){t=!(!l.isNull(t
)&&!l.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this._rerender())},c.getSelectedIndex=function(t){return o.getSelectedIndex.call(this,t)},c.setSelectedIndex=function(t){var e=this._snapshoot(),i=o.setSelectedIndex.call(this,t),n=this;return l.each(this._getItems(),function(t,e){n._setItemSelected(t,0<=i.indexOf(e))}),e.done(),i},c.getSelectedKey=function(t){return o.getSelectedKey.call(this,t)},c.setSelectedKey=function(t){return o.setSelectedKey.call(this,t)},c.getSelectedData=function(t){return o.getSelectedData.call(this,t)},c.isSelectedIndex=function(t){return!((t=l.getIndexValue(t))<0)&&this._isSelected(this.getDataAt(t),t)},c.isSelectedKey=function(e){if(l.isBlank(e))return!1;var t=this.getSelectedKey(!0);return 0<=l.index(t,function(t){return t==e})},c.isAllSelected=function(){var t=this.length();if(0<t){var e=this.getSelectedIndex(!0);return e&&e.length==t}return!1},c.addItem=function(t,e){var i=r.addItem.call(this,t,e);return i&&o.updateSelection.call(this),i},c.updateItem=function(t,e){return 0<=(e=r.updateItem.call(this,t,e))&&o.updateSelection.call(this),e},c.removeItemAt=function(t){var e=r.removeItem.call(this,null,t);return e&&o.updateSelection.call(this),e},c._isSelected=function(t,e,i,n){return s._select.isSelected.call(this,t,e,i,n)},c._isItemSelected=function(t){return t.is(".selected")},c._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},c._snapshoot_shoot=function(t,e,i){t.selectedIndex=e||this.getSelectedIndex(),t.selectedData=i||this.getSelectedData(),t.data=t.selectedData},c._snapshoot_compare=function(t,e){return e||(e=this.getSelectedIndex(!0)),a.equalIndex(t.selectedIndex,e)};var u=function(t,e){t.attr("id",l.trimToNull(e.id)||void 0),t.attr("name",l.trimToNull(e.name)||void 0);var i=e.clsname||e.className||e.clsName||e.cls;if(l.isNotBlank(i)&&t.addClass(i),l.isNotBlank(e.style)&&t.addClass(e.style),e.hasOwnProperty("disabled")&&this.setDisabled(l.isTrue(e.disabled)),!1===e.visible||"gone"===e.visible?t.css("display","none"):"hidden"===e.visible&&t.css("visibility","hidden"),t.attr("ref",l.trimToNull(e.ref)||void 0),!e.data){var n=t.attr("data-items");if(n)try{e.data=JSON.parse(unescape(n))}catch(t){}}this.$el.removeAttr("data-items")},h=function(){if(p.call(this)&&l.isFunction(this.load)){var t=this.options.api||this.$el.attr("api-name"),e=$.extend({},this.getInitParams()),i=l.isFunction(this.getPaginator)&&this.getPaginator();i&&(!e.p_no&&l.isFunction(i.getPage)&&(e.p_no=i.getPage()),!e.p_size&&l.isFunction(i.getSize)&&(e.p_size=i.getSize()));var n=this;this.load(t,e,function(){setTimeout(function(){f.call(n)},0)})}},p=function(){return n.isAutoLoad.call(this)},f=function(){var e=this,t=function(t){l.isFunction(e.setSelectedIndex)&&e.setSelectedIndex(t)},i=function(t){l.isFunction(e.setSelectedKey)&&e.setSelectedKey(t)};this.options.hasOwnProperty("selectedIndex")?t(this.options.selectedIndex):l.isNotBlank(this.$el.attr("data-tryindex"))?t(this.$el.attr("data-tryindex")):this.options.hasOwnProperty("selectedId")?i(this.options.selectedId):l.isNotBlank(this.$el.attr("data-tryid"))&&i(this.$el.attr("data-tryid")),delete this.options.selectedIndex,delete this.options.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")};d.base=n,d.item=r,d.select=o}}(),function(o){if(o||!VRender.Component.Render.button){var l=o?require(__vrender__).Utils:VRender.Utils,d=o?require("./_base"):VRender.Component.Render,c=function(t,e){d._base.call(this,t,e)},t=c.prototype=new d._base;c.innerStyles=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],c.sizes=["bigger","big","normal","small","tiny"],t.render=function(t,e){d._base.render.call(this,t,e),e.addClass("ui-btn");var i=this.options||{},n=i.size;n&&0<=c.sizes.indexOf(n)&&e.addClass(n);var s=i.style||"";c.innerStyles.indexOf(s)<0&&e.addClass(f(i.type)),l.isTrue(this.options.toggle)&&e.attr("opt-toggle","1"),i.link&&l.isNotBlank(i.link)&&e.attr("data-lnk",l.trimToNull(i.link));var r=t("<button class='btn'></button>").appendTo(e),a=p.call(this);l.isNotBlank(a)&&t("<i class='icon'></i>").appendTo(r).css(o?"background-image":"backgroundImage","url("+a+")");return l.isNotBlank(i.label)&&t("<span></span>").appendTo(r).text(l.trimToEmpty(i.label)||" "),u.call(this,t,e),h.call(this,t,e),this},t.getItems=function(){return l.toArray(this.options.items)};var u=function(t,e){var i=n.call(this);i&&e.attr("opt-wait",i),l.isTrue(this.options.waiting)&&e.addClass("waiting")},h=function(i,t){t.removeClass("has-items"),t.children(".dropdownbtn").remove(),t.children(".dropdown").remove();var e=this.getItems();if(e&&0<e.length){t.addClass("has-items"),t.append("<span class='dropdownbtn'>&nbsp;</span>");var n=i("<div class='dropdown'></div>").appendTo(t),s=i("<ul></ul>").appendTo(n);l.each(e,function(t){if(l.isNotBlank(t)){l.isPrimitive(t)&&(t={label:t});var e=i("<li></li>").appendTo(s);t.name&&e.attr("name",t.name),i("<span></span>").appendTo(e).text(l.trimToEmpty(t.label)||" ")}})}},n=function(){var t=0;return this.options.hasOwnProperty("waitTime")?t=this.options.waitTime:this.options.hasOwnProperty("wait")&&(t=this.options.wait),!0===t?-1:Math.max(0,parseInt(t))||0},p=function(){var t=this.options.icon;if(!0===t){var e=this.options.type;"success"==e?t="012b.png":"warn"==e?t="013b.png":"danger"==e?t="014b.png":"info"==e&&(t="015b.png"),!0!==t&&(t="/VRender/icons/"+t)}return"string"==typeof t?t:null},f=function(t){if(l.isNotBlank(t)){if(0<=["ok","submit","save","primary","major"].indexOf(t))return"ui-btn-primary";if(0<=["danger","error"].indexOf(t))return"ui-btn-danger";if(0<=["success","complete","finish"].indexOf(t))return"ui-btn-success";if(0<=["warn","warning"].indexOf(t))return"ui-btn-warn";if(0<=["info","highlight"].indexOf(t))return"ui-btn-info";if("text"===t)return"ui-btn-text";if("link"===t)return"ui-btn-link"}return"ui-btn-default"};o?module.exports=c:VRender.Component.Render.button=c}}("undefined"==typeof VRender),function(){if(!VRender.Component.Button){var n=VRender.Utils,i=VRender.Component,s=i.Render,e=s.button,r=window.UIButton=i.Button=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.isRenderAsApp()&&this.$el.on("tap",".dropdown",l.bind(this)),this.$el.on("tap",".btn",a.bind(this)),this.$el.on("tap",".dropdownbtn",o.bind(this)),void this.$el.on("tap",".dropdown li",d.bind(this))):r.create(t)},t=r.prototype=new i.base;r.find=function(t){return i.find(t,".ui-btn",r)},r.create=function(t){return i.create(t,r,e)},t.getLabel=function(){return this.options.label},t.setLabel=function(t){this.options.label=t;var e=this.$el.children(".btn");e.children("span").remove(),n.isNotBlank(t)&&$("<span></span>").appendTo(e).text(n.trimToEmpty(t)||" ")},t.waiting=function(t){t=n.isNull(t)||!0===t?parseInt(this.$el.attr("opt-wait"))||-1:Math.max(0,parseInt(t))||0,p.call(this,t)},t.isWaiting=function(){return this.$el.is(".waiting")},t.setWaiting=function(t){t=!0===t||n.isNull(t)?-1:Math.max(0,parseInt(t))||0,this.$el.attr("opt-wait",t)};var a=function(t){if(!this.$el.is(".disabled, .waiting")){var e=this.$el,i=e.attr("data-lnk");if(i)window.open(i,"_self");else{var n=1==e.attr("opt-toggle");if(e.is(".has-items")){if(!n)return void u.call(this)}else n&&(1==e.attr("active")?e.removeAttr("active"):e.attr("active","1"));this.trigger("tap",e.attr("name"));var s=parseInt(e.attr("opt-wait"));s&&p.call(this,s)}}},o=function(t){return this.$el.is(".disabled, .waiting")||u.call(this),!1},l=function(t){$(t.target).is(".dropdown")&&h.call(this)},d=function(t){var e=$(t.currentTarget),i=e.attr("name")||"";return 1==this.$el.attr("opt-toggle")&&(this.$el.attr("name",i),this.$el.children(".btn").find("span").text(e.text())),this.trigger("tap",e.attr("name")),h.call(this),!1},c=function(t){s.fn.mouseDebounce(t,h.bind(this))},u=function(){if(!this.$el.is(".show-dropdown")){var t=this.$el.addClass("show-dropdown");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",c.bind(this)),t.on("mouseleave",c.bind(this));var e=t.children(".dropdown"),i=s.fn.getDropdownHeight.call(this,e);n.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}setTimeout(function(){t.addClass("animate-in")},0)}},h=function(){if(this.$el.is(".show-dropdown")){var t=this.$el.addClass("animate-out");this.isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)}},p=function(t){if(this.t_wait&&(clearTimeout(this.t_wait),this.t_wait=0),t){var e=this.$el.addClass("waiting");if(0<t){var i=this;this.t_wait=setTimeout(function(){i.t_wait=0,e.removeClass("waiting")},t)}}else this.$el.removeClass("waiting")};i.register(".ui-btn",r)}}(),function(t){if(t||!VRender.Component.Render.textview){var u=t?require(__vrender__).Utils:VRender.Utils,d=t?require("./_base"):VRender.Component.Render,e=function(t,e){d._base.call(this,t,e)},i=e.prototype=new d._base;i.render=function(t,e){d._base.render.call(this,t,e),e.addClass("ui-textview");var i=t("<div class='ipt'></div>").appendTo(e),n=c.call(this,t,e,i),s=this.options||{},r=u.getFormatSize(s.width,this.isRenderAsRem());r&&e.attr("opt-fixed","1").css("width",r),u.isTrue(s.readonly)&&(e.attr("opt-readonly","1"),n.attr("readonly","readonly")),u.isTrue(s.required)&&e.attr("opt-required","1"),this.isDisplayAsPassword()&&e.attr("opt-pwd","1");var a=parseInt(s.maxSize)||0;if(0<a){e.addClass("show-size").attr("opt-size",a);var o=u.trimToEmpty(n.val()).length;t("<span class='size'></span>").appendTo(i).text(o+"/"+a)}u.isNotBlank(s.prompt)&&t("<span class='prompt'></span>").appendTo(i).text(s.prompt),u.isNotBlank(s.tips)&&t("<span class='tips'></span>").appendTo(i).html(s.tips);var l=s.description||s.desc;return u.isNotBlank(l)&&t("<div class='desc'></div>").appendTo(e).html(l),h.call(this,t,e),u.isTrue(s.autoHeight)&&this.isMultiline()&&p.call(this,t,e,n),this},i.getDecimals=function(){if(this.isDisplayAsPassword())return 0;var t=this.options||{};return"int"===(
t.dataType||t.type)?0:t.hasOwnProperty("decimals")?parseInt(t.decimals)||0:2},i.isDisplayAsPassword=function(){return u.isTrue(this.options.displayAsPwd)},i.isMultiline=function(){var t=this.options||{};return t.hasOwnProperty("multiple")?u.isTrue(t.multiple):u.isTrue(t.multi)};var c=function(t,e,i){var n=this.options||{},s=this.isMultiline(),r=s?"<textarea></textarea>":"<input type='text'/>";r=t(r).appendTo(i),s?e.addClass("multi"):i.append("<span class='clear'></span>");var a=n.value,o=n.dataType||n.type;if(u.isNotBlank(o)&&(/^(number|num|int)$/.test(o)&&(o="_number"),/^(email|password|tel|url|number)$/.test(o)&&r.attr("type",o),e.attr("opt-type",o),"_number"==o)){var l=this.getDecimals();e.attr("opt-decimal",l);var d=parseFloat(n.min),c=parseFloat(n.max);isNaN(d)||e.attr("opt-min",d),isNaN(c)||e.attr("opt-max",c),u.isNotBlank(a)&&(a=parseFloat(a),isNaN(a)?a="":(!isNaN(d)&&a<d&&(a=d),!isNaN(c)&&c<a&&(a=c),a=a.toFixed(l)))}return u.isNotBlank(a)&&(r.val(a),e.addClass("has-val")),r},h=function(t,e){u.isNotBlank(this.options.empty)&&e.attr("opt-empty",this.options.empty),u.isNotBlank(this.options.errmsg)&&e.attr("opt-errmsg",this.options.errmsg),d.fn.renderFunction(e,"validate",this.options.validate)},p=function(t,e,i){e.attr("opt-autoheight","1"),(e=e.children(".ipt")).append("<div class='preview'><pre></pre></div>"),e.find("pre").text(i.val());var n=this.options||{},s=this.isRenderAsRem(),r=u.getFormatSize(n.minHeight,s),a=u.getFormatSize(n.maxHeight,s);r&&i.css("minHeight",r),a&&i.css("maxHeight",a)};t?module.exports=e:VRender.Component.Render.textview=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.TextView){var p=VRender.Utils,i=VRender.Component,t=i.Render,e=t.textview,n=window.UITextView=i.TextView=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.inputTag=this.$el.children(".ipt"),this.input=this.inputTag.find("input, textarea"),this.input.on("focusin",o.bind(this)),this.input.on("focusout",l.bind(this)),this.input.on("keydown",r.bind(this)),this.input.on("keyup",a.bind(this)),this.$el.on("tap",".clear",u.bind(this)),this.isRenderAsApp()||(this.inputTag.on("mouseenter",d.bind(this)),this.inputTag.on("mouseleave",c.bind(this))),void h.call(this)):n.create(t)},s=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-textview",n)},n.create=function(t){return i.create(t,n,e)},s.val=function(t){return p.isNull(t)?this.getValue():(this.setValue(t),this)},s.focus=function(){return this.input.focus(),this},s.validate=function(t){var e=this.getValue();if(0==e.length)this.isRequired()?v.call(this,this.getEmptyMsg()||"输入框不能为空"):b.call(this),p.isFunction(t)&&t(this.lastErrorMsg);else{var i=this;f.call(this,e,function(){p.isFunction(t)&&t(i.lastErrorMsg)})}},s.getValue=function(){return this.input.val()||""},s.setValue=function(t){t=p.trimToEmpty(t),this.input.val(t),b.call(this),m.call(this,t)},s.getPrompt=function(){return this.inputTag.find(".prompt").text()},s.setPrompt=function(t){this.inputTag.find(".prompt").remove(),p.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(this.inputTag).text(t)},s.getTips=function(){return this.inputTag.find(".tips").text()},s.setTips=function(t){this.inputTag.find(".tips").remove(),p.isNotBlank(t)&&$("<span class='tips'></span>").appendTo(this.inputTag).html(t)},s.getDescription=function(){return this.$el.children(".desc").text()},s.setDescription=function(t){this.$el.children(".desc").remove(),p.isNotBlank(t)&&$("<div class='desc'></div>").appendTo(this.$el).html(t)},s.getDataType=function(){return this.$el.attr("opt-type")||"text"},s.setDataType=function(t){/^(number|num|int)$/.test(type)&&(type="_number"),this.$el.attr("opt-type",type),/^(email|password|tel|url|number)$/.test(type)?this.input.attr("type",type):this.input.removeAttr("type")},s.isReadonly=function(){return 1==this.$el.attr("opt-readonly")},s.setReadonly=function(t){p.isNull(t)||p.isTrue(t)?(this.$el.attr("opt-readonly","1"),this.input.attr("readonly","readonly")):(this.$el.removeAttr("opt-readonly"),this.input.removeAttr("readonly"))},s.isRequired=function(){return 1==this.$el.attr("opt-required")},s.setRequired=function(t){p.isNull(t)||p.isTrue(t)?this.$el.attr("opt-required","1"):this.$el.removeAttr("opt-required")},s.getEmptyMsg=function(){return this.$el.attr("opt-empty")},s.setEmptyMsg=function(t){p.isBlank(t)?this.$el.removeAttr("opt-empty"):this.$el.attr("opt-empty",t)},s.getErrorMsg=function(){return this.$el.attr("opt-errmsg")},s.setErrorMsg=function(t){p.isBlank(t)?this.$el.removeAttr("opt-errmsg"):this.$el.attr("opt-errmsg",t)},s.getMaxSize=function(){return this.hasOwnProperty("maxSize")||(this.maxSize=parseInt(this.$el.attr("opt-size"))||0),this.maxSize},s.setMaxSize=function(t){if(this.maxSize=parseInt(t)||0,this.$el.attr("opt-size",this.maxSize),0<this.maxSize){this.$el.addClass("show-size"),this.inputTag.find(".size").remove();var e=this.getValue()||"";$("<span class='size'></span>").appendTo(this.inputTag).text(e.length+"/"+this.maxSize)}else this.$el.removeClass("show-size"),this.inputTag.find(".size").remove()},s.getValidate=function(){return t.fn.getFunction.call(this,"_validate","validate")},s.setValidate=function(t){this.options._validate=t,this.$el.children(".ui-fn[name='validate']").remove()},s.hasError=function(){return this.$el.is(".is-error")},s.showError=function(t){!0===t&&(t=this.lastErrorMsg||this.$el.attr("opt-errmsg")||"内容不正确！"),t?v.call(this,t):b.call(this)},s.getDecimals=function(){return parseFloat(this.$el.attr("opt-decimal"))||0},s.setDecimals=function(t){t=isNaN(t)?2:parseInt(t)||0,this.$el.attr("opt-decimal",t)},s.isMultiline=function(){return this.$el.is(".multi")},s.isAutoHeight=function(){return 1==this.$el.attr("opt-autoheight")},s.isDisplayAsPassword=function(){return 1==this.$el.attr("opt-pwd")},s.setDisplayAsPassword=function(t){var e=window.getComputedStyle(this.input[0]);p.isNull(t)||p.isTrue(t)?(this.$el.attr("opt-pwd","1"),e.webkitTextSecurity||this.input.attr("type","password")):(this.$el.removeAttr("opt-pwd"),"password"==this.input.attr("type")&&this.input.attr("type","text"))};var r=function(t){if(b.call(this),p.isControlKey(t))return!0;var e=this.input.val()||"",i=this.getDataType();if("_number"==i||"number"==i||"num"==i){if(!y(t,e))return!1;if("."==t.key&&0==this.getDecimals())return!1}else if("tel"==i||"mobile"==i||"phone"==i){if(!/[0-9]|\-/.test(t.key))return!1;if("-"==t.key&&"mobile"==i)return!1}else if("text"==i){var n=this.getMaxSize();if(0<n&&e.length>=n)return!1}m.call(this,e+".")},a=function(t){var e=this.input.val()||"",i=e;if(13===t.which)0===i.length?this.isRequired()&&v.call(this,this.getEmptyMsg()||"输入框不能为空"):f.call(this,i),this.trigger("enter",i);else{var n=this.getDataType();"_number"==n||"number"==n||"num"==n?i=e.replace(/[^0-9\.\-]/g,""):"tel"!=n&&"mobile"!=n&&"phone"!=n||(i=e.replace(/[^0-9\-]/g,"")),i!=e&&this.input.val(i),m.call(this,i)}},o=function(t){var e=this;this.$el.addClass("focus");var i=this.input.val();this.t_focus=setInterval(function(){var t=e.input.val();t!=i&&(i=t,m.call(e,t),e.trigger("change",t))},100)},l=function(t){this.$el.removeClass("focus");var e=this.input.val()||"";if(0===e.length?this.isRequired()&&v.call(this,this.getEmptyMsg()||"输入框不能为空"):f.call(this,e),this.t_focus){var i=this.t_focus;this.t_focus=null,setTimeout(function(){clearInterval(i)},100)}},d=function(t){this.hasError()&&(this.t_hideerror&&(clearTimeout(this.t_hideerror),this.t_hideerror=null),this.$el.find(".errmsg").removeClass("animate-out"))},c=function(t){if(this.hasError()&&!this.t_hideerror){var e=this;this.t_hideerror=setTimeout(function(){e.t_hideerror=null,e.$el.find(".errmsg").addClass("animate-out")},3e3)}},u=function(t){this.val(""),this.trigger("change",""),this.trigger("clear");var e=this;setTimeout(function(){e.input.focus()},0)},h=function(){1==this.$el.attr("opt-pwd")&&this.setDisplayAsPassword(!0),this.isAutoHeight()&&g.call(this,this.getValue())},f=function(t,e){var i=this.getValidate(),n=this.getErrorMsg();if(p.isFunction(i)){var s=this,r=function(t){!0===t?v.call(s,n||"内容不正确！"):!1===t?b.call(s):t?v.call(s,t):b.call(s),p.isFunction(e)&&setTimeout(e,0)},a=i(this,t,r);p.isNotNull(a)&&r(a)}else{var o=this.getDataType();if("_number"==o||"number"==o||"num"==o)if(isNaN(t))v.call(this,n||"数据格式不正确");else{var l=parseFloat(t),d=parseFloat(this.$el.attr("opt-min"));!isNaN(d)&&l<d&&v.call(this,n||"数据不正确，请输入大于等于"+d+"的值");var c=parseFloat(this.$el.attr("opt-max"));!isNaN(c)&&c<l&&v.call(this,n||"数据不正确，请输入小于等于"+c+"的值");var u=this.getDecimals();0<u&&this.input.val(l.toFixed(u))}else if("tel"==o)p.isMobile(t)&&p.isPhone(t)||v.call(this,n||"手机或电话号码不正确");else if("text"==o){var h=this.getMaxSize();0<h&&h<t.length&&v.call(this,n||"输入内容太长，允许最大长度为："+h)}else"email"==o?p.isEmail(t)||v.call(this,n||"电子邮箱格式不正确，请重新输入"):"mobile"==o?p.isMobile(t)||v.call(this,n||"手机号码不正确，必须是1开头的11位数字"):"phone"==o?p.isPhone(t)||v.call(this,n||"电话号码不正确"):"url"==o&&(p.isUrl(t)||v.call(this,n||"url格式不正确"));p.isFunction(e)&&setTimeout(e,0)}},m=function(t){if(t&&0<t.length?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.$el.is(".show-size")){var e=this.getMaxSize();0<e&&this.inputTag.find(".size").text(t.length+"/"+e)}g.call(this,t)},g=function(t){if(this.isAutoHeight()){var e=this.inputTag.find(".preview pre");e&&0<e.length&&(t=(t||"").replace(/\n$/,"\n."),e.text(t));var i=this.input.get(0),n=p.toPx(this.isRenderAsRem()?"0.32rem":"32px"),s=function(){var t=e[0].scrollHeight;t=Math.max(t,n)+2,i.style.height=t+"px"};window.requestAnimationFrame?window.requestAnimationFrame(s):setTimeout(s,0)}},v=function(t){this.lastErrorMsg=t;var e=this.$el.find(".errmsg");if(e&&0!=e.length||((e=$("<div class='errmsg'></div>").appendTo(this.$el)).insertAfter(this.inputTag),this.isRenderAsApp()||e.css("top",this.inputTag.height()+8)),e.html(t),this.$el.addClass("is-error"),e.removeClass("animate-in").removeClass("animate-out"),setTimeout(function(){e.addClass("animate-in")},0),!this.isRenderAsApp()){this.t_hideerror&&clearTimeout(this.t_hideerror);var i=this;this.t_hideerror=setTimeout(function(){i.t_hideerror=null,e.addClass("animate-out")},3e3)}},b=function(){if(this.lastErrorMsg=null,this.hasError()){var t=this,e=this.$el.find(".errmsg").addClass(
"animate-out");setTimeout(function(){t.$el.removeClass("is-error"),e.removeClass("animate-in").removeClass("animate-out")},300)}},y=function(t,e){return!!/[0-9]/.test(t.key)||("-"==t.key?!/\-/.test(e)&&0==e.length:"."==t.key&&(!/\./.test(e)&&0<e.length))};i.register(".ui-textview",n)}}(),function(t){if(t||!VRender.Component.Render.checkbox){var s=t?require(__vrender__).Utils:VRender.Utils,r=t?require("./_base"):VRender.Component.Render,e=function(t,e){r._base.call(this,t,e)};(e.prototype=new r._base).render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-chkbox");var i=this.options||{},n=t("<input type='checkbox'/>").appendTo(e);return s.isNotNull(i.value)&&n.val(i.value),s.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),s.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",s.trimToNull(i.name)),this},t?module.exports=e:VRender.Component.Render.checkbox=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.Checkbox){var i=VRender.Utils,n=VRender.Component,e=n.Render.checkbox,s=window.UICheckbox=n.Checkbox=function(t,e){return n.base.isElement(t)?this.init(t,e)!==this?n.get(t):(this.input=this.$el.children("input"),void this.input.on("change",r.bind(this))):s.create(t)},t=s.prototype=new n.base;s.find=function(t){return n.find(t,".ui-chkbox",s)},s.create=function(t){return t=$.extend({},t,{tagName:"label"}),n.create(t,s,e)},t.val=function(t){return i.isNotNull(t)&&this.input.val(t),this.input.val()},t.isChecked=function(){return this.input.is(":checked")},t.setChecked=function(t){var e=!!i.isNull(t)||i.isTrue(t);this.input[0].checked=e,this.input.trigger("change")},t.getLabel=function(){return this.$el.children("span").text()},t.setLabel=function(t){this.$el.children("span").remove(),i.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var r=function(t){$(t.currentTarget).is(":checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")};n.register(".ui-chkbox",s)}}(),function(t){if(t||!VRender.Component.Render.radiobox){var s=t?require(__vrender__).Utils:VRender.Utils,r=t?require("./_base"):VRender.Component.Render,e=function(t,e){r._base.call(this,t,e)};(e.prototype=new r._base).render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-radbox");var i=this.options||{},n=t("<input type='radio'/>").appendTo(e);return s.isNotNull(i.value)&&n.val(i.value),s.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),s.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",s.trimToNull(i.name)),this},t?module.exports=e:VRender.Component.Render.radiobox=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.Radiobox){var i=VRender.Utils,n=VRender.Component,e=n.Render.radiobox,s=window.UIRadiobox=n.Radiobox=function(t,e){return n.base.isElement(t)?this.init(t,e)!==this?n.get(t):(this.input=this.$el.children("input"),this.input.on("change",r.bind(this)),void(this.input.is(":checked")&&this.input.trigger("change"))):s.create(t)},t=s.prototype=new n.base;s.find=function(t){return n.find(t,".ui-radbox",s)},s.create=function(t){return t=$.extend(t,{tagName:"label"}),n.create(t,s,e)},t.val=function(t){return i.isNotBlank(t)&&this.input.val(t),this.input.val()},t.isChecked=function(){return this.input.is(":checked")},t.setChecked=function(t){var e=!!i.isNull(t)||i.isTrue(t);this.isChecked()!=e&&(this.input[0].checked=e,this.input.trigger("change"))},t.getLabel=function(){return this.$el.children("span").text()},t.setLabel=function(t){this.$el.children("span").remove(),i.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var r=function(t){if(this.isChecked()){this.input.parent().addClass("checked");var e=this.input.attr("name");if(i.isNotBlank(e))$("input[name='"+e+"']").not(this.input).parent().removeClass("checked")}else this.$el.removeClass("checked");this.trigger("change")};n.register(".ui-radbox",s)}}(),function(t){if(t||!VRender.Component.Render.combobox){var l=t?require(__vrender__).Utils:VRender.Utils,o=t?require("./_base"):VRender.Component.Render,e=function(t,e){o._select.call(this,t,e)},i=e.prototype=new o._select;i.render=function(t,e){return e.addClass("ui-combobox"),this.isNative()&&e.attr("opt-native","1"),l.isTrue(this.options.matchRequired)&&e.attr("opt-match","1"),e.attr("opt-box",this.options.container),n.call(this,t,e),e.append("<div class='dropdown'><div class='box'></div></div>"),o._select.render.call(this,t,e),this},i.getSelectedData=function(t){return o._select.getSelectedData.call(this,t,u.call(this))},i.isNative=function(){return l.isTrue(this.options.native)},i._getItemContainer=function(t,e){return e.children(".dropdown").children(".box")},i._renderItems=function(t,e){var i=this._getItemContainer(t,e);s.call(this,t,e,i,this.getData())},i._renderEmptyView=function(t,e){},i._renderLoadView=function(t,e){},i._setItemSelected=function(t,e){e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected")},i._doAdapter=function(t){return c.call(this,t)};var n=function(t,e){var i=t("<div class='ipt'></div>").appendTo(e),n=t("<input type='text'/>").appendTo(i),s=this.getSelectedData(!0);if(s&&0<s.length){e.addClass("has-val");var r=this,a=l.map(s,function(t){return r._getDataLabel(t)});n.val(a.join(",")||"")}l.isTrue(this.options.editable)?e.addClass("editable"):n.attr("readonly","readonly"),i.append("<button class='dropdownbtn'></button>"),i.append("<span class='prompt'>"+l.trimToEmpty(this.options.prompt)+"</span>")},s=function(t,e,i,n){this._render_items=[],this.isRenderAsApp()&&this.isNative()?a.call(this,t,i,n):r.call(this,t,i,n);var s=this;setTimeout(function(){s._render_items=null},0)},r=function(n,i,t){if(t&&0!=t.length){var s=this,r=this._render_items||[],a=function(t,e){var i=n("<div class='item'></div>").appendTo(t);r.push({item:i,data:e,index:r.length}),d.call(s,n,i,e)},o=i.children(".grp").last();l.each(t,function(t,e){l.isArray(t)?(0<t.length&&(o=n("<div class='grp'></div>").appendTo(i),t.title&&n("<div class='title'></div>").appendTo(o).text(t.title),l.each(t,function(t,e){a(o,t)})),o=null):(o&&0!=o.length||(o=n("<div class='grp'></div>").appendTo(i)),a(o,t))})}},a=function(n,t,e){var i=t.children("select");if(i&&0!=i.length||(i=n("<select size='1'></select>").appendTo(t),this.isMultiple()?i.attr("multiple","multiple"):i.append("<option disabled='disabled' selected='selected'>请选择..</option>")),e&&0<e.length){var s=this,r=this._render_items||[],a=function(t,e){var i=n("<option class='item'></option>").appendTo(t);r.push({item:i,data:e,index:r.length}),i.text(s._getDataLabel(e))};l.each(e,function(t){l.isArray(t)?l.each(t,function(t){a(i,t)}):a(i,t)})}},d=function(t,e,i,n){o._item.renderOneItem.call(this,t,e,e,i,n)},c=function(t){if((t=l.toArray(t))._vr_adapter_flag)return t;var n=this,s=0,r=[],a=null;return l.each(t,function(t,e){if(l.isArray(t)){if(0<t.length){var i=l.map(t,function(t){return o.fn.doAdapter.call(n,t,s++)});t.title&&(i.title=t.title),r.push(i)}a=null}else a||(a=[],r.push(a)),t=o.fn.doAdapter.call(n,t,s++),a.push(t)}),r._vr_adapter_flag=!0,r},u=function(){var e=[];return l.each(this.getData(!0),function(t){l.isArray(t)?l.each(t,function(t){e.push(t)}):e.push(t)}),e};t?module.exports=e:(e.doAdapter=c,e.getDataFlat=u,e.renderItems=s,VRender.Component.Render.combobox=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Combobox){var u=VRender.Utils,c=VRender.Component,h=c.Render,n=h.combobox,s=window.UICombobox=c.Combobox=function(t,e){if(!c.base.isElement(t))return s.create(t);if(this.init(t,e)!==this)return c.get(t);var i=this.$el;this.isRenderAsApp()&&this.isNative()?i.find("select").on("change",v.bind(this)):(this.isRenderAsApp()&&i.on("tap",".dropdown",g.bind(this)),i.on("tap",".ipt",r.bind(this)),i.on("tap",".item",a.bind(this)),i.on("tap",".ui-more",o.bind(this))),i.is(".editable")&&(i.on("keydown","input",l.bind(this)),i.on("keyup","input",d.bind(this)),i.on("focusin","input",p.bind(this)),i.on("focusout","input",f.bind(this)))},t=s.prototype=new c.select;s.find=function(t){return c.find(t,".ui-combobox",s)},s.create=function(t){return c.create(t,s,n)},t.getData=function(t){return t?(this.options.data=this._doAdapter(this.options.data),this.options.data):n.getDataFlat.call(this)},t.setDataSilent=function(t){this.options.data=t,this._rerenderSilent()},t.setSelectedIndex=function(t){var e=this._snapshoot(),i=c.select.setSelectedIndex.call(this,t);u.each(this._getItems(),function(t,e){_(t,0<=i.indexOf(e))}),i&&0!=i.length||this.$el.find("select").val(""),b.call(this),e.done()},t.getPrompt=function(){return this.$el.children(".ipt").find(".prompt").text()},t.setPrompt=function(t){var e=this.$el.children(".ipt");e.find(".prompt").remove(),u.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(e).text(t)},t.addItem=function(s,r){r=u.getIndexValue(r),s=h.fn.doAdapter.call(this,s,r)||{};var t=this.getData(!0),a=!1;0<=r&&x.call(this,t,function(t,e,i,n){if(r==e)return i.splice(n,0,s),!(a=!0)}),a||(0<t.length?t[t.length-1].push(s):t.push([s]));var e=this._getNewItem($,this._getItemContainer());return this._renderOneItem($,e,s,r),a&&0<=r&&(this._getItems().eq(r).before(e),c.select.updateSelection.call(this)),e},t.updateItem=function(a,o){if(a=h.fn.doAdapter.call(this,a,o),0<=(o=o||0===o?u.getIndexValue(o):this.getDataIndex(a))){var l=this,t=this.getData(!0),d=null;x.call(this,t,function(t,e,i,n){if(o==e){i.splice(n,1,a);var s=l._getNewItem($,l._getItemContainer());l._renderOneItem($,s,a,o);var r=l._getItems();return(d=r.eq(o).before(s).remove()).is(".selected")&&_(s,!0),!1}}),c.select.updateSelection.call(this),d&&d.is(".selected")&&b.call(this)}return o},t.removeItemAt=function(s){if(0<=(s=u.getIndexValue(s))){var t=this._getItems().eq(s);if(t&&0<t.length){var e=t.parent();t.remove(),0==e.children().length&&e.remove()}var r=this.getData(!0),a=null;return x.call(this,r,function(t,e,i,n){if(s==e)return a=i.splice(n,1),0==i.length&&u.remove(r,function(t){return t==i}),!1}),c.select.updateSelection.call(this),t.is(".selected")&&b.call(this),a}return null},t.val=function(t){if(u.isNull(t)){var e=this.getSelectedIndex(!0);return e&&0<e?this.getSelectedKey():this.isEditable()?this.$el.find(".ipt > input").val(
):null}var i=this._snapshoot(),n=y.call(this,t);return n?this.setSelectedIndex(n[0]):(this.setSelectedIndex(-1),this.isMatchRequired()||(this.$el.find(".ipt > input").val(t),w.call(this,u.isNotBlank(t)))),i.done(),this},t.isNative=function(){return 1==this.$el.attr("opt-native")},t.isEditable=function(){return this.$el.is(".editable")},t.isMatchRequired=function(){return 1==this.$el.attr("opt-match")},t._getItemContainer=function(){return this.$el.children(".dropdown").children(".box")},t._renderItems=function(t,e,i){i=i||this.getData(!0);n.renderItems.call(this,t,this.$el,e,i)},t._renderOneItem=function(t,e,i,n){this.isRenderAsApp()&&this.isNative()?e.text(this._getDataLabel(i,n)):c.item.renderOneItem.call(this,e,null,i,n)},t._getNewItem=function(t,e,i,n){if(this.isRenderAsApp()&&this.isNative()){var s=e.children("select");return t("<option class='item'></option>").appendTo(s)}var r=e.children(".grp").last();return r&&0!=r.length||(r=t("<div class='grp'></div>").appendTo(e)),t("<div class='item'></div>").appendTo(r)},t._getItems=function(t){var e=this._getItemContainer().find(".item");return t&&(e=e.filter(t)),e},t._isItemSelected=function(t){return t.is(".selected")||t.is(":selected")},t._setItemSelected=function(t,e){_.call(this,t,e)},t._loadBefore=function(){if(!this.isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load, .ui-more").remove(),this.isRenderAsApp()&&this.isNative()){var e=this._getLoadText();if(e=u.isNull(e)?"正在加载..":u.trimToEmpty(e)){var i=t.children("select");$("<option class='ui-load'></option>").appendTo(i).text(e)}}else h._item.renderLoadView.call(this,$,t)}},t._loadAfter=function(){if(!this.isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load").remove(),this.hasMore())if(this.$el.addClass("has-more"),this.isRenderAsApp()&&this.isNative()){var e=this._getMoreText();if(e=u.isNull(e)?"加载更多":u.trimToEmpty(e)){var i=t.children(".select");$("<option class='ui-more'></option>").appendTo(i).text(e)}}else h._item.renderMoreView.call(this,$,t);else this.$el.removeClass("has-more")}},t._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(),t.value=this.$el.find(".ipt > input").val()||"",t.data=this.getSelectedData()},t._snapshoot_compare=function(t){var e=this.$el.find(".ipt > input").val()||"";if(t.value!=e)return!1;var i=this.getSelectedIndex();return h.fn.equalIndex(i,t.selectedIndex)},t._doAdapter=function(t){return n.doAdapter.call(this,t)},t._rerender=function(){var s=this,t=function(){var t=s.$el.find(".ipt > input"),e=t.val()||"",i=s.getSelectedIndex(),n=s._getItemContainer();n&&0<n.length&&s._renderItems($,n.empty(),s.getData()),s.setSelectedIndex(i),s.isEditable()&&s.getSelectedIndex()<0&&(t.val(e||""),w.call(s,u.isNotBlank(e)))};t._name="ui.combobox."+this.getViewId(),u.debounce(t,0)},t._rerenderSilent=function(){var n=this,t=function(){var t=n.getSelectedIndex(),e=n._getItemContainer();if(e&&0<e.length&&n._renderItems($,e.empty(),n.getData()),0<=t){var i=n._getItems().eq(t);i&&0<i.length&&_.call(n,i,!0)}};t._name="ui.combobox."+this.getViewId(),u.debounce(t,0)};var r=function(t){var e=$(t.target);if(this.isRenderAsApp()){if(this.isEditable()&&!e.is(".dropdownbtn"))return}else this.isEditable()&&e.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();i.call(this)},a=function(t){var e=$(t.currentTarget);if(e.is(".selected")&&!this.isMultiple())return!1;var i=this._snapshoot();return e.is(".selected")?_(e,!1):(this.isMultiple()||_(this._getItems(".selected"),!1),_(e,!0)),c.select.updateSelection.call(this),b.call(this),i.done(),this.isMultiple()||C.call(this),!1},o=function(t){this.more()},l=function(t){if(!this.isRenderAsApp()&&(i.call(this),this.$el.off("mouseenter").off("mouseleave"),38==t.which||40==t.which)){if(this.isMultiple())return;var e=this.getSelectedIndex();38==t.which?0<e&&(e-=1):40==t.which&&e<this.length()-1&&(e+=1),this.setSelectedIndex(e)}},d=function(t){var e=$(t.currentTarget);if(13==t.which){C.call(this);var i=this._snapshoot(),n=c.select.updateSelection.call(this);n&&0<n.length?b.call(this):this.isMatchRequired()&&e.val(""),e.select(),i.done()}else if(!u.isControlKey(t)||8==t.which){var s=e.val();w.call(this,s&&0<s.length);var r=y.call(this,s,!0),a=_(this._getItems(),!1);this.$el.find("select").val(""),r&&0<=r[0]&&_(a.eq(r[0]),!0)}},p=function(t){this.t_focus&&(clearTimeout(this.t_focus),this.t_focus=0)},f=function(t){var n=$(t.currentTarget),s=this;this.t_focus=setTimeout(function(){if(s.t_focus=0,T.call(s)){var t=n.val(),e=y.call(s,t,!1);if(e&&0<=e[0])s.setSelectedIndex(e[0]);else if(s.isMatchRequired())e=y.call(s,t,!0),s.setSelectedIndex(e?e[0]:-1);else{var i=s._snapshoot();s.setSelectedIndex(-1),n.val(t),w.call(s,t&&0<t.length),i.done()}C.call(s)}},200)},m=function(t){h.fn.mouseDebounce(t,C.bind(this))},g=function(t){$(t.target).is(".dropdown")&&C.call(this)},v=function(t){var e=this._snapshoot();this._getItems().removeClass("selected"),c.select.updateSelection.call(this),b.call(this),e.done()},b=function(){var e=this,t=this.getSelectedData(!0),i=u.map(t,function(t){return e._getDataLabel(t)});this.$el.find(".ipt > input").val(i.join(",")||""),w.call(this,t&&0<t.length)},y=function(a,o,l){if(u.isBlank(a))return null;var d=this,c=null;return x.call(this,this.getData(!0),function(t,e,i,n){var s=d._getDataLabel(t)||"";if(a==s)return!(c=[e,t]);if(o&&a.length<s.length){var r=s.indexOf(a);if(0==r||0<r&&!l)return!(c=[e,t])}}),c},_=function(t,e){return e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected"),t},w=function(t){t?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},T=function(){return this.$el.is(".show-dropdown")},i=function(){if(!T.call(this)){var t=this.$el.addClass("show-dropdown");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",m.bind(this)),t.on("mouseleave",m.bind(this));var e=t.children(".dropdown"),i=h.fn.getDropdownHeight.call(this,e);u.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}var n=this;setTimeout(function(){n.t_focus&&(clearTimeout(n.t_focus),n.t_focus=0)},100),setTimeout(function(){t.addClass("animate-in")},0)}},C=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},x=function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];if(u.isArray(s)&&0<s.length)for(var r=0;r<s.length;r++){if(!1===e(s[r],i,s,r))return;i+=1}else{if(!1===e(s,i,t,n))return;i+=1}}};c.register(".ui-combobox",s)}}(),function(i){if(i||!VRender.Component.Render.datepicker){var f=i?require(__vrender__).Utils:VRender.Utils,a=i?require("./_base"):VRender.Component.Render,n=i?require("../../../ui/component/UIButton"):VRender.Component.Button,I=["一","二","三","四","五","六","七","八","九","十","十一","十二"],m=["周日","周一","周二","周三","周四","周五","周六"],t=function(t,e){a._base.call(this,t,e)},e=t.prototype=new a._base;e.render=function(t,e){a._base.render.call(this,t,e),e.addClass("ui-datepicker");var i=this.options||{},n=f.toDate(i.min);n&&e.attr("opt-min",f.toDateString(n,"yyyy-MM-dd"));var s=f.toDate(i.max);s&&e.attr("opt-max",f.toDateString(s,"yyyy-MM-dd"));var r=y.call(this,n,s);return this.isRangeDate()?(e.addClass("is-range"),r&&(e.attr("data-start",f.toDateString(r[0],"yyyy-MM-dd")),e.attr("data-end",f.toDateString(r[1],"yyyy-MM-dd")))):r&&e.attr("data-dt",f.toDateString(r,"yyyy-MM-dd")),o.call(this,t,e),l.call(this,t,e),d.call(this,t,e),c.call(this,t,e,r),this},e.getMinDate=function(){return f.toDate(this.options.min)},e.getMaxDate=function(){return f.toDate(this.options.max)},e.isRangeDate=function(){return f.isTrue(this.options.range)};var o=function(e,t){var i=e("<header></header>").appendTo(t),n=e("<div class='title'></div>").appendTo(i),s=function(){var t=e("<dl class='item'></dl>").appendTo(n);return t.append("<dt class='lbl'>-</dt><dd class='val'>-</dd>"),t.append("<button class='prev y'>&nbsp;</button>"),t.append("<button class='prev m'>&nbsp;</button>"),t.append("<button class='next m'>&nbsp;</button>"),t.append("<button class='next y'>&nbsp;</button>"),t};this.isRangeDate()?(s().addClass("s").children(".lbl").html("开始日期<span class='y'></span>"),s().addClass("e").children(".lbl").html("结束日期<span class='y'></span>")):s(),this.isRenderAsApp()&&(i.append("<button class='today'><label>今天</label></button>"),i.append("<button class='clear'><label>清除</label></button>"))},l=function(t,e){var i=t("<section></section>").appendTo(e);this.isRangeDate()&&!this.isRenderAsApp()?(p(t,i).addClass("s"),p(t,i).addClass("e")):p(t,i).addClass("t0")},d=function(t,e){if(this.isRangeDate()){var i=t("<footer></footer>").appendTo(e);if(this.isRenderAsApp())v.call(this,i,{label:"使用日期",type:"primary",cls:"okbtn"});else{i.append("<div class='vals'><span class='s'>-</span> - <span class='e'>-</span></div>");var n=t("<div class='btns'></div>").appendTo(i);v.call(this,n,{label:"确定",type:"primary",cls:"okbtn"}),v.call(this,n,{label:"取消",type:"cancel",cls:"cancelbtn"})}}},c=function(t,e,i,n){i=f.toArray(i),(n=f.toArray(n))[0]instanceof Date||(n=[],this.isRangeDate()&&!this.isRenderAsApp()?(n.push(i[0]||new Date),n.push(i[1])):n.push(i[0]||new Date)),s.call(this,t,e,n,i),r.call(this,t,e,n,i),u.call(this,t,e,n,i),this.isRangeDate()&&!this.isRenderAsApp()||(b(n[0],new Date)?e.attr("cur-month","1"):e.removeAttr("cur-month"))},s=function(t,e,i,n){var s=e.children("header");if(this.isRangeDate()){var r,a,o="--",l="--",d=" ",c=" ";if(this.isRenderAsApp()){if(n&&0<n.length){r=n[0],a=n[1];var u=(new Date).getFullYear();r&&(r.getFullYear()!=u&&(d=r.getFullYear()),o=f.toDateString(r,"M月d日")+" "+m[r.getDay()]),a&&(a.getFullYear()!=u&&(c=a.getFullYear()),c=a.getFullYear()==u?" ":a.getFullYear(),l=f.toDateString(a,"M月d日")+" "+m[a.getDay()])}s.find(".item.s .y").text(d),s.find(".item.e .y").text(c)}else r=i&&i[0]||new Date,a=i&&i[1]||r,b(r,a)&&(a=new Date(a.getTime())).setMonth(a.getMonth()+1),o=r.getFullYear()+"年 "+I[r.getMonth()]+"月",l=a.getFullYear()+"年 "+I[a.getMonth()]+"月",g(t,e,r,a);s.find(".item.s .val").text(o),s.find(".item.e .val"
).text(l)}else{var h=i&&i[0]||new Date,p=h.getFullYear()+"年 "+I[h.getMonth()]+"月";s.find(".item .lbl").text(p),h=n&&n[0],s.find(".item .val").text(h?f.toDateString(h,"yyyy.MM.dd"):"-")}},r=function(t,e,i,n){if(this.isRangeDate()&&!this.isRenderAsApp()){var s=i&&i[0]||new Date,r=i&&i[1]||s;b(s,r)&&(r=new Date(r.getTime())).setMonth(r.getMonth()+1),h.call(this,t,e,e.find(".table.s"),s,n),h.call(this,t,e,e.find(".table.e"),r,n)}else{var a=i&&i[0]||new Date;h.call(this,t,e,e.find(".table.t0"),a,n)}},u=function(t,e,i,n){if(this.isRangeDate()&&!this.isRenderAsApp()){var s=" ",r=" ";n&&0<n.length&&(n[0]&&(s=f.toDateString(n[0],"yyyy.MM.dd")),n[1]&&(r=f.toDateString(n[1],"yyyy.MM.dd")));var a=e.find("footer .vals");a.children(".s").text(s),a.children(".e").text(r)}},h=function(t,e,i,n,s){var r=n.getFullYear(),a=n.getMonth();i.attr("data-y",r).attr("data-m",a);var o=new Date,l=D(o),d=s&&s[0],c=s&&s[1],u=D(d),h=D(c)||u,p=D(this.getMinDate()),f=D(this.getMaxDate())||21001231,m=new Date(r,a,1),g=m.getDay();m.setDate(g?2-g:-5);var v=(o.getFullYear()==r?"":r+"年 ")+I[a]+"月";i.find(".month").text(v);for(var b=i.find("table.body tbody").empty();;){for(var y=t("<tr></tr>").appendTo(b),_=0;_<7;_++){var w=m.getFullYear(),T=m.getMonth(),$=m.getDate(),C=1e4*w+100*T+$,x=t("<td></td>").appendTo(y);x.append("<span>"+$+"</span>"),x.attr("data-dt",w+"-"+(T+1)+"-"+$),C==l&&x.addClass("today"),T!=a&&x.addClass("over"),(T!=a||C<p||f<C)&&x.addClass("disabled"),u<=C&&C<=h&&(x.addClass("selected"),C==u&&x.addClass("start"),C==h&&x.addClass("end")),m.setDate($+1)}if(m.getMonth()>a||m.getFullYear()>r)break}},g=function(t,e,i,n){var s=(e=e.children("header")).find(".item.s .next.y, .item.e .prev.y"),r=e.find(".item.s .next.m, .item.e .prev.m"),a=i.getFullYear(),o=i.getMonth(),l=n.getFullYear(),d=n.getMonth();100*(l-1)+d<=100*a+o?s.addClass("disabled"):s.removeClass("disabled"),l<a||a==l&&d-1<=o?r.addClass("disabled"):r.removeClass("disabled")},p=function(t,e){var i;return e=t("<div class='table'></div>").appendTo(e),(i=t("<table class='head'></table>").appendTo(e)).append("<thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>"),(i=t("<table class='body'></table>").appendTo(e)).append("<thead><tr><th colspan='7'><div class='month'>-</div></th></tr></thead>"),i.append("<tbody></tbody>"),e},v=function(t,e){i?new n(this.context,e).render(t):n.create(f.extend({},e,{target:t}))},b=function(t,e){return!(!t||!e)&&(t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear())},y=function(t,e){var i=D(t),n=D(e);if(i&&n&&n<i)return null;if(this.isRangeDate()){var s=f.toDate(this.options.start);if(s){s=new Date(s.getTime());var r=f.toDate(this.options.end)||new Date(s.getTime());r=new Date(r?r.getTime():s.getTime());var a=D(s),o=D(r);if(a<=o&&(i&&a<i&&(s=t),n&&n<o&&(r=e),D(s)<=D(r)))return[s,r]}}else{var l=f.toDate(this.options.date);if(l){l=new Date(l.getTime());var d=D(l);return i&&d<i||n&&n<d?null:l}}return null},D=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};i?module.exports=t:(t.createTable=p,t.renderDate=c,t.renderPickerDate=h,VRender.Component.Render.datepicker=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.DatePicker){var h=VRender.Utils,n=VRender.Component,u=n.Render.datepicker,s=window.UIDatePicker=n.DatePicker=function(t,e){if(!n.base.isElement(t))return s.create(t);if(this.init(t,e)!==this)return n.get(t);if(this.$el.on("tap","header .title button",r.bind(this)),this.$el.on("tap","section td",a.bind(this)),this.$el.on("tap","footer .okbtn",o.bind(this)),this.$el.on("tap","footer .cancelbtn",l.bind(this)),this.isRenderAsApp()){this.$el.on("tap",function(t){return!1}),this.$el.on("tap","header .today",d.bind(this)),this.$el.on("tap","header .clear",c.bind(this));var i=this.$el.children("section");i.on("touchstart",p.bind(this)),i.on("touchmove",p.bind(this)),i.on("touchend",p.bind(this))}},t=s.prototype=new n.base;s.find=function(t){return n.find(t,".ui-datepicker",s)},s.create=function(t){return n.create(t,s,u)},t.getDate=function(t){if(!this.isRangeDate()){var e=h.toDate(this.$el.attr("data-dt"));return e&&h.isNotBlank(t)?h.toDateString(e,t):e}var i=h.toDate(this.$el.attr("data-start"));if(i){var n=h.toDate(this.$el.attr("data-end"))||new Date(i.getTime());return n=h.toDate(h.toDateString(n,"yyyy-MM-dd 23:59:59")),h.isNotBlank(t)&&(i=h.toDateString(i,t),n=h.toDateString(n,t)),[i,n]}return null},t.setDate=function(t){var e=this._snapshoot(),i=this.getMinDate(),n=this.getMaxDate(),s=v(i),r=v(n);if(this.isRangeDate()){var a=h.toDate(t),o=null;if(a){o=h.toDate(arguments[1])||new Date(a.getTime());var l=v(a),d=v(o);s&&l<s&&(a=i),r&&r<d&&(o=n),v(a)<=v(o)?(a=h.toDateString(a,"yyyy-MM-dd"),o=h.toDateString(o,"yyyy-MM-dd")):a=o=null}this.$el.attr("data-start",a||""),this.$el.attr("data-end",o||"")}else{var c=h.toDate(t);if(c){var u=v(c);(s&&u<s||r&&r<u)&&(c=null)}this.$el.attr("data-dt",c?h.toDateString(c,"yyyy-MM-dd"):"")}e.compare()||f.call(this,this.getDate()),e.done()},t.getMinDate=function(){return h.toDate(this.$el.attr("opt-min"))},t.setMinDate=function(t){var e=h.toDate(t);if(v(e)!=v(this.getMinDate())){var i=this._snapshoot();if(this.$el.attr("opt-min",e?h.toDateString(e,"yyyy-MM-dd"):""),e){var n=v(e);if(this.isRangeDate()){var s=h.toDate(this.$el.attr("data-end"));if(s&&n>v(s))this.$el.attr("data-start","").attr("data-end","");else{var r=h.toDate(this.$el.attr("data-start"));r&&n>v(r)&&this.$el.attr("data-start",this.$el.attr("opt-min"))}}else{var a=h.toDate(this.$el.attr("data-dt"));a&&n>v(a)&&this.$el.attr("data-dt","")}}f.call(this),i.done()}},t.getMaxDate=function(){return h.toDate(this.$el.attr("opt-max"))},t.setMaxDate=function(t){var e=h.toDate(t);if(v(e)!=v(this.getMaxDate())){var i=this._snapshoot();if(this.$el.attr("opt-max",e?h.toDateString(e,"yyyy-MM-dd"):""),e){var n=v(e);if(this.isRangeDate()){var s=h.toDate(this.$el.attr("data-start"));if(s&&n<v(s))this.$el.attr("data-start","").attr("data-end","");else{var r=h.toDate(this.$el.attr("data-end"));r&&n<v(r)&&this.$el.attr("data-end",this.$el.attr("opt-max"))}}else{var a=h.toDate(this.$el.attr("data-dt"));a&&n<v(a)&&this.$el.attr("data-dt","")}}f.call(this),i.done()}},t.isRangeDate=function(){return this.$el.is(".is-range")},t.submit=function(){o.call(this)},t.cancel=function(){l.call(this)},t._snapshoot_shoot=function(t,e){t.selectedDate=e||this.getDate(),t.pickerDate=g.call(this),t.data=t.selectedDate},t._snapshoot_compare=function(t,e){var i=e||this.getDate();return i&&t.selectedDate?this.isRangeDate()?v(i[0])==v(t.selectedDate[0])&&v(i[1])==v(t.selectedDate[1]):v(i)==v(t.selectedDate):!(i||t.selectedDate)};var r=function(t){var e=$(t.currentTarget),i=null;if(this.isRangeDate()&&!this.isRenderAsApp()){var n=e.parent();n.is(".s")?i=this.$el.find(".table.s"):n.is(".e")&&(i=this.$el.find(".table.e"))}else i=this.$el.find(".table.t0");var s=parseInt(i.attr("data-y")),r=parseInt(i.attr("data-m")),a=new Date(s,r,1);e.is(".y")?a.setFullYear(s+(e.is(".prev")?-1:1)):a.setMonth(r+(e.is(".prev")?-1:1)),i.attr("data-y",a.getFullYear()).attr("data-m",a.getMonth()),f.call(this)},a=function(t){var e=$(t.currentTarget);if(!e.is(".disabled"))if(this.isRangeDate()){if(this.selectedSnapshoot||(this.selectedSnapshoot=this._snapshoot()),this.lastSelectedDate&&1==this.lastSelectedDate.length){var i=h.toDate(e.attr("data-dt"));i.getTime()>=this.lastSelectedDate[0].getTime()?this.lastSelectedDate.push(i):this.lastSelectedDate.unshift(i)}else this.lastSelectedDate=[],this.lastSelectedDate.push(h.toDate(e.attr("data-dt")));f.call(this)}else{var n=this._snapshoot();this.$el.find("td.selected").removeClass("selected"),e.addClass("selected"),this.$el.attr("data-dt",e.attr("data-dt"));var s=h.toDate(e.attr("data-dt"));this.$el.find(".title .item .val").text(h.toDateString(s,"yyyy.MM.dd")),n.done()}},o=function(){if(this.isRangeDate()){if(this.lastSelectedDate&&0<this.lastSelectedDate.length){var t=this.lastSelectedDate[0],e=this.lastSelectedDate[1]||t;this.$el.attr("data-start",h.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",h.toDateString(e,"yyyy-MM-dd")),this.lastSelectedDate=null}m.call(this,!0)}this.trigger("submit",this.getDate())},l=function(){if(this.isRangeDate())if(this.lastSelectedDate=null,this.selectedSnapshoot){var t=this.selectedSnapshoot.getState();m.call(this);var e=t.selectedDate,i=e&&e[0],n=e&&e[1];this.$el.attr("data-start",i?h.toDateString(i,"yyyy-MM-dd"):""),this.$el.attr("data-end",n?h.toDateString(n,"yyyy-MM-dd"):""),f.call(this,t.pickerDate)}else f.call(this);this.trigger("cancel",this.getDate())},d=function(){f.call(this,[new Date])},c=function(){var t=this._snapshoot();this.isRangeDate()?(m.call(this),this.$el.attr("data-start","").attr("data-end","")):this.$el.attr("data-dt",""),f.call(this),t.done(),this.trigger("clear")},p=function(t){var e=t.touches&&t.touches[0];if("touchstart"==t.type)this.touchData={startX:e.pageX,startY:e.pageY},this.touchData.tableContainer=this.$el.find(".table.t0"),this.touchData.mainTable=this.touchData.tableContainer.children("table.body");else if("touchmove"==t.type){if(1<t.touches.length)return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&(Math.abs(i)<10||15<Math.abs(e.pageY-this.touchData.startY)))return;this.touchData.moving=!0,this.touchData.lastOffset=i,this.touchData.mainTable.css("transform","translate("+i+"px,0px)");var n=0<i?this.touchData.prevTable:this.touchData.nextTable;if(!n){var s=parseInt(this.touchData.tableContainer.attr("data-y")),r=parseInt(this.touchData.tableContainer.attr("data-m"));n=u.createTable($,this.$el.children("section")).addClass("t1"),0<i?(r-=1,this.touchData.prevTable=n):(r+=1,this.touchData.nextTable=n);var a=new Date(s,r,1),o=this.lastSelectedDate||this.getDate();u.renderPickerDate.call(this,$,this.$el,n,a,o)}this.touchData.contentWidth||(this.touchData.contentWidth=this.$el.children("section").width()),i+=this.touchData.contentWidth*(0<i?-1:1),n.css("transform","translate("+i+"px,0px)")}else if("touchend"==t.type&&this.touchData.moving){i=0;20<Math.abs(this.touchData.lastOffset)&&(i+=this.touchData.contentWidth*(0<this.touchData.lastOffset?1:-1));var l="transform 200ms";this.touchData.mainTable.css("transition",l),
this.touchData.mainTable.css("transform","translate("+i+"px,0px)"),0<this.touchData.lastOffset?(this.touchData.prevTable.css("transition",l),this.touchData.prevTable.css("transform","translate(0px,0px)")):(this.touchData.nextTable.css("transition",l),this.touchData.nextTable.css("transform","translate(0px,0px)"));var d=this.touchData;if(20<Math.abs(d.lastOffset)){var c=0<d.lastOffset?".prev.m":".next.m";this.$el.children("header").find(c).eq(0).tap()}setTimeout(function(){d.prevTable&&d.prevTable.remove(),d.nextTable&&d.nextTable.remove(),d.mainTable.css("transition",""),d.mainTable.css("transform","")},200)}},f=function(e){var i=this,t=function(){var t=i.lastSelectedDate||i.getDate();e=e||g.call(i),u.renderDate.call(i,$,i.$el,t,e)};t._name="ui.datepicker."+this.getViewId(),h.debounce(t,0)},m=function(t){this.lastSelectedDate=null,this.selectedSnapshoot&&(t?this.selectedSnapshoot.done():this.selectedSnapshoot.release(),this.selectedSnapshoot=null)},g=function(){var t=[];if(this.isRangeDate()&&!this.isRenderAsApp()){var e=this.$el.find(".table.s");t.push(new Date(parseInt(e.attr("data-y")),parseInt(e.attr("data-m")),1));var i=this.$el.find(".table.e");t.push(new Date(parseInt(i.attr("data-y")),parseInt(i.attr("data-m")),1))}else{var n=this.$el.find(".table.t0");t.push(new Date(parseInt(n.attr("data-y")),parseInt(n.attr("data-m")),1))}return t},v=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};n.register(".ui-datepicker",s)}}(),function(o){if(o||!VRender.Component.Render.dateinput){var l=o?require(__vrender__).Utils:VRender.Utils,r=o?require("./_base"):VRender.Component.Render,t=function(t,e){r._base.call(this,t,e)},e=t.prototype=new r._base;e.render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-dateipt"),l.isTrue(this.options.native)&&e.attr("opt-native","1"),e.attr("opt-box",this.options.container);var i=l.toDate(this.options.min);e.attr("opt-min",i?l.toDateString(i,"yyyy-MM-dd"):null);var n=l.toDate(this.options.max);e.attr("opt-max",n?l.toDateString(n,"yyyy-MM-dd"):null);var s=l.toDate(this.options.date);return s&&(e.addClass("has-val"),e.attr("data-dt",l.toDateString(s,"yyyy-MM-dd"))),a.call(this,t,e,s),this},e.getDateFormat=function(){return this.options.dateFormat||this.options.format};var a=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var r=this.options.prompt;l.isNotBlank(r)&&t("<span class='prompt'></span>").appendTo(n).text(r);var a=this.getDateFormat();s.val(d(i,a)||""),o&&a&&(l.isFunction(a)?e.write("<div class='ui-hidden format format-fn'>"+escape(a)+"</div>"):e.write("<div class='ui-hidden format'>"+a+"</div>"))},d=function(t,e){return t?l.isFunction(e)?e(t):(l.isBlank(e)&&(e="yyyy-MM-dd"),l.toDateString(t,e)):""};o?module.exports=t:(t.getFormatDate=d,VRender.Component.Render.dateinput=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.DateInput){var a=VRender.Utils,n=VRender.Component,e=n.Render,i=e.dateinput,s=window.UIDateInput=n.DateInput=function(t,e){if(!n.base.isElement(t))return s.create(t);if(this.init(t,e)!==this)return n.get(t);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",".clear",o.bind(this)),this.$el.on("change",".ui-datepicker",d.bind(this)),this.isRenderAsApp()&&this.isNative()?c.call(this):i.on("tap",r.bind(this))},t=s.prototype=new n.base;s.find=function(t){return n.find(t,".ui-dateipt",s)},s.create=function(t){return n.create(t,s,i)},t.val=function(t,e){return a.isNull(t)?this.getDate(e&&e.format):(this.setDate(t),this)},t.getDate=function(t){var e=a.toDate(this.$el.attr("data-dt"));return e&&a.isNotBlank(t)?a.toDateString(e,t):e},t.setDate=function(t){var e=this._snapshoot(),i=a.toDate(t);if(i){var n=m(i),s=this.getMinDate();if(s&&m(s)>n)i=null;else{var r=this.getMaxDate();r&&m(r)<n&&(i=null)}}this.$el.attr("data-dt",i?a.toDateString(i,"yyyy-MM-dd"):""),p.call(this),e.done(i)},t.getMinDate=function(){return a.toDate(this.$el.attr("opt-min"))},t.setMinDate=function(t){var e=a.toDate(t);if(m(e)!=m(this.getMinDate())){var i=this._snapshoot();if(this.$el.attr("opt-min",e?a.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getDate();n&&m(e)>m(n)&&this.$el.attr("data-dt","")}p.call(this),i.done()}},t.getMaxDate=function(){return a.toDate(this.$el.attr("opt-max"))},t.setMaxDate=function(t){var e=a.toDate(t);if(m(e)!=m(this.getMaxDate())){var i=this._snapshoot();if(this.$el.attr("opt-max",e?a.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getDate();n&&m(e)<m(n)&&this.$el.attr("data-dt","")}p.call(this),i.done()}},t.getDateFormat=function(){if(this.options.hasOwnProperty("dateFormat"))return this.options.dateFormat;if(this.options.hasOwnProperty("format"))return this.options.format;var t=this.$el.children(".format").text();return t&&0<this.$el.children(".format-fn").length&&(t=new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")()),this.$el.children(".format").remove(),this.options.dateFormat=t},t.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),this.setDate(this.getDate())},t.getPrompt=function(){return this.inputTag.children(".prompt").text()},t.setPrompt=function(t){this.inputTag.children(".prompt").remove(),a.isNotNull(t)&&(t=a.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},t.isNative=function(){return 1==this.$el.attr("opt-native")},t._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},t._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getDate()==t.data.getDate()&&e.getMonth()==t.data.getMonth()&&e.getFullYear()==t.data.getFullYear():e==t.data};var r=function(t){u.call(this)},o=function(t){return this.setDate(null),this.trigger("clear"),!1},l=function(t){e.fn.mouseDebounce(t,h.bind(this))},d=function(t){t.stopPropagation()},c=function(){var t=$("<input class='origin-dateipt' type='date'/>").appendTo(this.inputTag);f.call(this,this.getDate(),this.getMinDate(),this.getMaxDate()),t.on("change",function(t){this.setDate(a.toDate($(t.currentTarget).val()))}.bind(this))},u=function(){if(!this.picker){var t={};t.target=$("<div class='picker'></div>").appendTo(this.$el),t.date=this.getDate(),t.min=this.getMinDate(),t.max=this.getMaxDate(),this.picker=n.DatePicker.create(t),this.picker.on("change",function(t,e){this.setDate(e),h.call(this)}.bind(this)),this.picker.on("clear",function(t){this.setDate(null),h.call(this)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this.isRenderAsApp())$("html, body").addClass("ui-scrollless"),e.children(".picker").on("tap",h.bind(this));else{e.on("mouseenter",l.bind(this)),e.on("mouseleave",l.bind(this));var i=e.children(".picker");a.offset(i,this._getScrollContainer(),0,i[0].scrollHeight).isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")},0)}},h=function(){var t=this.$el.addClass("animate-out");this.isRenderAsApp()?($("html,body").removeClass("ui-scrollless"),t.children(".picker").off("tap")):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},p=function(){var e=this,t=function(){var t=e.getDate();t?e.$el.addClass("has-val"):e.$el.removeClass("has-val"),e.inputTag.find("input").val(i.getFormatDate(t,e.getDateFormat())),f.call(e,t,e.getMinDate(),e.getMaxDate())};t._name="ui.dateinput."+this.getViewId(),a.debounce(t,0)},f=function(t,e,i){if(this.isRenderAsApp()&&this.isNative()){var n=this.inputTag.children(".origin-dateipt");n.val(t?a.toDateString(t,"yyyy-MM-dd"):""),n.attr("min",e?a.toDateString(e,"yyyy-MM-dd"):""),n.attr("max",i?a.toDateString(i,"yyyy-MM-dd"):"")}else this.picker&&(this.picker.setMinDate(e),this.picker.setMaxDate(i),this.picker.setDate(t))},m=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};n.register(".ui-dateipt",s)}}(),function(t){if(t||!VRender.Component.Render.timeinput){var a=t?require(__vrender__).Utils:VRender.Utils,i=t?require("./_base"):VRender.Component.Render,e=function(t,e){i._base.call(this,t,e)},n=e.prototype=new i._base;n.render=function(t,e){return i._base.render.call(this,t,e),e.addClass("ui-timeipt"),e.attr("opt-box",this.options.container),this.isSecondVisible()&&e.attr("opt-sec","1"),this.isUse12Hour()&&e.attr("opt-h12","1"),e.attr("opt-min",o(this.options.min,!0)||null),e.attr("opt-max",o(this.options.max,!0)||null),a.isArray(this.options.hours)&&e.attr("opt-hours",this.options.hours.join(",")||null),a.isArray(this.options.minutes)&&e.attr("opt-minutes",this.options.minutes.join(",")||null),a.isArray(this.options.seconds)&&e.attr("opt-seconds",this.options.seconds.join(",")||null),s.call(this,t,e,this.options.time),this},n.isSecondVisible=function(){return a.isTrue(this.options.showSecond)},n.isUse12Hour=function(){return a.isTrue(this.options.use12Hour)};var s=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var r=this.options.prompt;a.isNotBlank(r)&&t("<span class='prompt'></span>").appendTo(n).text(r),(i=o(i,this.isSecondVisible()))&&(s.val(this.isUse12Hour()?l(i):i),e.addClass("has-val").attr("data-t",i))},o=function(t,e){if(t){t=t.split(":");var i=Math.max(0,parseInt(t[0]))||0,n=Math.max(0,parseInt(t[1]))||0,s=Math.max(0,parseInt(t[2]))||0;59<s&&(n+=parseInt(s/60),s%=60),59<n&&(i+=parseInt(n/60),n%=60),23<i&&(i%=24);var r=[];return r.push((i<10?"0":"")+i),r.push((n<10?"0":"")+n),e&&r.push((s<10?"0":"")+s),r.join(":")}return""},l=function(t){if(t){t=t.split(":");var e=Math.max(0,parseInt(t[0]))||0;return 11<e&&(t[0]=e-12,t[0]<10&&(t[0]="0"+t[0])),r(e)+" "+t.join(":")}return""},r=function(t){return t<6?"凌晨":t<12?"上午":t<14?"中午":t<18?"下午":"晚上"};t?module.exports=e:(e.getTime=o,e.get12HourTime=l,VRender.Component.Render.timeinput=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.TimeInput){var g=VRender.Utils,n=VRender.Component,i=n.Render,s=i.timeinput,r=window.UITimeInput=n.TimeInput=function(t,e){if(!n.base.isElement(t))return r.create(t);if(this.init(t,e)!==this)return n.get(t)
;var i=this.inputTag=this.$el.children(".ipt");i.on("tap",a.bind(this)),i.on("tap",".clear",o.bind(this)),this.isRenderAsApp()?(this.$el.on("tap",".picker",d.bind(this)),this.$el.on("touchstart",".picker",c.bind(this)),this.$el.on("touchend",".picker",c.bind(this))):this.$el.on("tap",".picker .item",u.bind(this))},t=r.prototype=new n.base;r.find=function(t){return n.find(t,".ui-timeipt",r)},r.create=function(t){return n.create(t,r,s)},t.getTime=function(){return this.$el.attr("data-t")||""},t.setTime=function(t){var e=this._snapshoot(),i=s.getTime(t,this.isSecondVisible());this.$el.attr("data-t",i),this._rerender(),e.done()},t.getMinTime=function(){return this.$el.attr("opt-min")||""},t.setMinTime=function(t){var e=s.getTime(t,!0);this.$el.attr("opt-min",e),this.picker&&w.call(this,this.picker)},t.getMaxTime=function(){return this.$el.attr("opt-max")||""},t.setMaxTime=function(t){var e=s.getTime(t,!0);this.$el.attr("opt-max",e),this.picker&&w.call(this,this.picker)},t.isSecondVisible=function(){return this.options.hasOwnProperty("showSecond")||(this.options.showSecond=!!this.$el.attr("opt-sec")),g.isTrue(this.options.showSecond)},t.setSecondVisible=function(t){if((t=!!g.isNull(t)||g.isTrue(t))!=this.isSecondVisible()){var e=this._snapshoot();this.options.showSecond=t,this._rerender(),e.done()}},t.isUse12Hour=function(){return this.options.hasOwnProperty("use12Hour")||(this.options.use12Hour=!!this.$el.attr("opt-h12")),g.isTrue(this.options.use12Hour)},t.setUse12Hour=function(t){if((t=!!g.isNull(t)||g.isTrue(t))!=this.isUse12Hour()){var e=this._snapshoot();this.options.use12Hour=t,this._rerender(),e.done()}},t.getHours=function(){this.options.hasOwnProperty("hours")||(this.options.hours=this.$el.attr("opt-hours"));var t=this.isUse12Hour(),e=i.fn.getIntValues(this.options.hours,0,t?11:23);return e&&0<e.length?e:g.map(new Array(t?12:24),function(t,e){return e})},t.setHours=function(t){this.options.hours=t,b.call(this)},t.getMinutes=function(){this.options.hasOwnProperty("minutes")||(this.options.minutes=this.$el.attr("opt-minutes"));var t=i.fn.getIntValues(this.options.minutes,0,59);return t&&0<t.length?t:g.map(new Array(60),function(t,e){return e})},t.setMinutes=function(t){this.options.minutes=t,b.call(this)},t.getSeconds=function(){this.options.hasOwnProperty("seconds")||(this.options.seconds=this.$el.attr("opt-seconds"));var t=i.fn.getIntValues(this.options.seconds,0,59);return t&&0<t.length?t:g.map(new Array(60),function(t,e){return e})},t.setSeconds=function(t){this.options.seconds=t,b.call(this)},t._rerender=function(){var e=this;g.debounce("timeinput_render",function(){var t=e.getTime();h.call(e,t),this.picker&&v.call(e,this.picker.empty())})},t._snapshoot_shoot=function(t){t.data=this.getTime()},t._snapshoot_compare=function(t){return t.data==this.getTime()};var a=function(t){e.call(this)},o=function(t){var e=this._snapshoot();return h.call(this,""),this.picker&&_.call(this,this.picker,""),e.done(),!1},l=function(t){i.fn.mouseDebounce(t,f.bind(this))},d=function(t){$(t.target).is(".picker")&&f.call(this)},c=function(t){if("touchstart"==t.type)this.t_touchend&&clearTimeout(this.t_touchend),this.t_touchend=null;else if("touchend"==t.type&&this.beScrolled){this.beScrolled=!1;var e=this,i=y.call(this,this.picker),n=function(){e.t_touchend=setTimeout(function(){e.t_touchend=null;var t=y.call(e,e.picker);i==t?m.call(e,e.picker,t):(i=t,n())},200)};n()}},u=function(t){var e=$(t.currentTarget);if(!e.is(".selected")){e.addClass("selected").siblings().removeClass("selected"),w.call(this,this.picker);var i=this._snapshoot(),n=y.call(this,this.picker);return h.call(this,p.call(this,n)),i.done(),!1}},h=function(t){this.$el.attr("data-t",t||"");var e=this.inputTag.find("input");t?(t=s.getTime(t,this.isSecondVisible()),e.val(this.isUse12Hour()?s.get12HourTime(t):t),this.$el.addClass("has-val")):(e.val(""),this.$el.removeClass("has-val"))},p=function(t){var e=this.getMinTime();e&&t<e&&(t=e);var i=this.getMaxTime();return i&&i<t&&(t=i),t},e=function(){var t=this.$el.children(".picker");if(t&&0!=t.length||(t=this.picker=$("<div class='picker'></div>").appendTo(this.$el),v.call(this,t)),!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless");else e.on("mouseenter",l.bind(this)),e.on("mouseleave",l.bind(this)),g.offset(t,this._getScrollContainer(),0,t[0].scrollHeight).isOverflowY&&e.addClass("show-before");m.call(this,t,this.getTime()),setTimeout(function(){e.addClass("animate-in")},0)}},f=function(){var t=this.$el.addClass("animate-out");this.isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},m=function(t,e){var r=this.isRenderAsApp(),a=t.children(".cols");if(e){var i=this.isUse12Hour(),n=function(t,e){var i=a.children("."+t);if(i&&0<i.length){var n=g.find(i.children(),function(t){return t.text()==e});if(n&&0<n.length){var s=n.index()*n.height();r&&(s+=n.height()),i.scrollTop(s)}}};e=e.split(":");var s=parseInt(e[0])||0;n("hour",11<s&&i?s-12:s),n("minute",parseInt(e[1])||0),n("second",parseInt(e[2])||0),r&&i&&n("apm",s<12?"AM":"PM")}else r&&a.children().scrollTop(0)},v=function(t){var n=$("<div class='cols'></div>").appendTo(t),e=function(t,e){var i=$("<div class='col'></div>").appendTo(n);i.addClass(t),g.each(e,function(t){$("<div class='item'></div>").appendTo(i).text(t)})};e("hour",this.getHours()),e("minute",this.getMinutes()),this.isSecondVisible()&&e("second",this.getSeconds()),this.isUse12Hour()&&e("apm",["AM","PM"]),_.call(this,t,this.getTime()),w.call(this,t),this.isRenderAsApp()&&n.children(".col").on("scroll",function(t){this.beScrolled=!0;var e=$(t.currentTarget),i=e.children(),n=i.eq(0).height(),s=e.scrollTop(),r=parseInt(s/n);0<r&&s%n<n/2&&(r-=1);var a=i.eq(r);if(!a.is(".selected")){i.filter(".selected").removeClass("selected"),a.addClass("selected"),w.call(this,this.picker);var o=this._snapshoot(),l=y.call(this,this.picker);h.call(this,p.call(this,l)),o.done()}}.bind(this))},b=function(){if(this.picker){var t=this;g.debounce("timeinput_renderpicker",function(){v.call(t,this.picker.empty())})}},y=function(t){var e=t.children(".cols"),i=[],n=e.children(".hour").find(".selected").text();n=parseInt(n)||0,this.isUse12Hour()&&"PM"==e.children(".apm").find(".selected").text()&&(n+=12),i.push((n<10?"0":"")+n);var s=e.children(".minute").find(".selected").text();if(s=parseInt(s)||0,i.push((s<10?"0":"")+s),this.isSecondVisible()){var r=e.children(".second").find(".selected").text();r=parseInt(r)||0,i.push((r<10?"0":"")+r)}return i.join(":")},_=function(t,e){var s=t.children(".cols");if(s.find(".selected").removeClass("selected"),e){var i=function(t,e){var i=s.children("."+t);if(i&&0<i.length){var n=g.find(i.children(),function(t){return t.text()==e});n&&0<n.length&&n.addClass("selected")}};e=e.split(":");var n=parseInt(e[0])||0;this.isUse12Hour()&&(i("apm",n<12?"AM":"PM"),11<n&&(n-=12)),i("hour",n),i("minute",parseInt(e[1])||0),this.isSecondVisible()&&i("second",parseInt(e[2])||0)}},w=function(t){var e=t.children(".cols"),i=(this.getMinTime()||"00:00:00").split(":"),n=(this.getMaxTime()||"23:59:59").split(":"),s=parseInt(i[0])||0,r=parseInt(i[1])||0,a=parseInt(i[2])||0,o=parseInt(n[0])||0,l=parseInt(n[1])||0,d=parseInt(n[2])||0,c="PM"==e.children(".apm").find(".selected").text(),u=-1,h=-1,p=1e4*s,f=1e4*o,m=0;g.each(e.children(".hour").children(),function(t){var e=(parseInt(t.text())||0)+(c?12:0),i=m+1e4*e;i<p||f<i?t.addClass("disabled"):t.removeClass("disabled"),t.is(".selected")&&(u=e)}),p+=100*r,f+=100*l,m+=u<0?0:1e4*u,g.each(e.children(".minute").children(),function(t){var e=parseInt(t.text())||0,i=m+100*e;i<p||f<i?t.addClass("disabled"):t.removeClass("disabled"),t.is(".selected")&&(h=e)}),p+=a,f+=d,m+=h<0?0:100*h,g.each(e.children(".second").children(),function(t){t.removeClass("disabled");var e=parseInt(t.text())||0,i=m+e;(i<p||f<i)&&t.addClass("disabled")}),g.each(e.children(".apm").children(),function(t){t.removeClass("disabled"),"AM"==t.text()&&11<s?t.addClass("disabled"):"PM"==t.text()&&o<12&&t.addClass("disabled")})};n.register(".ui-timeipt",r)}}(),function(l){if(l||!VRender.Component.Render.daterange){var d=l?require(__vrender__).Utils:VRender.Utils,o=l?require("./_base"):VRender.Component.Render,t=function(t,e){o._base.call(this,t,e)},e=t.prototype=new o._base;e.render=function(t,e){o._base.render.call(this,t,e),e.addClass("ui-daterange"),d.isTrue(this.options.dropdown)&&e.addClass("tools-dropdown"),d.isTrue(this.options.native)&&e.attr("opt-native","1");var i=d.toDate(this.options.min);i&&e.attr("opt-min",d.toDateString(i,"yyyy-MM-dd"));var n=d.toDate(this.options.max);n&&e.attr("opt-max",d.toDateString(n,"yyyy-MM-dd"));var s=d.toDate(this.options.start),r=null;s&&(r=d.toDate(this.options.end)||new Date(s.getTime()),i&&p(i)>p(s)&&(s=i),n&&p(n)<p(r)&&(r=n),p(s)>p(r)&&(s=r=null));var a=parseInt(this.options.quickDef)||0;return s&&r?a=0:a&&(r=new Date,(s=new Date).setDate(s.getDate()-a)),s&&r&&(e.addClass("has-val"),e.attr("data-start",d.toDateString(s,"yyyy-MM-dd")),e.attr("data-end",d.toDateString(r,"yyyy-MM-dd"))),c.call(this,t,e,this.getShortcutDates(),a),u.call(this,t,e,s,r),this},e.getDateFormat=function(){return this.options.dateFormat||this.options.format},e.getShortcutDates=function(){return this.options.shortcuts||this.options.quickDates};var c=function(n,t,e,s){if(t.removeClass("has-tools").children(".tools").remove(),(e=a(e))&&0<e.length){t.addClass("has-tools");var i=n("<div class='tools'></div>").prependTo(t);i.append("<span class='label'>选择日期</span>");var r=n("<div class='items'></div>").appendTo(i);d.each(e,function(t){var e=parseInt(t.value)||0,i=n("<div class='item'></div>").appendTo(r);i.attr("data-val",e),i.text(d.isBlank(t.label)?"最近"+e+"天":t.label),e==s&&i.addClass("selected")})}},u=function(t,e,i,n){var s=t("<div class='ipt'></div>").appendTo(e),r=t("<input type='text' readonly='readonly'/>").appendTo(s);s.append("<span class='clear'></span>");var a=this.options.prompt;d.isNotBlank(a)&&t("<span class='prompt'></span>").appendTo(s).text(a)
;var o=this.getDateFormat();r.val(h(i,n,o)||""),l&&o&&(d.isFunction(o)?e.write("<div class='format format-fn'>"+escape(o)+"</div>"):e.write("<div class='format'>"+o+"</div>"))},n=function(t,e){return d.isFunction(e)?e(t):(d.isBlank(e)&&(e="yyyy-MM-dd"),d.toDateString(t,e))},a=function(t){var e=[];return d.each(d.toArray(t),function(t){d.isNotBlank(t)&&("object"!=typeof t&&(t={value:t}),t.value=parseInt(t&&t.value)||0,0<t.value&&e.push(t))}),e},h=function(t,e,i){return t&&e?n(t,i)+" 至 "+n(e,i):""},p=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};l?module.exports=t:(t.getDateRangeLabel=h,t.renderShortcuts=c,VRender.Component.Render.daterange=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.DateRange){var d=VRender.Utils,s=VRender.Component,r=s.Render.daterange,a=window.UIDateRange=s.DateRange=function(t,e){if(!s.base.isElement(t))return a.create(t);if(this.init(t,e)!==this)return s.get(t);var i=this.inputTag=this.$el.children(".ipt");if(i.on("tap",".clear",p.bind(this)),this.$el.on("change",".ui-datepicker",h.bind(this)),this.isRenderAsApp()&&this._isNative())b.call(this);else if(i.on("tap",o.bind(this)),i.on("tap",".picker",function(t){return!1}),!this.isRenderAsApp()){var n=this.$el.children(".tools");n.on("tap",".item",l.bind(this)),n.on("tap",".label",c.bind(this)),n.on("mouseenter",u.bind(this)),n.on("mouseleave",u.bind(this))}},t=a.prototype=new s.base;a.find=function(t){return s.find(t,".ui-daterange",a)},a.create=function(t){return s.create(t,a,r)},t.val=function(t,e){return d.isNull(t)?this.getDateRange(e&&e.format):(t=d.toArray(t),this.setDateRange(t[0],t[1]),this)},t.getDateRange=function(t){var e=this.getStartDate(),i=this.getEndDate();return e&&i?(d.isNotBlank(t)&&(e=d.toDateString(e,t),i=d.toDateString(i,t)),[e,i]):null},t.setDateRange=function(t,e){var i=this._snapshoot();if(e=((t=d.toDate(t))?d.toDate(e):null)||t,t&&e){var n=this.getMinDate(),s=this.getMaxDate();n&&_(n)>_(t)&&(t=n),s&&_(s)<_(e)&&(e=s),_(t)>_(e)&&(t=e=null)}this.$el.attr("data-start",t?d.toDateString(t,"yyyy-MM-dd"):""),this.$el.attr("data-end",e?d.toDateString(e,"yyyy-MM-dd"):""),f.call(this,i),i.done()},t.getStartDate=function(){return d.toDate(this.$el.attr("data-start"))},t.setStartDate=function(t){this.setDateRange(t,this.getEndDate())},t.getEndDate=function(){return d.toDate(this.$el.attr("data-end"))},t.setEndDate=function(t){this.setDateRange(this.getStartDate(),t)},t.getMinDate=function(){return d.toDate(this.$el.attr("opt-min"))},t.setMinDate=function(t){var e=d.toDate(t);if(_(e)!=_(this.getMinDate())){var i=this._snapshoot();if(this.$el.attr("opt-min",e?d.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getEndDate();if(n&&_(n)<_(e))this.$el.attr("data-start","").attr("data-end","");else{var s=this.getStartDate();s&&_(s)<_(e)&&this.$el.attr("data-start",this.$el.attr("opt-min"))}}f.call(this,i),i.done()}},t.getMaxDate=function(){return d.toDate(this.$el.attr("opt-max"))},t.setMaxDate=function(t){var e=d.toDate(t);if(_(e)!=_(this.getMaxDate())){var i=this._snapshoot();if(this.$el.attr("data-max",e?d.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getStartDate();if(n&&_(n)>_(e))this.$el.attr("data-start","").attr("data-end","");else{var s=this.getEndDate();s&&_(s)>_(e)&&this.$el.attr("data-end",this.$el.attr("opt-max"))}}f.call(this,i),i.done()}},t.getDateFormat=function(){if(this.hasOwnProperty("_dateFormat"))return this._dateFormat;if(this.options.hasOwnProperty("dateFormat"))return this.options.dateFormat;if(this.options.hasOwnProperty("format"))return this.options.format;var t=this.$el.children(".format").text();return t&&0<this.$el.children(".format-fn").length&&(t=new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")()),this.$el.children(".format").remove(),this._dateFormat=t},t.setDateFormat=function(t){if(this._dateFormat=t,this.$el.children(".format").remove(),this.$el.is("has-val")){var e=this.getStartDate(),i=this.getEndDate(),n="";e&&i&&(n=r.getDateRangeLabel.call(this,e,i,t)),this.inputTag.find("input").val(n||"")}},t.setShortcuts=function(t){r.renderShortcuts.call(this,this.$el,t)},t._snapshoot_shoot=function(t){t.data=this.getDateRange(),t.min=this.getMinDate(),t.max=this.getMaxDate()},t._snapshoot_compare=function(t){var e=this.getDateRange();return t.data&&e?_(t.data[0])==_(e[0])&&_(t.data[1])==_(e[1]):!(t.data||e)},t._isNative=function(){return 1==this.$el.attr("opt-native")};var o=function(t){e.call(this)},l=function(t){var e=$(t.currentTarget);e.addClass("selected").siblings().removeClass("selected"),e.parent().parent().children(".label").text(e.text()),this.$el.removeClass("show-dropdown"),n.call(this,e.attr("data-val"))},c=function(t){this.$el.addClass("show-dropdown")},u=function(t){if(this.t_shortcut&&clearTimeout(this.t_shortcut),"mouseleave"==t.type&&this.$el.is(".show-dropdown")){var e=this;this.t_shortcut=setTimeout(function(){e.t_shortcut=0,e.$el.removeClass("show-dropdown")},1e3)}},h=function(t){t.stopPropagation()},p=function(t){return this.setDateRange(null,null),!1},i=function(t){var e=$(t.currentTarget),i=d.toDate(e.val());e.is(".start")?this.setDateRange(i,this.getEndDate()):this.setDateRange(this.getStartDate(),i)},f=function(t){var n=this,e=function(){var t=n.getDateRange(),e=t&&t[0],i=t&&t[1];m.call(n,e,i),g.call(n,e,i),v.call(n,e,i,n.getMinDate(),n.getMaxDate())};e._name="ui.daterange.refresh."+this.getViewId(),d.debounce(e,0)},m=function(t,e){var i=r.getDateRangeLabel(t,e,this.getDateFormat());this.inputTag.find("input").val(i||""),t&&e?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},g=function(t,e){var i=this.$el.children(".tools"),n=i.children(".label").text("选择日期"),s=i.find(".item").removeClass("selected");if(t&&e&&0==d.getDays(e,new Date))for(var r=d.getDays(e,t)+1,a=0,o=s.length;a<o;a++){var l=s.eq(a);if(l.attr("data-val")==r){l.addClass("selected"),n.text(l.text());break}}},v=function(t,e,i,n){if(this.isRenderAsApp()&&this._isNative()){var s=this.inputTag.children(".origin-dateipt.start"),r=this.inputTag.children(".origin-dateipt.end");s.val(t?d.toDateString(t,"yyyy-MM-dd"):""),r.val(e?d.toDateString(e,"yyyy-MM-dd"):""),i=i?d.toDateString(i,"yyyy-MM-dd"):"",n=n?d.toDateString(n,"yyyy-MM-dd"):"",s.attr("min",i).attr("max",n),r.attr("min",i).attr("max",n)}else this.picker&&(this.picker.setMinDate(i),this.picker.setMaxDate(n),this.picker.setDate(t,e))},n=function(t){if(0<(t=parseInt(t)||0)){var e=new Date,i=new Date;e.setDate(e.getDate()-t+1),this.setDateRange(e,i)}},b=function(){var t=$("<input class='origin-dateipt start' type='date'/>").appendTo(this.inputTag),e=$("<input class='origin-dateipt end' type='date'/>").appendTo(this.inputTag);v.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),this.getMaxDate()),t.on("change",i.bind(this)),e.on("change",i.bind(this))},e=function(){if(!this.picker){var t={range:!0};t.target=$("<div class='picker'></div>").appendTo(this.inputTag),t.min=this.getMinDate(),t.max=this.getMaxDate(),t.start=this.getStartDate(),t.end=this.getEndDate(),this.picker=s.DatePicker.create(t),this.picker.on("submit",function(t,e){y.call(this),this.setDateRange(e&&e[0],e&&e[1])}.bind(this)),this.picker.on("cancel",function(t){y.call(this)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this.isRenderAsApp())$("html, body").addClass("ui-scrollless"),this.inputTag.children(".picker").on("tap",function(t){y.call(this),this.picker&&this.picker.cancel()}.bind(this));else{var i=this.inputTag.children(".picker"),n=d.offset(i,this._getScrollContainer(),0,i[0].scrollHeight);n.isOverflowX&&e.addClass("show-right"),n.isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")},0)}},y=function(){var t=this.$el.addClass("animate-out");this.isRenderAsApp()&&($("html, body").removeClass("ui-scrollless"),this.$el.children(".picker").off("tap")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before").removeClass("show-right"),t.removeClass("animate-in").removeClass("animate-out")},300)},_=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};s.register(".ui-daterange",a)}}(),function(i){if(i||!VRender.Component.Render.fileupload){var n=i?require(__vrender__).Utils:VRender.Utils,s=i?require("./_base"):VRender.Component.Render,t=function(t,e){s._base.call(this,t,e)},e=t.prototype=new s._base;e.render=function(t,e){s._base.render.call(this,t,e),e.addClass("ui-fileupload").css("display","none"),e.attr("opt-action",n.trimToNull(this.options.action)),e.attr("opt-upload",n.trimToNull(this.options.uploadName)),e.attr("opt-filter",this.getFilter()),e.attr("opt-limit",this.getLimit()||null),e.attr("opt-auto",this.isAutoUpload()?"1":null),e.attr("opt-mixed",this.isMixed()?"1":null),e.attr("opt-browser",this.getBrowser()),r.call(this,t,e),i&&this.options.params&&e.attr("opt-params",JSON.stringify(this.options.params))},e.getBrowser=function(){if(i){var t=this.options.browser;if(t){if("string"==typeof t)return t;if(n.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']"}}return null},e.getFilter=function(){return n.trimToNull(this.options.filter)},e.getLimit=function(){return Math.max(0,parseInt(this.options.limit))||0},e.isMultiple=function(){return s.fn.isMultiple.call(this)},e.isAutoUpload=function(){return!this.options.hasOwnProperty("autoUpload")||n.isTrue(this.options.autoUpload)},e.isMixed=function(){return n.isTrue(this.options.mixed)};var r=function(t,e){var i=t("<input type='file'/>").appendTo(e);this.isMultiple()&&i.attr("multiple","multiple"),i.attr("accept",n.trimToNull(a.call(this)))},a=function(){var t=this.getFilter();if(t){if("image"==t)return"image/*";if("audio"==t)return"audio/*";if("video"==t)return"video/*";if("excel"==t)return"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if("word"==t)return"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document";if("powerpoint"==t)return"application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation";if("text"==t)return"text/*"}return t};i?module.exports=t:(t.getAccept=a,VRender.Component.Render.fileupload=t)}}(
"undefined"==typeof VRender),function(){if(!VRender.Component.FileUpload){var c=VRender.Utils,n=VRender.Component,s=n.Render.fileupload,r=window.UIFileUpload=n.FileUpload=function(t,e){if(!n.base.isElement(t))return r.create(t);if(this.init(t,e)!==this)return n.get(t);this.$el.on("change","input",o.bind(this));var i=this.getBrowser();i&&i.on("tap.fileupload",a.bind(this))},t=r.prototype=new n.base;r.find=function(t){return n.find(t,".ui-fileupload",r)},r.create=function(t){return n.create(t,r,s)},t.browser=function(){this.$el.children("input").click()},t.remove=function(t){c.removeBy(this.files,"localId",t)},t.clear=function(){this.files=[]},t.upload=function(t,e,i){if(this.isUploading)return!1;if(c.isFunction(t)?(i=t,t=e=null):c.isFunction(e)&&(i=e,e=null),c.isBlank(t)&&(t=this.getAction()),c.isBlank(t))return y("上传失败：缺少 Action 信息！"),!1;if(!(this.files&&0<this.files.length))return c.isFunction(i)&&i("没有文件信息"),!1;var n=this;this.isUploading=!0,d.call(this,t,e,function(t,e){n.isUploading=!1,c.isFunction(i)&&i(t,e)})},t.cancel=function(){this.isUploading=!1,c.each(this.files,function(t){t.uploader&&(t.uploader.abort(),t.uploader=null)})},t.isEmpty=function(){return!this.files||0==this.files.length},t.getAction=function(){return this.$el.attr("opt-action")},t.setAction=function(t){this.$el.attr("opt-action",c.trimToEmpty(t))},t.getParams=function(){if(this.options.hasOwnProperty("params"))return this.options.params;var t=null;try{t=JSON.parse(this.$el.attr("opt-params"))}catch(t){}return this.options.params=t,this.options.params},t.setParams=function(t){this.options.params=t,this.$el.removeAttr("opt-params")},t.getUploadName=function(){return c.trimToNull(this.$el.attr("opt-upload"))||"file"},t.setUploadName=function(t){this.$el.attr("opt-upload",c.trimToEmpty(t))},t.getBrowser=function(){if(this.hasOwnProperty("browserBtn"))return this.browserBtn;if(this.options.hasOwnProperty("browser"))return this.options.browser;var t=this.$el.attr("opt-browser");return this.$el.removeAttr("opt-browser"),this.browserBtn=c.isBlank(t)?null:$(t),this.browserBtn},t.setBrowser=function(t){var e=this.getBrowser();e&&e.off("tap.fileupload"),this.browserBtn=c.isBlank(t)?null:t.$el||$(t),this.options.browser=null,this.$el.removeAttr("opt-browser"),initBrowserHandler.call(this,this.browserBtn),this.browserBtn&&this.browserBtn.on("tap.fileupload",a.bind(this))},t.getFilter=function(){return this.$el.attr("opt-filter")},t.setFilter=function(t){this.$el.attr("opt-filter",c.trimToEmpty(t));var e=this.$el.children("input"),i=s.getAccept.call(this);i?e.attr("accept",i):e.removeAttr("accept")},t.getLimit=function(){return parseInt(this.$el.attr("opt-limit"))||0},t.setLimit=function(t){t&&!isNaN(t)?this.$el.attr("opt-limit",t):this.$el.removeAttr("opt-limit")},t.isMultiple=function(){return"multiple"==this.$el.children("input").attr("multiple")},t.setMultiple=function(t){var e=this.$el.children("input");c.isNull(t)||c.isTrue(t)?e.attr("multiple","multiple"):e.removeAttr("multiple")},t.isAutoUpload=function(){return 1==this.$el.attr("opt-auto")},t.setAutoUpload=function(t){c.isNull(t)||c.isTrue(t)?this.$el.attr("opt-auto","1"):this.$el.removeAttr("opt-auto")},t.isMixed=function(){return 1==this.$el.attr("opt-mixed")},t.setMixed=function(t){c.isNull(t)||c.isTrue(t)?this.$el.attr("opt-mixed","1"):this.$el.removeAttr("opt-mixed")};var a=function(){this.isUploading?y("正在上传，请稍候.."):this.browser()},o=function(t){var e=$(t.currentTarget),i=l.call(this,e[0].files);if(i&&0!=i.length){var n=Date.now(),s="multiple"==e.attr("multiple");if(s){this.files=c.toArray(this.files);for(var r=0;r<i.length;r++)i[r].localId=n++,this.files.push(i[r])}else i[0].localId=n++,this.files=[i[0]];e.remove();var a=$("<input type='file'/>").appendTo(this.$el);s&&a.attr("multiple","multiple"),a.attr("accept",e.attr("accept")),this.trigger("change",this.files),this.isAutoUpload()&&c.isNotBlank(this.getAction())&&this.upload()}},l=function(t){var e=c.trimToNull(this.getFilter());e&&(e=/image|audio|video|excel|word|powerpoint|text/.test(e)?null:e.split(","));var i=this.getLimit();if(e||0<i)for(var n=0;n<t.length;n++){var s=t[n];if(e){var r=s.name.split(".");if(r=r[r.length-1],c.index(e,function(t){return c.endWith(t,r)})<0)return y("文件类型错误："+s.name),!1}if(0<i&&i<s.size)return y("允许文件大小上限为："+b(i)),!1}return t},d=function(t,e,i){var n=p.call(this,t),s=c.extend({},this.getParams(),e),r=0;c.each(this.files,function(t){r+=t.size,t.state=0}),this.totalSize=r,this.totalSend=0;var a=this;u.call(this,n,s,this.files,function(t,e){t?a.trigger("error",t):(a.files=null,a.trigger("success",e)),c.isFunction(i)&&i(t,e)})},u=function(t,e,n,s){if(1==n.length||this.isMixed())c.each(n,function(t){t.state=1}),h.call(this,t,e,n,function(e,t){var i=[];c.each(n,function(t){t.state=e?3:2,i.push(t.localId)}),t.localId=i.join(","),s(e,t)});else{var r=this,a=[],o=[],l=function(){var i=c.findBy(n,"state",0);i?(i.state=1,h.call(r,t,e,[i],function(t,e){t?(i.state=3,a.push(t)):(i.state=2,e.localId=i.localId,o.push(e)),l()})):(0==a.length&&(a=null),s(a,o))};l()}},h=function(s,r,a,o){var l=i();if(l){var d=this;r=c.extend({},r),e.call(this,a,r,function(t){if(t)o("canceled"==t?"已取消":t);else{(a[0].uploader=l).open("POST",s,!0),l.onload=function(t){f.call(d,t,a,o)},l.onerror=function(t){m.call(d,t,a,o)},l.onreadystatechange=function(t){g.call(d,t,a)},l.upload.onprogress=function(t){v.call(d,t,a)};var e=new FormData,i=d.getUploadName();for(var n in c.each(a,function(t){e.append(i,t),e.append("filename",t.name)}),r)e.append(n,r[n]);l.send(e)}})}else o("当前浏览器版本较低，不支持该上传功能。或者使用其他浏览器（如：chrome）。")},p=function(t){return/^(\/|http)/.test(t)?t:"/upload?n="+t},e=function(t,e,i){var n={type:"upload-before"};this.trigger(n,t,e),n.isPreventDefault?i("canceled"):i()},i=function(){return window.XMLHttpRequest?new XMLHttpRequest:!!window.ActiveXObject&&new ActiveXObject("Microsoft.XMLHTTP")},f=function(t,e,i){e[0].uploader=null,i(e.errorMsg,e.resultMsg)},m=function(t,e,i){console.log(t),e[0].uploader=null,i(t)},g=function(t,e){var i=e[0].uploader;if(4==i.readyState){var n=i.responseText;if(n)try{n=JSON.parse(n)}catch(t){}200==i.status?e.resultMsg=n||i.responseText:(console.error(i.responseText),e.errorMsg=n||i.responseText||"文件上传失败！")}},v=function(t,e){this.totalSend+=t.loaded,this.totalSend>this.totalSize&&(this.totalSend=this.totalSize),this.trigger("progress",e,this.totalSend,this.totalSize)},b=function(t){return(t=parseInt(t))&&0<t?t<1024?t+"B":(t/=1024)<1024?t.toFixed(2)+"KB":(t/=1024)<1024?t.toFixed(2)+"MB":(t/=1024)<1024?t.toFixed(2)+"GB":(t/=1024).toFixed(2)+"TB":""},y=function(t,e){n.Tooltip.create({type:"danger",content:t,duration:e})};n.register(".ui-fileupload",r)}}(),function(a){if(a||!VRender.Component.Render.formview){var c=a?require(__vrender__).Utils:VRender.Utils,u=a?require("./_base"):VRender.Component.Render,o=a?require("../../../ui/component/UIButton"):VRender.Component.Button,e=function(t,e){u._base.call(this,t,e)},t=e.prototype=new u._base;e.VERTICAL="vertical",e.HORIZONTIAL="horizontial",t.render=function(t,e){u._base.render.call(this,t,e),e.addClass("ui-formview"),l.call(this,t,e);var i=this.getLabelAlign();i&&"left"!=i&&e.attr("opt-la",i),e.attr("opt-action",c.trimToNull(this.options.action)),e.attr("opt-method",c.trimToNull(this.options.method));var n=this.getOrientation();if(e.addClass(n).attr("opt-orientate",n),a){this.options.params&&e.attr("opt-params",JSON.stringify(this.options.params));var s=this.getColumns();1<s&&e.attr("opt-cols",s);var r=this.getLabelWidth();r&&e.attr("opt-lw",r)}return this},t.renderData=function(){},t.add=function(t,e,i){var n=c.toArray(this.options.data),s={name:t,label:e};return 0<=(i=c.getIndexValue(i))&&i<n.length?n.splice(i,0,s):n.push(s),this.options.data=n,new r(s)},t.get=function(t){if(c.isBlank(t))return null;var e=c.toArray(this.options.data),i=c.findBy(e,"name",t);return i?new r(i):null},t.getAt=function(t){t=c.getIndexValue(t);var e=c.toArray(this.options.data);return 0<=t&&t<e.length?new r(e[t]):null},t.delete=function(t){if(c.isBlank(t))return null;var e=c.toArray(this.options.data),i=c.deleteBy(e,"name",t);return i&&0<i.length?1<i.length?i:i[0]:null},t.deleteAt=function(t){t=c.getIndexValue(t);var e=c.toArray(this.options.data);return 0<=t&&t<e.length?e.splice(t,1)[0]:null},t.getColumns=function(){return this.isRenderAsApp()?1:parseInt(this.options.columns)||1},t.getLabelWidth=function(){return this.hasOwnProperty("labelWidth")||(this.labelWidth=c.getFormatSize(this.options.labelWidth,this.isRenderAsRem())),this.labelWidth},t.getLabelAlign=function(){if(!this.hasOwnProperty("labelAlign")){var t=this.options.labelAlign;this.labelAlign=/^(left|right|center)$/.test(t)?t:null}return this.labelAlign},t.getOrientation=function(){var t=this.options.orientation;return e.VERTICAL==t||e.HORIZONTIAL==t?t:this.isRenderAsApp()?e.VERTICAL:e.HORIZONTIAL};var l=function(t,e){i.call(this,t,e,this.options.data),n.call(this,t,e,this.options.buttons)},i=function(n,s,t){var r=s.children(".items").empty();r&&0!=r.length||(r=n("<div class='items'></div>").appendTo(s));var a=this,o=this.getColumns();c.each(c.toArray(t),function(t){var e=n("<div class='form-item'></div>").appendTo(r);d.call(a,n,s,e,t);var i=parseInt(t.colspan)||1;e.attr("opt-col",i),1<o&&i<o&&e.css("width",(100*i/o).toFixed(6)+"%")})},d=function(t,e,i,n){c.isNotBlank(n.name)&&i.attr("name",n.name),c.isTrue(n.required)&&i.attr("opt-required","1");var s=c.trimToNull(n.empty);s&&i.attr("opt-empty",s),c.isNotNull(n.visible)&&!c.isTrue(n.visible)&&i.attr("opt-hide","1");var r=t("<dl class='content'></dl>").appendTo(i),a=t("<dt></dt>").appendTo(r);a.text(c.trimToEmpty(n.label));var o=this.getLabelWidth();o&&a.css("width",o);var l=t("<dd></dd>").appendTo(r);l=t("<div></div>").appendTo(l);var d=n.content;d&&(c.isFunction(d.render)?d.render(l):d.hasOwnProperty("$el")?l.append(d.$el):l.append(d)),u.fn.renderFunction.call(this,i,"validate",n.validate)},n=function(i,t,e){if(t.children(".btnbar").remove(),e&&0<e.length){var n=this,s=i("<div class='btnbar'></div>").appendTo(t),r=this.getLabelWidth();r&&!this.isRenderAsApp()&&s.css("paddingLeft",r),c.each(e,function(t){var e=i("<div></div>").appendTo(s);"submit"==t.type&&e.addClass("is-submit"),a?new o(n.context,t
).render(e):new o(c.extend({},t,{target:e}))})}},r=function(t){this.data=t,this.data.visible=!0},s=r.prototype=new Object;s.getName=function(){return this.data.name},s.setName=function(t){return this.data.name=t,this},s.getLabel=function(){return this.data.label},s.setLabel=function(t){return this.data.label=t,this},s.content=function(t){return this.data.content=t,this},s.required=function(t){return this.data.required=!!c.isNull(t)||c.isTrue(t),this},s.visible=function(t){return this.data.visible=!!c.isNull(t)||c.isTrue(t),this},s.show=function(){return this.data.visible=!0,this},s.hide=function(){return this.data.visible=!1,this},s.emptyMsg=function(t){return this.data.empty=t,this},s.validate=function(t){return this.data.validate=t,this},s.colspan=function(t){return this.datas.colspan=t,this},a?module.exports=e:(e.renderItems=i,e.renderOneItem=d,e.renderButtons=n,VRender.Component.Render.formview=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.FormView){var l=VRender.Utils,o=VRender.Component,e=o.Render.formview,i=window.UIFormView=o.FormView=function(t,e){return o.base.isElement(t)?this.init(t,e)!==this?o.get(t):(this.$el.children(".btnbar").on("tap",".ui-btn",n.bind(this)),this.$el.on("keydown",".form-item > .content > dd > div > *",s.bind(this)),this.$el.on("focusout",".form-item > .content > dd > div > *",r.bind(this)),this.$el.on("change",".form-item > .content > dd > div > *",c.bind(this)),this.$el.on("keydown",".ui-textview > .ipt > *",a.bind(this)),this.$el.on("focusout",".ui-textview > .ipt > *",d.bind(this)),void(this.isRenderAsApp()||(this.$el.on("mouseenter",".form-item > .content > dd > div > *",u.bind(this)),this.$el.on("mouseleave",".form-item > .content > dd > div > *",u.bind(this))))):i.create(t)},t=i.prototype=new o.base;i.find=function(t){return o.find(t,".ui-formview",i)},i.create=function(t){return o.create(t,i,e)},t.validate=function(n){var t=this,s=[],e=this._getItems(),r=e.length;l.each(e,function(e,i){h.call(t,e,null,function(t){t&&s.push({index:i,name:e.attr("name"),message:t}),(r-=1)<=0&&l.isFunction(n)&&n(0<s.length&&s)})})},t.submit=function(n,s){if(this.$el.is(".is-loading"))return!1;l.isFunction(n)&&(s=n,n=null),l.isBlank(n)&&(n=this.getAction()),this.$el.addClass("is-loading");var r=this.$el.find(".btnbar .is-submit .ui-btn");l.each(r,function(t){o.get(t).waiting()});var a=this,e=function(t,e,i){a.$el.removeClass("is-loading"),l.each(r,function(t){o.get(t).waiting(0)}),l.isFunction(s)&&s(t,e,i),n&&a.trigger("action_after",t,e,i)};this.validate(function(t){!t&&n?R.call(a,n,e):e(t)})},t.getFormData=function(){var n={};return n=l.extend(n,this.getParams()),l.each(this._getItems(),function(t){var e=t.attr("name");if(!l.isBlank(e)){var i=t.children(".content").children("dd").children().children();i.is("input, textarea")?n[e]=i.val()||"":(i=o.get(i)||VRender.FrontComponent.get(i))&&(i instanceof UIDateInput?n[e]=i.getDate("yyyy-MM-dd"):i instanceof UIDateRange?n[e]=i.getDateRange("yyyy-MM-dd"):i instanceof UICombobox?n[e]=i.val():i instanceof o.select?n[e]=i.getSelectedKey():l.isFunction(i.getValue)?n[e]=i.getValue():l.isFunction(i.val)&&(n[e]=i.val()))}}),n},t.setFormData=function(r){r=r||{};var a=this;l.each(this._getItems(),function(t){var e=t.attr("name");if(!l.isBlank(e)&&r.hasOwnProperty(e)){var i=r[e],n=t.children(".content").children("dd").children().children();if(n.is("input, textarea"))n.val(i||""),p.call(a,t,n);else{var s=o.get(n);s&&(s instanceof o.select?(s.setSelectedKey(i),g.call(a,t,s)):l.isFunction(s.val)&&(s.val(i||""),h.call(this,t,n)))}}})},t.add=function(t,e,i){var n=this.$el.children(".items"),s=$("<div class='form-item'></div>").appendTo(n);s.attr("name",l.trimToNull(t));var r=$("<dl class='content'></dl>").appendTo(s),a=$("<dt></dt>").appendTo(r);if(a.text(l.trimToEmpty(e)),a.css("width",l.trimToEmpty(this.getLabelWidth())),r.append("<dd><div></div></dd>"),0<=(i=l.getIndexValue(i))){var o=n.children();i<o.length-1&&o.eq(i).before(s)}return new V(this,s)},t.get=function(e){if(l.isBlank(e))return null;var t=l.find(this._getItems(),function(t){return t.attr("name")==e});return t?new V(this,t):null},t.getAt=function(t){if(0<=(t=l.getIndexValue(t))){var e=this._getItems().eq(t);return e?new V(this,e):null}return null},t.delete=function(e){if(l.isBlank(e))return null;var t=l.find(this._getItems(),function(t){return t.attr("name")==e});return t&&t.remove(),t},t.deleteAt=function(t){if(0<=(t=l.getIndexValue(t))){var e=this._getItems().eq(t);return e&&e.remove(),e}return null},t._getItems=function(){return this.$el.children(".items").children()},t.getColumns=function(){return this.isRenderAsApp()?1:this.options.hasOwnProperty("columns")?parseInt(this.options.columns)||1:(this.options.columns=parseInt(this.$el.attr("opt-cols"))||1,this.$el.removeAttr("opt-cols"),this.options.columns)},t.setColumns=function(t){if(!this.isRenderAsApp()){var i=parseInt(t)||1;i<1&&(i=1),this.options.columns=i,this.$el.removeAttr("opt-cols"),l.each(this._getItems(),function(t){var e=parseInt(t.attr("opt-col"))||1;e<i?t.css("width",(100*e/i).toFixed(6)+"%"):t.css("width","")})}},t.getAction=function(){return this.$el.attr("opt-action")},t.setAction=function(t){this.$el.attr("opt-action",l.trimToEmpty(t))},t.getParams=function(){if(this.options.hasOwnProperty("params"))return this.options.params;var t=null;try{t=JSON.parse(this.$el.attr("opt-params"))}catch(t){}return this.options.params=t,this.options.params},t.setParams=function(t){this.options.params=t,this.$el.removeAttr("opt-params")},t.getMethod=function(){return this.$el.attr("opt-method")},t.setMethod=function(t){this.$el.attr("opt-method",l.trimToEmpty(t))},t.getLabelWidth=function(){if(this.options.hasOwnProperty("labelWidth"))return this.options.labelWidth;var t=this.$el.attr("opt-lw");return this.options.width=l.getFormatSize(t,this.isRenderAsRem()),this.$el.removeAttr("opt-lw"),this.options.labelWidth},t.setLabelWidth=function(t){this.options.labelWidth=t,this.$el.removeAttr("opt-lw")},t.getLabelAlign=function(){var t=this.$el.attr("opt-la");return/^(center|right)$/.test(t)?t:"left"},t.setLabelAlign=function(t){var e=/^(center|right)$/.test(t)?e:"left";this.options.labelAlign=e,this.$el.attr("opt-la",e)},t.getOrientation=function(){return this.$el.attr("opt-orientate")},t.setOrientation=function(t){e.VERTICAL!=t&&e.HORIZONTIAL!=t&&(t=this.isRenderAsApp()?e.VERTICAL:e.HORIZONTIAL),this.$el.removeClass(e.VERTICAL),this.$el.removeClass(e.HORIZONTIAL),this.$el.addClass(t).attr("opt-orientate",t)},t.setButtons=function(t){e.renderButtons.call(this,$,this.$el,l.toArray(t))};var n=function(t){var e=$(t.currentTarget);e.parent().is(".is-submit")&&this.submit();var i=e.attr("name");i&&this.trigger("btn_"+i)},s=function(t){var e=$(t.currentTarget);if(e.is("input, textarea")){var i=l.parentUntil(e,".form-item");x.call(this,i)}},r=function(t){var e=$(t.currentTarget);if(e.is("input, textarea")){var i=l.parentUntil(e,".form-item");p.call(this,i,e)}},a=function(t){l.parentUntil(t.currentTarget,".form-item").removeClass("is-error")},d=function(t){var e=$(t.currentTarget),i=l.parentUntil(e,".form-item"),n=o.get(e.parent().parent());m.call(this,i,n)},c=function(t){var e=$(t.currentTarget);if(!e.is("input, textarea")){var i=l.parentUntil(e,".form-item");h.call(this,i)}},u=function(t){var e=l.parentUntil(t.currentTarget,".form-item");e.is(".is-error")&&(D.call(this,e),"mouseenter"==t.type?e.children(".errmsg").removeClass("animate-out"):I.call(this,e))},h=function(t,e,i){if(1==t.attr("opt-hide"))return i(!1);e||(e=t.children(".content").children("dd").children().children()),e.is("input, textarea")?p.call(this,t,e,i):(e=o.get(e)||VRender.FrontComponent.get(e)||e)instanceof UITextView?m.call(this,t,e,i):e instanceof UIDateInput?b.call(this,t,e,i):e instanceof UIDateRange?y.call(this,t,e,i):e instanceof UICombobox?v.call(this,t,e,i):e instanceof o.select?g.call(this,t,e,i):l.isFunction(e.getValue)?f.call(this,t,e,e.getValue(),i):l.isFunction(e.val)?f.call(this,t,e,e.val(),i):i(!1)},p=function(t,e,i){_.call(this,t,e.val(),i)},f=function(t,e,i,n){_.call(this,t,i,n)},m=function(t,e,i){var n=this;e.validate(function(){e.hasError()?(t.addClass("is-error"),t.children(".errmsg").remove()):(t.removeClass("is-error"),_.call(n,t,e.val(),i))})},g=function(t,e,i){_.call(this,t,e.getSelectedKey(),i)},v=function(t,e,i){e.isEditable()?_.call(this,t,e.val(),i):_.call(this,t,e.getSelectedKey(),i)},b=function(t,e,i){_.call(this,t,e.getDate(),i)},y=function(t,e,i){_.call(this,t,e.getDateRange(),i)},_=function(i,t,n){if(l.isBlank(t)){var e=1==i.attr("opt-required")?i.attr("opt-empty")||"不能为空":null;T.call(this,i,e,n)}else{var s=w.call(this,i);if(l.isFunction(s)){var r=this;s(t,function(t){var e=!!t&&(!0===t?"内容不正确":l.trimToNull(t));T.call(r,i,e,n)})}else T.call(this,i,!1,n)}},w=function(t){var e=t.data("validate");if(!e){var i=t.children(".ui-fn[name='validate']");if(i&&0<i.length){var n=i.text();l.isNotBlank(n)&&(e=new Function("var Utils=VRender.Utils;return ("+unescape(n)+");")()),i.remove()}e||(e="1"),t.data("validate",e)}return e},T=function(t,e,i){e?C.call(this,t,e):x.call(this,t),l.isFunction(i)&&i(e)},C=function(t,e){t.addClass("is-error");var i=t.children(".errmsg");i&&0!=i.length||(i=$("<div class='errmsg'></div>").appendTo(t)),i.html(e),i.removeClass("animate-in").removeClass("animate-out"),setTimeout(function(){i.addClass("animate-in")},0),this.isRenderAsApp()||I.call(this,t)},x=function(t){if(D.call(this,t),t.is(".is-error")){var e=t.children(".errmsg");e.addClass("animate-out"),setTimeout(function(){t.removeClass("is-error"),e.removeClass("animate-in").removeClass("animate-out")},300)}},I=function(t){D.call(this,t);var e=setTimeout(function(){t.removeAttr("t-err"),t.children(".errmsg").addClass("animate-out")},3e3);t.attr("t-err",e)},D=function(t){var e=parseInt(t.attr("t-err"));e&&(clearTimeout(e),t.removeAttr("t-err"))},R=function(e,i){var n=this.getFormData(),s=this.getMethod();A.call(this,n,function(t){t?i(t,null,n):/post|put|delete/.test(s)?VRender.send(e,n,function(t,e){i(t,e,n)}):VRender.fetch(e,n,function(t,e){i(t,e,n)})})},A=function(t,e){var i={type:"action_before"};this.trigger(i,t),i.isPreventDefault?e("canceled"):e()},V=function(t,e){this.form=t,this.item=e},
N=V.prototype=new Object;N.getName=function(){return this.item.attr("name")},N.setName=function(t){this.item.attr("name",l.trimToEmpty(t))},N.getLabel=function(){return this.item.children(".content").children("dt").text()||""},N.setLabel=function(t){this.item.children(".content").children("dt").text(l.trimToEmpty(t))},N.getContent=function(){var t=this.item.children(".content").children("dd").children().children();return t.is("input, textarea")?t:o.get(t)||t},N.setContent=function(t){this.item.removeClass("is-error"),this.item.children(".errmsg").remove();var e=this.item.children(".content").children("dd").children().empty();l.isNotNull(t)&&e.append(t.$el||t)},N.isRequired=function(){return 1==this.item.attr("opt-required")},N.setRequired=function(t){l.isNull(t)||l.isTrue(t)?this.item.attr("opt-required","1"):this.item.removeAttr("opt-required")},N.isVisible=function(){return 1==this.item.attr("opt-hide")},N.setVisible=function(t){l.isNull(t)||l.isTrue(t)?this.item.removeAttr("opt-hide"):this.item.attr("opt-hide","1")},N.getEmptyMsg=function(){return this.item.attr("opt-empty")},N.setEmptyMsg=function(t){this.item.attr("opt-empty",l.trimToEmpty(t))},N.getColspan=function(){var t=parseInt(this.item.attr("opt-col"))||1;return Math.max(t,1)},N.setColspan=function(t){var e=parseInt(t)||1;e=Math.max(e,1),this.item.attr("opt-col",e);var i=this.form.getColumns();1<i&&e<i?this.item("width",(100*e/i).toFixed(6)+"%"):this.item("width","")},N.getValidate=function(){var t=w.call(this.form,this.item);return l.isFunction(t)?t:null},N.setValidate=function(t){this.item.data("validate",l.isFunction(t)?t:"1"),this.item.children(".ui-fn[name='validate']").remove()},o.register(".ui-formview",i)}}(),function(r){if(r||!VRender.Component.Render.popupmenu){var a=r?require(__vrender__).Utils:VRender.Utils,o=r?require("./_base"):VRender.Component.Render,t=function(t,e){o._item.call(this,t,e)},e=t.prototype=new o._item;e.render=function(t,e){e.addClass("ui-popupmenu"),o._item.render.call(this,t,e);var i=this.options||{};if(r){var n=i.actionTarget;n&&("string"==typeof n?e.attr("opt-target",a.trimToEmpty(n)):a.isFunction(n.getViewId)&&e.attr("opt-target","[vid='"+n.getViewId()+"']")),i.actionType&&e.attr("opt-trigger",i.actionType);var s=i.iconFunction;a.isFunction(s)?o.fn.renderFunction(e,"icfunc",s):i.iconField&&e.attr("opt-ic",i.iconField),i.childrenField&&e.attr("opt-child",i.childrenField),i.disabledField&&e.attr("opt-disable",i.disabledField),i.offsetLeft&&e.attr("opt-offsetl",i.offsetLeft),i.offsetTop&&e.attr("opt-offsett",i.offsetTop)}return this},e._renderItems=function(t,e){},e._renderEmptyView=function(){},e._renderLoadView=function(){},e._doAdapter=function(t,e){if(a.isArray(t)){var i=this,n=a.map(t,function(t){return o.fn.doAdapter.call(i,t)});return t.title&&(r?n.unshift({__group__:t.title}):n.title=t.title),n}return o.fn.doAdapter.call(this,t,e)},r?module.exports=t:VRender.Component.Render.popupmenu=t}}("undefined"==typeof VRender),function(){if(!VRender.Component.PopupMenu){var o=VRender.Utils,l=VRender.Component,t=l.Render,e=t.popupmenu,i=window.UIPopupMenu=l.PopupMenu=function(t,e){return l.base.isElement(t)?this.init(t,e)!=this?l.get(t):(this.options.autoLoad=!1,this.setActionTarget(this.getActionTarget()),this.$el.on("tap",r.bind(this)),this.$el.on("tap",".menu",a.bind(this)),this.$el.on("tap",".more",d.bind(this)),void(this.isRenderAsApp()?this.$el.on("tap",".back",c.bind(this)):(this.$el.on("mouseenter",".menu",u.bind(this)),this.$el.on("mouseleave",".menu",h.bind(this)),this.$el.on("mouseenter",".menu-container > .btn",p.bind(this)),this.$el.on("mouseleave",".menu-container > .btn",f.bind(this))))):i.create(t)},n=i.prototype=new l.item;i.find=function(t){return l.find(t,".ui-popupmenu",i)},i.create=function(t){return l.create(t,i,e)},n.open=function(){var t=this.$el.show();if(m.call(this,t),this.isRenderAsApp())$("body").addClass("ui-scrollless"),setTimeout(function(){t.addClass("animate-open")},0);else{var e=this;setTimeout(function(){$("body").on("tap._"+e.getViewId(),function(){e.close(),e.trigger("cancel")})},0)}},n.close=function(){var t=this.$el;this.isRenderAsApp()?($("body").removeClass("ui-scrollless"),t.removeClass("animate-open"),t.children(".menu-container").last().height(0),setTimeout(function(){t.empty().hide()},300)):(t.empty().hide(),$("body").off("tap._"+this.getViewId()))},n.destory=function(){this.close();var t=this;setTimeout(function(){t.$el.remove()},300)},n.getActionTarget=function(){return this.options.hasOwnProperty("actionTarget")||(this.options.actionTarget=o.trimToNull(this.$el.attr("opt-target")),this.$el.removeAttr("opt-target")),this.options.actionTarget},n.setActionTarget=function(t){if(this.actionTarget!=t){var e=(o.trimToNull(this.getActionType())||"click")+"._"+this.getViewId();this.actionTarget&&("string"==typeof this.actionTarget?$("body").off(e,this.actionTarget):this.actionTarget.off(e)),this.actionTarget=t,this.actionTarget&&("string"==typeof this.actionTarget?$("body").on(e,this.actionTarget,s.bind(this)):(this.actionTarget=$(this.actionTarget),this.actionTarget.on(e,s.bind(this)))),this.$el.removeAttr("opt-target")}},n.getActionType=function(){return this.options.hasOwnProperty("actionType")||(this.options.actionType=o.trimToNull(this.$el.attr("opt-trigger")),this.$el.removeAttr("opt-trigger")),this.options.actionType},n.setActionType=function(t){this.options.actionType=t,this.$el.removeAttr("opt-trigger")},n.getIconField=function(){return this.options.hasOwnProperty("iconField")||(this.options.iconField=o.trimToNull(this.$el.attr("opt-ic"))||"icon",this.$el.removeAttr("opt-ic")),this.options.iconField},n.setIconField=function(t){this.options.iconField=t,this.$el.removeAttr("opt-ic")},n.getIconFunction=function(){return t.fn.getFunction.call(this,"iconFunction","icfunc")},n.setIconFunction=function(t){this.options.iconFunction=t,this.$el.children(".ui-fn[name='icfunc']").remove()},n.getOffsetLeft=function(){return this.options.hasOwnProperty("offsetLeft")||(this.options.offsetLeft=this.$el.attr("opt-offsetl"),this.$el.removeAttr("opt-offsetl")),this.options.offsetLeft?o.getFormatSize(this.options.offsetLeft,this.isRenderAsRem()):null},n.setOffsetLeft=function(t){this.options.offsetLeft=t,this.$el.removeAttr("opt-offsetl")},n.getOffsetTop=function(){return this.options.hasOwnProperty("offsetTop")||(this.options.offsetTop=this.$el.attr("opt-offsett"),this.$el.removeAttr("opt-offsett")),this.options.offsetTop?o.getFormatSize(this.options.offsetTop,this.isRenderAsRem()):null},n.setOffsetTop=function(t){this.options.offsetTop=t,this.$el.removeAttr("opt-offsett")},n._getChildrenField=function(){return"children"},n._getDisabledField=function(){return"disabled"},n._getIcon=function(t){var e=this.getIconFunction();if(o.isFunction(e))return e(t);var i=this.getIconField();return t&&i?t[i]:null},n._isDisabled=function(t){if(t){var e=this._getDisabledField();return!(!e||!o.isTrue(t[e]))}return!0},n._isChecked=function(t){return!!t&&!!t.checked},n._checkIfEmpty=function(){};var s=function(t){this._isMounted(this.$el)?this.open():this.setActionTarget(null)},r=function(t){return this.isRenderAsApp()&&$(t.target).is(".ui-popupmenu")&&(this.close(),this.trigger("cancel")),!1},a=function(t){var e=$(t.currentTarget);if(!e.is(".disabled"))if(e.is(".has-child"))this.isRenderAsApp()&&m.call(this,e);else{var i=R.call(this,e);if(i.toggle)if(i.checked)i.toggleRadio||(i.checked=!1);else{var n=this,s=function(t){t&&0<t.length&&o.each(t,function(t){o.isArray(t)?s(t):(t.toggle===i.toggle&&(t.checked=!1),s(V.call(n,t)))})};s(this.getData()),i.checked=!0}this.trigger("itemclick",i),this.close()}},d=function(t){var e=$(t.currentTarget),i=e.parent().parent().parent(),n=C.call(this),s=x.call(this);s.p_no=parseInt(e.attr("page-no"))||1,s.p_no+=1;var r=i.data("itemData");s.pid=this._getDataKey(r),e.parent().remove();var a=r?V.call(this,r):this.getData();a.pop();T.call(this,i,n,s,function(t,e){e&&0<e.length&&o.each(e,function(t){a.push(t)})})},c=function(t){var e=$(t.currentTarget).parent();e.height(0);var i=e.prev();i.height(0),setTimeout(function(){e.remove(),i.height(i.get(0).scrollHeight)},120)},u=function(t){var e=$(t.currentTarget);if(!e.is(".disabled")){var i=e.parent().parent().parent(),n=i.find(".hover");if(n&&0<n.length){n.removeClass("hover"),_.call(this,i);var s=parseInt(n.attr("t-hover"));s&&(clearTimeout(s),n.removeAttr("t-hover"))}e.addClass("hover"),e.is(".has-child")&&m.call(this,e)}},h=function(t){var e=$(t.currentTarget),i=e.data("submenu");if(!i||0==i.length){var n=setTimeout(function(){e.removeClass("hover"),e.removeAttr("t-hover")},100);e.attr("t-hover",n)}},p=function(t){var a=$(t.currentTarget),o=a.parent();o.attr("t_scroll",setTimeout(function(){var e=o.children(".menus"),i=o.height()-e.height(),n=parseInt(o.attr("scroll-top"))||0,s=a.is(".up")?5:-5,r=function(){var t=setTimeout(function(){var t=n+s;a.is(".up")?0<t&&(t=0):t<i&&(t=i),n!=t&&(n=t,o.attr("scroll-top",n),e.css("transform","translate(0px, "+n+"px)")),r()},50);o.attr("t_scroll",t)};r()},200))},f=function(t){var e=$(t.currentTarget).parent(),i=parseInt(e.attr("t_scroll"));i&&(clearTimeout(i),e.removeAttr("t_scroll"))},m=function(t){var e=R.call(this,t),i=A.call(this,t),n=g.call(this,t,e,i);if(o.isNull(n)){if(!w.call(this,t))return}else if(!(n&&0<n.length||w.call(this,t)))return;var s=$("<div class='menu-container'></div>").appendTo(this.$el);s.append("<div class='btn up'></div><div class='btn down'></div>"),this.isRenderAsApp()&&!I(t)&&$("<div class='back'></div>").appendTo(s).text(this.options.backText||"返回");var r=$("<div class='menus'></div>").appendTo(s);b.call(this,r,n),t.data("submenu",s),s.data("itemData",e),v.call(this,t,s),this.trigger("open",e)},g=function(t,e,i){var n={type:"open_before"};this.trigger(n,e,i),n.hasOwnProperty("returnValue")&&(i=n.returnValue);var s=i?o.toArray(i):null;e&&(e[this._getChildrenField()]=s);return s},v=function(t,e){if(this.isRenderAsApp());else{var i=I(t);if(i)e.css("left",this.getOffsetLeft()||""),e.css("top",this.getOffsetTop()||"");else(n=t.offset()).top-=3,n.left+=t.outerWidth()+1,e.offset(n);var n,s=(n=o.offset(e)).windowHeight;if(i&&(s-=n.top),e.css("maxHeight",s+"px"),!i){var r=e.offset();n.isOverflowX&&(
r.left-=n.width+t.outerWidth()),n.isOverflowY&&(r.top-=n.top+n.height-n.windowHeight),e.offset({left:r.left,top:r.top})}e.height()<e.children(".menus").height()&&e.addClass("scroll").css("minHeight","80px")}},b=function(n,t){if(t&&0!=t.length){var s=this,r=n.children(".grp").last();if(o.each(t,function(t,e){if(o.isArray(t)&&0<t.length)r=$("<div class='grp'></div>").appendTo(n),t.title&&$("<div class='title'></div>").appendTo(r).text(t.title),o.each(t,function(t,e){if(0===e&&t.__group__)$("<div class='title'></div>").appendTo(r).text(t.__group__);else if("more"==t.__type__){var i=$("<div class='more'></div>").appendTo(r);i.attr("page-no",t.page),i.text(s.options.moreText||"加载更多")}else{var n=$("<div class='menu'></div>").appendTo(r);y.call(s,n,t)}}),r=null;else{r&&0!=r.length||(r=$("<div class='grp'></div>").appendTo(n));var i=$("<div class='menu'></div>").appendTo(r);y.call(s,i,t)}}),this.isRenderAsApp()){var e=n.parent();e.height(0),setTimeout(function(){e.height(e.get(0).scrollHeight)},0)}}},y=function(t,e){t.data("itemData",e);var i=this._getIcon(e);o.isNotBlank(i)&&$("<i></i>").appendTo(t).css("backgroundImage","url("+i+")");var n=$("<div></div>").appendTo(t),s=this.getItemRenderer();if(o.isFunction(s)){var r=s($,n,e);o.isNotNull(r)&&n.empty().append(r)}else{var a=this._getDataLabel(e);n.text(o.trimToEmpty(a))}V.call(this,e)&&t.addClass("has-child"),this._isDisabled(e)&&t.addClass("disabled").attr("disabled","disabled"),this._isChecked(e)&&t.addClass("checked")},_=function(t){for(var e=this.$el.children(".menu-container"),i=t.index(),n=e.length-1;0<=n;n--){if(n<=i)return;e.eq(n).remove()}},w=function(r){var t=C.call(this);if(o.isBlank(t))return!1;var e=x.call(this)||{};e.p_no=1,e.pid=D.call(this,r);var a=this;return setTimeout(function(){var s=r.data("submenu");T.call(a,s,t,e,function(t,e){var i=!1;if(e&&0!=e.length||(i=!0,(e=[{label:"没有选项"}])[0][a._getDisabledField()]=!0),I(r))a.options.data=e;else{var n=R.call(a,r);n&&(n[a._getChildrenField()]=e)}i&&b.call(a,s.children(".menus"),e)})},0),!0},T=function(t,e,i,n){var s=t.children(".menus"),r=$("<div class='grp'></div>").appendTo(s);$("<div class='loading'></div>").appendTo(r).append(this.options.loadingText||"正在加载...");var a=this;l.load.call(this,e,i,function(t,e){r.remove();var i=t?null:o.toArray(e);i&&0<i.length&&(i[0].children=[],a.hasMore()&&i.push([{__type__:"more",page:a._pageInfo.page}]),b.call(a,s,i)),n(t,i)})},C=function(){return this.lastLoadApi?this.lastLoadApi:this.options.hasOwnProperty("api")?this.options.api:this.$el.attr("api-name")},x=function(){if(this.lastLoadParams)return this.lastLoadParams;if(this.options.hasOwnProperty("params"))return this.options.params;try{return JSON.parse(this.$el.attr("api-params")||null)}catch(t){}return null},I=function(t){return t.is(".ui-popupmenu")},D=function(t){return this._getDataKey(R.call(this,t))},R=function(t){return I(t)?null:t.data("itemData")},A=function(t){if(I(t))return this.getData();var e=R.call(this,t);return V.call(this,e)},V=function(t){if(t){var e=this._getChildrenField();if(o.isArray(t[e]))return t[e]}return null};l.register(".ui-popupmenu",i)}}(),function(r){if(r||!VRender.Component.Render.checkgroup){var a=r?require(__vrender__).Utils:VRender.Utils,n=r?require("./_base"):VRender.Component.Render,o=r?require("../../../ui/component/UICheckbox"):VRender.Component.Checkbox,t=function(t,e){n._select.call(this,t,e)},e=t.prototype=new n._select;e.render=function(t,e){e.addClass("ui-chkgrp"),n._select.render.call(this,t,e)},e.renderSelection=function(t,e){var i=this.getSelectedIndex(!0);i&&e.attr("data-inds",i.join(","));var n=this.getSelectedKey(!0);n&&e.attr("data-ids",n.join(","))},e.isMultiple=function(){return!0},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&s.call(this,t,i)},e._renderOneItem=function(t,e,i,n){l.call(this,t,e,i,n)},e._getNewItem=function(t,e){return i.call(this,t,e)},e._renderEmptyView=function(){},e._renderLoadView=function(){};var i=function(t,e){return t("<div class='item'></div>").appendTo(e)},s=function(t,e,i){this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],n._item.renderItems.call(this,t,e,i),delete this._cache_selected_indexs,delete this._cache_selected_ids},l=function(t,e,i,n){"string"==typeof i&&(i={label:i});var s=a.extend({},i);return s.value=this._getDataKey(i),s.label=this._getDataLabel(i,n),s.checked=this._isSelected(i,n,this._cache_selected_indexs,this._cache_selected_ids),r?new o(this.context,s).render(e):(s.target=e,o.create(s))};r?module.exports=t:(t.getNewItem=i,t.renderItems=s,t.renderOneItem=l,VRender.Component.Render.checkgroup=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.CheckGroup){var n=VRender.Utils,s=VRender.Component,r=s.Render,a=r.checkgroup,i=window.UICheckGroup=s.CheckGroup=function(t,e){return s.base.isElement(t)?this.init(t,e)!==this?s.get(t):void this.$el.on("change","input",o.bind(this)):i.create(t)},t=i.prototype=new s.select;i.find=function(t){return s.find(t,".ui-chkgrp",i)},i.create=function(t){return s.create(t,i,a)},t.setSelectedIndex=function(t){var e=this._snapshoot(),i=r.fn.getIntValues(t,0)||[];n.each(this.$el.children(),function(t,e){s.get(t.children()).setChecked(0<=i.indexOf(e))}),e.done()},t.isMultiple=function(){return!0},t.isDisabled=function(t){if("number"==typeof t){var e=s.get(this._getItemAt(t).children());return!!e&&e.isDisabled()}return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled")},t.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));if("number"==typeof e){var i=s.get(this._getItemAt(e).children());i&&i.setDisabled(t)}else(t=!(!n.isNull(t)&&!n.isTrue(t)))?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")},t._getItems=function(){return this.$el.children()},t._getNewItem=function(t,e,i,n){return a.getNewItem.call(this,t,e,i,n)},t._renderItems=function(t,e,i){a.renderItems.call(this,t,e,i)},t._renderOneItem=function(t,e,i,n){a.renderOneItem.call(this,t,e,i,n)};var o=function(t){t.stopPropagation();var e=this._snapshoot(),i=[];n.each(this.$el.find("input"),function(t,e){t.is(":checked")&&i.push(e)}),s.select.setSelectedIndex.call(this,i),e.done()};s.register(".ui-chkgrp",i)}}(),function(r){if(r||!VRender.Component.Render.radiogroup){var a=r?require(__vrender__).Utils:VRender.Utils,n=r?require("./_base"):VRender.Component.Render,o=r?require("../../../ui/component/UIRadiobox"):VRender.Component.Radiobox,i=1,t=function(t,e){n._select.call(this,t,e)},e=t.prototype=new n._select;e.render=function(t,e){e.addClass("ui-radgrp"),this.radioGroupId="rad-"+a.randomTxt(r?3:4)+i++,n._select.render.call(this,t,e)},e.renderSelection=function(t,e){var i=this.getSelectedIndex(!0);i&&e.attr("data-inds",i.join(","));var n=this.getSelectedKey(!0);n&&e.attr("data-ids",n.join(","))},e.isMultiple=function(){return!1},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&l.call(this,t,i)},e._renderOneItem=function(t,e,i,n){d.call(this,t,e,i,n)},e._getNewItem=function(t,e){return s.call(this,t,e)},e._renderEmptyView=function(){},e._renderLoadView=function(){};var s=function(t,e){return t("<div class='item'></div>").appendTo(e)},l=function(t,e,i){this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],n._item.renderItems.call(this,t,e,i),delete this._cache_selected_indexs,delete this._cache_selected_ids},d=function(t,e,i,n){a.isPrimitive(i)&&(i={label:i});var s=a.extend({},i);return s.name=this.radioGroupId,s.value=this._getDataKey(i),s.label=this._getDataLabel(i,n),s.checked=this._isSelected(i,n,this._cache_selected_indexs,this._cache_selected_ids),r?new o(this.context,s).render(e):(s.target=e,o.create(s))};r?module.exports=t:(t.getNewItem=s,t.renderOneItem=d,VRender.Component.Render.radiogroup=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.RadioGroup){var n=VRender.Utils,s=VRender.Component,r=s.Render.radiogroup,i=window.UIRadioGroup=s.RadioGroup=function(t,e){return s.base.isElement(t)?this.init(t,e)!==this?s.get(t):void this.$el.on("change","input",a.bind(this)):i.create(t)},t=i.prototype=new s.select;i.find=function(t){return s.find(t,".ui-radgrp",i)},i.create=function(t){return s.create(t,i,r)},t.setSelectedIndex=function(t){var e=this._snapshoot(),i=n.getIndexValue(t);0<=i?s.get(this.$el.children().eq(i).children()).setChecked(!0):0<=e.selectedIndex&&s.get(this.$el.children().eq(e.selectedIndex).children()).setChecked(!1),e.done()},t.isMultiple=function(){return!1},t.isDisabled=function(t){if("number"==typeof t){var e=s.get(this._getItemAt(t).children());return!!e&&e.isDisabled()}return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled")},t.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));if("number"==typeof e){var i=s.get(this._getItemAt(e).children());i&&i.setDisabled(t)}else(t=!(!n.isNull(t)&&!n.isTrue(t)))?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")},t._getItems=function(){return this.$el.children()},t._getNewItem=function(t,e,i,n){return r.getNewItem.call(this,t,e,i,n)},t._renderItems=function(t,e,i){r.renderItems.call(this,t,e,i)},t._renderOneItem=function(t,e,i,n){r.renderOneItem.call(this,t,e,i,n)};var a=function(t){t.stopPropagation();var e=this._snapshoot(),i=n.index(this.$el.find("input"),function(t){return t.is(":checked")});s.select.setSelectedIndex.call(this,i),e.done()};s.register(".ui-radgrp",i)}}(),function(t){if(t||!VRender.Component.Render.group){var c=t?require(__vrender__).Utils:VRender.Utils,s=t?require("./_base"):VRender.Component.Render,u=function(t,e){s._base.call(this,t,e)},e=u.prototype=new s._base;u.VERTICAL="vertical",u.HORIZONTIAL="horizontial",e.render=function(t,e){s._base.render.call(this,t,e),e.addClass("ui-group");var i=this.options||{},n=i.orientation;return n!==u.HORIZONTIAL&&n!==u.VERTICAL||(e.addClass(n),e.attr("opt-orientation",n)),e.attr("opt-gap",i.gap),e.attr("opt-align",i.align),this.renderSubViews(t,e),this},e.renderSubViews=function(t,e){i.call(this,t,e,
this.getChildren())},e.getChildren=function(){return this.options.children||this.options.subViews||this.options.views};var i=function(t,e,i){i=c.toArray(i),c.each(i,function(t){c.isNotNull(t)&&(c.isFunction(t.render)?t.render(e):e.append(t.$el||t))}),n.call(this,t,e)},n=function(t,e){var i="",n="",s="",r="",a=c.getFormatSize(e.attr("opt-gap"),this.isRenderAsRem())||"",o=e.attr("opt-orientation");o==u.HORIZONTIAL?i=a:n=a;var l=e.attr("opt-align")||"";l=l.toLowerCase(),/left/.test(l)?s="left":/center/.test(l)?s="center":/right/.test(l)&&(s="right"),/top/.test(l)?r="top":/middle/.test(l)?r="middle":/bottom/.test(l)&&(r="bottom"),e.css("text-align",s);var d=e.children();d.css("vertical-align",r),d.css("margin-left",i).css("margin-top",n),d.eq(0).css("margin-left","").css("margin-top","")};t?module.exports=u:(u.showSubViews=i,u.updateLayout=n,VRender.Component.Render.group=u)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Group){var a=VRender.Utils,i=VRender.Component,e=i.Render.group,n=window.UIGroup=i.Group=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):void 0:n.create(t)},t=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-group",n)},n.create=function(t){return i.create(t,n,e)},t.setOrientation=function(t){this.$el.removeClass(e.HORIZONTIAL).removeClass(e.VERTICAL),this.$el.removeAttr("opt-orientation"),t!==e.HORIZONTIAL&&t!==e.VERTICAL||this.$el.addClass(t).attr("opt-orientation",t),s.call(this)},t.setGap=function(t){this.$el.attr("opt-gap",a.trimToEmpty(t)),s.call(this)},t.setAlign=function(t){this.$el.attr("opt-align",a.trimToEmpty(t)),s.call(this)},t.append=function(t){if(!arguments||0==arguments.length)return this;for(var e=0,i=arguments.length;e<i;e++){var n=arguments[e];if(a.isArray(n))for(var s=0,r=n.length;s<r;s++)this.add(n[s]);else this.add(n)}return this},t.add=function(t,e){if(a.isNotBlank(t)){e=isNaN(e)||""===e?-1:parseInt(e);var i=this.$el.children();0<=e&&e<i.length?i.eq(e).before(t.$el||t):this.$el.append(t.$el||t),s.call(this)}return t},t.removeAt=function(t){var e=this.$el.children().eq(t).remove();return s.call(this),e};var s=function(){a.debounce(e.updateLayout.bind(this),0,$,this.$el)};i.register(".ui-group",n)}}(),function(t){if(t||!VRender.Component.Render.container){var r=t?require(__vrender__).Utils:VRender.Utils,a=t?require("./_base"):VRender.Component.Render,e=function(t,e){a._base.call(this,t,e)};(e.prototype=new a._base).render=function(t,e){a._base.render.call(this,t,e),e.addClass("ui-container");var i=this.options&&this.options.styles||{},n=this.isRenderAsRem();o(e,"display",i.display),o(e,"position",i.position),o(e,"padding",i.padding,n),o(e,"padding-left",i.paddingLeft,n),o(e,"padding-right",i.paddingRight,n),o(e,"padding-top",i.paddingTop,n),o(e,"padding-bottom",i.paddingBottom,n),o(e,"margin",i.margin,n),o(e,"margin-left",i.marginLeft,n),o(e,"margin-right",i.marginRight,n),o(e,"margin-top",i.marginTop,n),o(e,"margin-bottom",i.marginBottom,n),o(e,"border",i.border,n),o(e,"border-radius",i.borderRadius,n),o(e,"border-color",i.borderColor),o(e,"border-width",i.borderWidth,n),o(e,"border-left",i.borderLeft,n),o(e,"border-right",i.borderRight,n),o(e,"border-top",i.borderTop,n),o(e,"border-bottom",i.borderBottom,n),o(e,"background",i.bg||i.background),o(e,"background-color",i.bgcolor||i.backgroundColor),o(e,"background-image",i.image||i.backgroundImage),o(e,"background-size",i.backgroundSize),o(e,"background-position",i.backgroundPosition),o(e,"background-repeat",i.backgroundRepeat),o(e,"width",i.width,n),o(e,"min-width",i.minWidth,n),o(e,"max-width",i.maxWidth,n),o(e,"height",i.height,n),o(e,"min-height",i.minHeight,n),o(e,"max-height",i.maxHeight,n),o(e,"overflow",i.overflow),o(e,"color",i.color),o(e,"font-size",i.fontSize,n),o(e,"text-align",i.align||i.textAlign),o(e,"box-shadow",i.shadow);var s=this.options.content||this.options.view;return r.isNotBlank(s)&&(r.isFunction(s.render)?s.render(e):e.append(s.$el||s)),this};var o=function(t,e,i,n){r.isNotBlank(i)&&(isNaN(i)||(i=r.getFormatSize(i,n)),t.css(e,i))};t?module.exports=e:VRender.Component.Render.container=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.Container){VRender.Utils;var i=VRender.Component,e=i.Render.container,n=window.UIContainer=i.Container=function(t,e){return i.base.isElement(t)?this.init(t,e)!=this?i.get(t):void 0:n.create(t)};n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-container",n)},n.create=function(t){return i.create(t,n,e)}}}(),function(t){if(t||!VRender.Component.Render.panel){var d=t?require(__vrender__).Utils:VRender.Utils,i=t?require("./_base"):VRender.Component.Render,e=function(t,e){i._base.call(this,t,e)},n=e.prototype=new i._base;n.render=function(t,e){return e.addClass("ui-panel"),i._base.render.call(this,t,e),this._viewports=u.call(this,this.options.viewports),s.call(this,t,e),r.call(this,t,e),this},n.getTitle=function(){return this.options.hasOwnProperty("title")?this.options.title:!(this._viewports&&0<this._viewports.length)&&"标题"};var s=function(t,e){var i=this.options||{},n=t("<header></header>").appendTo(e);if(i.focusHtmlTitle)t("<div class='title'></div>").appendTo(n).html(i.focusHtmlTitle);else{var s=this.getTitle();!1!==s&&d.isNotBlank(s)&&t("<div class='title'></div>").appendTo(n).text(s)}a.call(this,t,e,this._viewports);var r=d.toArray(this.options.buttons);o.call(this,t,e,r)},a=function(n,t,e){var i=t.children("header");if(i.children(".tabbar").remove(),e&&0<e.length){var s=n("<div class='tabbar'></div>").prependTo(i);i.children(".title").after(s),s.append("<div class='thumb'></div>");var r=d.getIndexValue(this.options.viewIndex);d.each(e,function(t,e){var i=n("<div class='tab'></div>").appendTo(s);i.attr("name",t.name),t.focusHtmlLabel?i.html(t.focusHtmlLabel):n("<span></span>").appendTo(i).text(t.label||t.name),e==r&&i.addClass("selected")})}},o=function(e,t,i){var n=t.children("header");if(n.children(".btnbar").remove(),i&&0<i.length){var s=this,r=e("<div class='btnbar'></div>").appendTo(n);this.isRenderAsApp()?(r.append("<button class='popbtn'>&nbsp;</button>"),t.attr("data-btns",JSON.stringify(i))):d.each(i,function(t){l.call(s,e,r,t)})}},l=function(s,t,r){if(!d.isBlank(r)){"string"==typeof r&&(r={name:r});var e=s("<div class='item'></div>").appendTo(t);e.attr("name",d.trimToNull(r.name));var a=d.isTrue(r.toggle);a&&e.attr("opt-toggle","1"),d.isNotBlank(r.tooltip)&&e.attr("title",r.tooltip);var i=s("<button class='btn'></button>").appendTo(e);if(r.icon){var n=s("<i>&nbsp;</i>").appendTo(i);"string"==typeof r.icon&&n.css("backgroundImage","url("+r.icon+")")}if(!r.icon||!1!==r.label)s("<span></span>").appendTo(i).text(d.trimToNull(r.label)||"按钮");if(d.isArray(r.items)&&0<r.items.length){var o=s("<ul></ul>").appendTo(e.attr("has-dropdown","1")),l=!1;d.each(r.items,function(t,e){var i=s("<li></li>").appendTo(o);i.attr("name",d.trimToNull(t.name)),d.isNotBlank(t.icon)&&(l=!0,s("<i>&nbsp;</i>").appendTo(i).css("backgroundImage","url("+t.icon+")"));var n=d.trimToNull(t.label);s("<span></span>").appendTo(i).text(n||"选项"),a&&n&&n==r.label&&i.addClass("active")}),l&&o.attr("show-ic","1")}}},r=function(t,e,i){var n=t("<section></section>").appendTo(e);n=t("<div class='container'></div>").appendTo(n);var s=t("<div></div>").appendTo(n),r=this.options.content||this.options.view;d.isNotNull(r)&&(d.isFunction(r.render)?r.render(s):s.append(r.$el||r)),i=i||this._viewports,c.call(this,t,n,i),0==n.children(".selected").length&&s.addClass("selected")},c=function(n,s,t){if(s.children(":not(:first-child)").remove(),t&&0<t.length){var r=d.getIndexValue(this.options.viewIndex);d.each(t,function(t,e){if(contentView=t.content||t.view,d.isNotNull(contentView)){var i=n("<div></div>").appendTo(s);i.attr("name",t.name),e==r&&i.addClass("selected"),d.isFunction(contentView.render)?contentView.render(i):i.append(contentView.$el||contentView)}})}},u=function(t){var i=[];return d.each(d.toArray(t),function(t,e){d.isNotBlank(t)&&"object"==typeof t&&(t.name=t.name||"view_"+e,i.push(t))}),i};t?module.exports=e:(e.renderTabs=a,e.renderButtons=o,e.renderViewports=c,e.getFormatViewports=u,VRender.Component.Render.panel=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Panel){var l=VRender.Utils,i=VRender.Component,n=i.Render.panel,s=window.UIPanel=i.Panel=function(t,e){return i.base.isElement(t)?this.init(t,e)!=this?i.get(t):(this.header=this.$el.children("header"),this.container=this.$el.children("section").children(),this.header.on("tap",".tabbar > .tab",c.bind(this)),this.isRenderAsApp()?this.header.on("tap",".btnbar > .popbtn",a.bind(this)):(this.header.on("tap",".btnbar > .item > .btn",r.bind(this)),this.header.on("tap",".btnbar > .item > ul > li",d.bind(this))),void u.call(this)):s.create(t)},t=s.prototype=new i.base;s.find=function(t){return i.find(t,".ui-panel",s)},s.create=function(t){return i.create(t,s,n)},t.getTitle=function(){return this.header.children(".title").text()},t.setTitle=function(t){if(l.isNotNull(t)){t=l.trimToEmpty(t);var e=this.header.children(".title");e&&0<e.length?t?e.empty().append(t):e.remove():t&&(e=$("<div class='title'></div>").prependTo(this.header)).append(t)}},t.getButtons=function(){if(this.options.hasOwnProperty("buttons"))return l.toArray(this.options.buttons);var t=this.$el.attr("data-btns");if(t)try{t=JSON.parse(t)}catch(t){}return this.$el.removeAttr("data-btns"),this.options.buttons=l.toArray(t),t},t.setButtons=function(t){this.options.buttons=t,n.renderButtons.call(this,$,this.$el,l.toArray(t)),this.popupMenu&&(this.popupMenu.destory(),this.popupMenu=null)},t.setViewports=function(t,e){var i=n.getFormatViewports.call(this,t);n.renderTabs.call(this,$,this.$el,i),n.renderViewports.call(this,$,this.container,i),this.setViewActive(e)},t.isViewActive=function(e){var t=l.find(this.header.find(".tabbar .tab"),function(t){return t.attr("name")==e});return t&&t.is(".selected")},t.getViewActive=function(){var t=this.header.find(".tabbar .selected");return t&&t.attr("name")},t.setViewActive=function(t){l.isNotBlank(t)&&h.call(this,t)};var r=function(t){var e=$(t.currentTarget),i=e.parent();1==i.attr("has-dropdown")?f.call(this,i):1==i.attr("opt-toggle")&&i.toggleClass("active");var n=i.attr("name")
;l.isNotBlank(n)&&this.trigger("btnclick",n,e.is(".active"))},a=function(t){if(this.popupMenu)this.popupMenu.open();else{var e=g.call(this,this.getButtons());e&&0<e.length&&(this.popupMenu=new i.PopupMenu({target:this.$el,data:e}),this.popupMenu.on("itemclick",o.bind(this))),this.popupMenu&&this.popupMenu.open()}},o=function(t,e){e&&l.isNotBlank(e.name)&&this.trigger("btnclick",e.name,!!e.checked)},d=function(t){var e=$(t.currentTarget),i=e.parent().parent();if(1==i.attr("opt-toggle")&&!e.is(".active")){e.addClass("active").siblings().removeClass("active");var n=i.children(".btn"),s=n.children("span");s&&0<s.length&&s.text(e.children("span").text());var r=n.children("i");if(r&&0<r.length){r.attr("data-src")||r.attr("data-src",r.css("backgroundImage"));var a=e.children("i").css("backgroundImage")||r.attr("data-src");r.css("backgroundImage",a)}}m.call(this,i);var o=e.attr("name");l.isNotBlank(o)&&this.trigger("btnclick",o,e.is(".active"))},e=function(t){var e=$(t.currentTarget),i=parseInt(e.attr("timerid"));if(i&&(clearTimeout(i),e.removeAttr("timerid")),"mouseleave"==t.type){var n=this;i=setTimeout(function(){e.removeAttr("timerid"),m.call(n,e)},400),e.attr("timerid",i)}},c=function(t){var e=$(t.currentTarget);e.is(".selected")||h.call(this,e.attr("name"))},u=function(){this.getButtons();var t=this.header.find(".tabbar .tab.selected");t&&0<t.length&&p.call(this,t)},h=function(e){var t=this.header.find(".tabbar .tab"),i=l.find(t,function(t){return t.attr("name")==e});if(i&&0!=i.length&&!i.is(".selected")){var n=t.filter(".selected").removeClass("selected");i.addClass("selected"),p.call(this,i);var s=this.container.children(),r=l.find(s,function(t){return t.attr("name")==e});if(r&&0!=r.length||(r=s.eq(0)),!r.is(".selected")){var a=s.filter(".selected"),o=n.index()<i.index();r.addClass("animate-in"),r.addClass(o?"animate-in-right":"animate-in-left"),a.addClass("animate-out"),setTimeout(function(){r.removeClass("animate-in-left animate-in-right"),a.addClass(o?"animate-out-left":"animate-out-right"),setTimeout(function(){r.addClass("selected").removeClass("animate-in"),a.removeClass("selected animate-out animate-out-left animate-out-right")},400)},0)}this.trigger("change",i.attr("name"),n.attr("name"))}},p=function(t){var e=this.header.children(".tabbar").children(".thumb");e&&0<e.length&&(e.css("left",t.position().left),e.css("width",t.outerWidth()))},f=function(t){t.is(".show-dropdown")||(t.addClass("show-dropdown"),t.on("mouseenter",e.bind(this)),t.on("mouseleave",e.bind(this)),setTimeout(function(){t.addClass("animate-in")},0))},m=function(t){t.addClass("animate-out"),t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown"),t.removeClass("animate-in").removeClass("animate-out")},300)},g=function(t){if(t&&0<t.length){var i=function(t){var e={};return e.name=t.name,e.label=t.label||t.name||"按钮",t.icon&&(e.icon=t.icon),t.toggle&&(e.toggle=t.toggle),t.disabled&&(e.disabled=t.disabled),e};return l.map(t,function(t){var e=i(t);return e.children=l.map(t.items,i),0==e.children.length&&delete e.children,e})}return null};i.register(".ui-panel",s)}}(),function(s){if(s||!VRender.Component.Render.paginator){var o=s?require(__vrender__).Utils:VRender.Utils,r=s?require("./_base"):VRender.Component.Render,e=function(t,e){r._base.call(this,t,e)},t=e.prototype=new r._base;e.getMode=function(t){return!1!==t&&("spread"==t||"dropdown"==t?t:"normal")},e.getShowNum=function(t){return 0<(t=parseInt(t)||0)?t:10},e.getSizes=function(t){if(t){var e=[];return o.each(o.toArray(t),function(t){0<(t=parseInt(t)||0)&&e.indexOf(t)<0&&e.push(t)}),0<e.length?e:null}return null},e.getStatus=function(t){return!0===t?"_default":!1===t?null:o.trimToNull(t)},e.getSkip=function(t){return o.isNull(t)||!0===t?"1":o.isArray(t)?o.trimToEmpty(t[0])+"♮"+o.trimToEmpty(t[1]):null},t.render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-paginator");var i=g.call(this);if(e.attr("data-no",i.pageNo),e.attr("data-size",i.pageSize),e.attr("data-pages",i.pageCount),e.attr("data-total",i.totalCount),e.attr("opt-mode",i.mode||""),e.attr("opt-nums",i.showNum),i.status&&e.attr("opt-status",i.status),i.skip&&e.attr("opt-skip",i.skip),1<i.pageSizes.length&&e.attr("opt-sizes",i.pageSizes.join(",")),a.call(this,t,e,i),s){var n=this.options.buttons;!1===n?e.attr("opt-btns",""):!0!==n&&o.isNotBlank(n)&&e.attr("opt-btns",JSON.stringify(n))}},t._getButtons=function(){return this.options.buttons};var a=function(t,e,i){var n=t("<div class='pagebar'></div>").appendTo(e);if(l.call(this,t,e,n,i),!this.isRenderAsApp()){if(1<i.pageSizes.length){var s=t("<div class='sizebar'></div>").appendTo(e);p.call(this,t,e,s,i)}if(o.isNotBlank(i.status)){var r=t("<div class='statusbar'></div>").appendTo(e);f.call(this,t,e,r,i)}if(o.isNotBlank(i.skip)){var a=t("<div class='skipbar'></div>").appendTo(e);m.call(this,t,e,a,i)}}},l=function(t,e,i,n){var s=v.call(this,"first");s&&t("<button class='btn first'></button>").appendTo(i).text(s);var r=v.call(this,"prev");r&&t("<button class='btn prev'></button>").appendTo(i).text(r),d.call(this,t,e,i,n);var a=v.call(this,"next");a&&t("<button class='btn next'></button>").appendTo(i).text(a);var o=v.call(this,"last");o&&t("<button class='btn last'></button>").appendTo(i).text(o),e.removeClass("is-first").removeClass("is-last"),n.isFirstPage&&e.addClass("is-first"),n.isLastPage&&e.addClass("is-last")},d=function(t,e,i,n){var s=n.mode;if(!1!==s&&"false"!==s){var r=t("<div class='pages'></div>").appendTo(i);"spread"==s?u.call(this,t,e,r,n):"dropdown"==s?h.call(this,t,e,r,n):c.call(this,t,e,r,n)}},c=function(t,e,i,n){var s=[];s.push("<span class='pageno'>"+n.pageNo+"</span>"),s.push("<span class='pagecount'>"+n.pageCount+"</span>"),i.html(s.join("/"))},u=function(t,e,i,n){var s=n.showNum;3<(s=0<s?s:10)&&this.isRenderAsApp()&&(s=3);var r=n.pageNo-Math.floor(s/2);r+s-1>n.pageCount&&(r=n.pageCount-s+1),r<1&&(r=1),i.removeClass("has-prev").removeClass("has-next"),1<r&&i.addClass("has-prev");for(var a=0;a<s&&r<=n.pageCount;a++){var o=t("<span class='page'></span>").appendTo(i);o.text(r),r==n.pageNo&&o.addClass("selected"),r+=1}r-1<n.pageCount&&i.addClass("has-next")},h=function(t,e,i,n){t("<div class='lbl'></div>").appendTo(i).text(n.pageNo+"/"+n.pageCount);for(var s=this.isRenderAsApp(),r=t("<div class='dropdown'></div>").appendTo(i),a=t("<ul></ul>").appendTo(r),o=1;o<=n.pageCount;o++){var l=t("<li class='page'></li>").appendTo(a);s?l.append("<span>"+o+"</span>"):l.text(o),o==n.pageNo&&l.addClass("selected")}},p=function(t,e,i,n){t("<div class='lbl'></div>").appendTo(i).text(n.pageSize);var s=t("<div class='dropdown'></div>").appendTo(i),r=t("<ul></ul>").appendTo(s);o.each(n.pageSizes,function(t){r.append("<li>"+t+"</li>")})},f=function(t,e,i,n){i.html(b.call(this,n.status,n))},m=function(t,e,i,n){var s=/♮/.test(n.skip)?n.skip.split("♮"):["",""];o.isBlank(s[0])&&n.status&&(s[0]="到第"),o.isNotBlank(s[0])&&t("<span class='txt t1'></span>").appendTo(i).text(s[0]),i.append("<input type='number'/>"),o.isBlank(s[1])&&n.status&&(s[1]="页"),o.isNotBlank(s[1])&&t("<span class='txt t2'></span>").appendTo(i).text(s[1]);var r=v.call(this,"skip")||"GO";t("<button class='btn skip'></button>").appendTo(i).text(r)},g=function(){var t={};return t.totalCount=parseInt(this.options.total)||0,t.totalCount=Math.max(0,t.totalCount),t.pageSize=parseInt(this.options.size)||0,t.pageSizes=e.getSizes(this.options.sizes)||[],t.pageSize<=0&&t.pageSizes&&0<t.pageSizes.length&&(t.pageSize=t.pageSizes[0]),t.pageSize<=0&&(t.pageSize=20),t.pageSizes.indexOf(t.pageSize)<0&&t.pageSizes.push(t.pageSize),t.pageSizes.sort(function(t,e){return t-e}),t.pageCount=Math.ceil(t.totalCount/t.pageSize)||1,t.pageNo=parseInt(this.options.page)||0,t.pageNo=Math.max(1,Math.min(t.pageNo,t.pageCount)),t.pageStart=Math.min((t.pageNo-1)*t.pageSize+1,t.totalCount),t.pageEnd=Math.min(t.pageNo*t.pageSize,t.totalCount),t.mode=e.getMode(this.options.mode),t.showNum=e.getShowNum(this.options.showNum),t.status=e.getStatus(this.options.status),t.skip=e.getSkip(this.options.skip),t.isFirstPage=1==t.pageNo,t.isLastPage=t.pageNo==t.pageCount,t},v=function(t){var e=this._getButtons();if(!1===e)return!1;var i=null;return o.isArray(e)&&("first"==t?i=e[0]:"prev"==t?i=e[1]:"next"==t?i=e[2]:"last"==t?i=e[3]:"skip"==t&&(i=e[4])),!1!==i&&(!0!==i&&o.isNotBlank(i)?""+i:"first"==t?"|<":"last"==t?">|":"prev"==t?"<":"next"==t?">":"skip"==t?"GO":""+t)},b=function(t,e){return!0===t||"_default"==t?"共"+e.totalCount+"条":(o.isNotBlank(t)&&(t=(t=(t=(t=(t=(t=t.replace(/\{pageNo\}/g,e.pageNo)).replace(/\{pageSize\}/g,e.pageSize)).replace(/\{pageCount\}/g,e.pageCount)).replace(/\{totalCount\}/g,e.totalCount)).replace(/\{pageStart\}/g,e.pageStart)).replace(/\{pageEnd\}/g,e.pageEnd)),o.trimToEmpty(t))};s?module.exports=e:(e.renderView=a,e.renderPageBar=l,e.renderPageSizeBar=p,e.renderPageStatusBar=f,VRender.Component.Render.paginator=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Paginator){var r=VRender.Utils,i=VRender.Component,a=i.Render,s=a.paginator,n=window.UIPaginator=i.Paginator=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.$el.on("tap","button.btn",o.bind(this)),this.$el.on("tap",".pagebar .page",l.bind(this)),this.$el.on("tap",".pagebar .lbl",d.bind(this)),void(this.isRenderAsApp()?this.$el.on("tap",".pagebar .dropdown",u.bind(this)):(this.$el.on("tap",".sizebar .lbl",h.bind(this)),this.$el.on("tap",".sizebar li",p.bind(this)),this.$el.on("keydown",".skipbar input",m.bind(this))))):n.create(t)},t=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-paginator",n)},n.create=function(t){return i.create(t,n,s)},t.set=function(t,e,i){var n=this._snapshoot();g.call(this,t,e,i),n.done()},t.getPage=function(){return parseInt(this.$el.attr("data-no"))||1},t.setPage=function(t){var e=this._snapshoot();g.call(this,null,t),e.done()},t.getSize=function(){return parseInt(this.$el.attr("data-size"))||0},t.setSize=function(t){g.call(this,null,null,t)},t.getTotal=function(){return parseInt(this.$el.attr("data-total"))||0},t.setTotal=function(t){var e=this._snapshoot();g.call(this,t),e.done()},t.getPageNo=function(){return this.getPage()},t.setPageNo=function(t){this.setPage(t)},
t.getPageCount=function(){return parseInt(this.$el.attr("data-pages"))||1},t.getMode=function(){return this.$el.attr("opt-mode")||!1},t.setMode=function(t){this.$el.attr("opt-mode",s.getMode(t)||""),b.call(this)},t.getSizes=function(){var t=this.$el.attr("opt-sizes")||"";return s.getSizes(t.split(","))},t.setSizes=function(t){var e=r.isArray(t)?t:null;e&&(e=s.getSizes(e)),e&&0<e.length?this.$el.attr("opt-sizes",e.join(",")):this.$el.removeAttr("opt-sizes"),b.call(this)},t.getShowNum=function(){return parseInt(this.$el.attr("opt-nums"))||s.getShowNum(-1)},t.setShowNum=function(t){0<(t=parseInt(t)||0)&&(this.$el.attr("opt-nums",t),b.call(this))},t.getStatus=function(){var t=this.$el.attr("opt-status");return"_default"===t?"共{totalCount}条":t||""},t.setStatus=function(t){(t=s.getStatus(t))?this.$el.attr("opt-status",t):this.$el.removeAttr("opt-status"),b.call(this)},t.getSkip=function(){var t=this.$el.attr("opt-skip");return 1==t||!!t&&t.split("♮")},t.setSkip=function(t){(t=s.getSkip(t))?this.$el.attr("opt-skip",t):this.$el.removeAttr("opt-skip"),b.call(this)},t.getButtons=function(){if(this.options.hasOwnProperty("buttons"))return this.options.buttons;var t=this.$el.attr("opt-btns");return""!==t&&(t?JSON.parse(t):null)},t.setButtons=function(t){this.options.buttons=t,this.$el.removeAttr("opt-btn"),b.call(this)},t._snapshoot_shoot=function(t){t.data={page:this.getPageNo(),size:this.getSize()}},t._snapshoot_compare=function(t){return t.data.page==this.getPageNo()},t._getButtons=function(){return this.getButtons()},t._isFirst=function(){return this.$el.is(".is-first")},t._isLast=function(){return this.$el.is(".is-last")};var o=function(t){var e=$(t.currentTarget);if(e.is(".disabled"))return!1;if(e.is(".skip")){var i=this.$el.find(".skipbar input"),n=parseInt(i.val())||0;0<n&&n!=this.getPageNo()&&this.setPageNo(n),i.val("")}else{var s=this.getPageNo();e.is(".prev")?this._isFirst()||this.setPageNo(s-1):e.is(".next")?this._isLast()||this.setPageNo(s+1):e.is(".first")?this._isFirst()||this.setPageNo(1):e.is(".last")&&(this._isLast()||this.setPageNo(this.getPageCount()))}},l=function(t){var e=$(t.currentTarget);if(e.is(".selected"))return!1;if("dropdown"==this.getMode()){_.call(this);var i=this;setTimeout(function(){i.setPageNo(e.text())},300)}else this.setPageNo(e.text());return!1},d=function(t){e.call(this)},c=function(t){a.fn.mouseDebounce(t,_.bind(this))},u=function(t){_.call(this)},h=function(t){w.call(this)},p=function(t){var e=parseInt($(t.currentTarget).text());e&&e!=this.getSize()&&this.setSize(e),T.call(this)},f=function(t){a.fn.mouseDebounce(t,T.bind(this))},m=function(t){if("keydown"==t.type){if(13==t.which){var e=$(t.currentTarget),i=parseInt(e.val())||0;return 0<i&&i!=this.getPageNo()&&this.setPageNo(i),e.val(""),!0}return r.isControlKey(t)||r.isNumberKey(t)}},g=function(t,e,i){t=Math.max(0,r.isBlank(t)||isNaN(t)?this.getTotal():parseInt(t)),e=Math.max(1,r.isBlank(e)||isNaN(e)?this.getPageNo():parseInt(e)),i=r.isBlank(i)||isNaN(i)?this.getSize():parseInt(i);var n=Math.ceil(t/i)||1;e=Math.min(e,n),this.$el.attr("data-total",t),this.$el.attr("data-size",i),this.$el.attr("data-no",e),this.$el.attr("data-pages",n),y.call(this),this.$el.find(".sizebar .lbl").text(i)},v=function(){var t={};return t.totalCount=this.getTotal(),t.pageSize=this.getSize(),t.pageSizes=this.getSizes()||[],t.pageSizes.indexOf(t.pageSize)<0&&t.pageSizes.push(t.pageSize),t.pageSizes.sort(function(t,e){return t-e}),t.pageNo=this.getPageNo(),t.pageCount=this.getPageCount(),t.pageStart=Math.min((t.pageNo-1)*t.pageSize+1,t.totalCount),t.pageEnd=Math.min(t.pageNo*t.pageSize,t.totalCount),t.mode=this.getMode(),t.showNum=this.getShowNum(),t.status=this.getStatus(),t.skip=this.getSkip(),t.isFirstPage=1==t.pageNo,t.isLastPage=t.pageNo==t.pageCount,t},b=function(){this.t_renderview&&(clearTimeout(this.t_renderview),this.t_renderview=0),this.t_renderpage&&(clearTimeout(this.t_renderpage),this.t_renderpage=0);var t=this;this.t_renderview=setTimeout(function(){t.t_renderview=0,s.renderView.call(t,$,t.$el.empty(),v.call(t))},0)},y=function(){if(!this.t_renderview){this.t_renderpage&&(clearTimeout(this.t_renderpage),this.t_renderpage=0);var n=this;this.t_renderpage=setTimeout(function(){n.t_renderpage=0;var t=v.call(n),e=n.$el.children(".pagebar").empty();s.renderPageBar.call(n,$,n.$el,e,t);var i=n.$el.children(".statusbar");i&&0<i.length&&s.renderPageStatusBar.call(n,$,n.$el,i,t)},0)}},e=function(){var t=this.$el.children(".pagebar");if(!t.is(".show-dropdown")){t.addClass("show-dropdown");var e=t.find(".dropdown");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless"),e=e.children("ul");else{t.on("mouseenter",c.bind(this)),t.on("mouseleave",c.bind(this));var i=a.fn.getDropdownHeight.call(this,e);r.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}var n=e.find(".selected");if(n&&0<n.length){var s=e.scrollTop();s+=n.offset().top-e.offset().top,e.scrollTop(s)}setTimeout(function(){t.addClass("animate-in")},0)}},_=function(){var t=this.$el.children(".pagebar");t.find(".dropdown");this.isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),t.addClass("animate-out"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},w=function(){var t=this.$el.children(".sizebar");if(!t.is(".show-dropdown")){t.addClass("show-dropdown"),t.on("mouseenter",f.bind(this)),t.on("mouseleave",f.bind(this));var e=t.children(".dropdown"),i=a.fn.getDropdownHeight.call(this,e,210);r.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before"),setTimeout(function(){t.addClass("animate-in")},0)}},T=function(){var t=this.$el.children(".sizebar");t.off("mouseenter").off("mouseleave"),t.addClass("animate-out"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)};i.register(".ui-paginator",n)}}(),function(t){if(t||!VRender.Component.Render.listview){var p=t?require(__vrender__).Utils:VRender.Utils,r=t?require("./_base"):VRender.Component.Render,f=t?require("../../../ui/component/UIButton"):VRender.Component.Button,i=function(t,e){r._select.call(this,t,e)},e=i.prototype=new r._select;i.itemRenderer_simple=function(t){var e={style:"ui-listview-item1",title:null,desc:null};return"string"==typeof t?(e.title=t,e.desc=arguments&&arguments[1]):t&&(e.title=t.titleField,e.desc=t.descField),i.itemRendererFunction.call(this,e)},i.itemRenderer_icon=function(t){var e={style:"ui-listview-item2",icon:null,title:null,desc:null};return"string"==typeof t?(e.icon=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.icon=t.iconField,e.title=t.titleField,e.desc=t.descField,e.defIcon=t.defaultIconUrl),i.itemRendererFunction.call(this,e)},i.itemRenderer_button=function(t){var e={style:"ui-listview-item3",buttons:null,title:null,desc:null};return"string"==typeof t?(e.title=t,e.desc=arguments&&arguments[1]):p.isArray(t)?(e.buttons=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.buttons=t.buttons,e.title=t.titleField,e.desc=t.descField),i.itemRendererFunction.call(this,e)},i.itemRenderer_icon_button=function(t){var e={style:"ui-listview-item4",buttons:null,icon:null,title:null,desc:null};return"string"==typeof t?(e.icon=t,e.buttons=arguments&&arguments[1],e.title=arguments&&arguments[2],e.desc=arguments&&arguments[3]):p.isArray(t)?(e.buttons=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.icon=t.iconField,e.buttons=t.buttons,e.title=t.titleField,e.desc=t.descField),i.itemRendererFunction.call(this,e)},i.itemRendererFunction=function(h){var t=function(t,e,s,r){var i=h||{},a=this,n=function(t,e){if(p.isNotNull(t))return s&&s[t];if(s&&e)for(var i in e){var n=e[i];if(p.isNotBlank(n)&&s.hasOwnProperty(n))return s[n]}return"title"==t&&p.isFunction(a._getDataLabel)?a._getDataLabel(s,r):void 0};e=t("<div></div>").addClass(i.style);if(i.hasOwnProperty("icon")){var o=n(i.icon,["icon","image","img"]);t("<img class='icon'/>").appendTo(e).attr("src",p.trimToEmpty(o)||i.defIcon||null)}var l=t("<div class='content'></div>").appendTo(e),d=n(i.title,["title"]);t("<div class='title'></div>").appendTo(l).html(d||"&nbsp;");var c=n(i.desc,["desc","description","remark"]);if(p.isNotBlank(c)&&t("<div class='desc'></div>").appendTo(l).html(c),i.hasOwnProperty("buttons")){var u=t("<div class='btnbar'></div>").appendTo(e);p.each(p.toArray(i.buttons),function(t){"undefined"==typeof VRender?new f(a.context,t).render(u):f.create(p.extend({},t,{target:u}))})}return e};return t._state=1,t._data=JSON.stringify(h),t},e.render=function(t,e){return e.addClass("ui-listview"),this.isChkboxVisible()&&e.addClass("show-chkbox"),e.append("<ul></ul>"),r._select.render.call(this,t,e),this},e.isChkboxVisible=function(){return p.isTrue(this.options.chkbox)},e._renderOneItem=function(t,e,i,n){s.call(this,t,e,i,n)},e._getItemContainer=function(t,e){return e.children("ul")},e._renderEmptyView=function(t,e){r._item.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){r._item.renderLoadView.call(this,t,e)};var s=function(t,e,i,n){var s=t("<div class='box'></div>").appendTo(e);r._item.renderOneItem.call(this,t,e,s,i,n),this.isChkboxVisible()&&e.prepend("<span class='chkbox'></span>")};t?module.exports=i:(i.renderOneItem=s,VRender.Component.Render.listview=i)}}("undefined"==typeof VRender),function(){if(!VRender.Component.ListView){var s=VRender.Utils,r=VRender.Component,a=r.Render.listview,i=window.UIListView=r.ListView=function(t,e){return r.base.isElement(t)?this.init(t,e)!==this?r.get(t):void(this.list=this.$el.children("ul")).on("tap","li",n.bind(this)):i.create(t)},t=i.prototype=new r.select;i.find=function(t){return r.find(t,".ui-listview",i)},i.create=function(t){return r.create(t,i,a)},t.isChkboxVisible=function(){return this.$el.is(".show-chkbox")},t._getItemContainer=function(){return this.$el.children("ul")},t._renderOneItem=function(t,e,i,n,s){a.renderOneItem.call(this,t,e,i,n,s)};var n=function(t){var e=$(t.currentTarget);if(e.parent().is(this.list)){if(e.is(".disabled"))return;var i=this._snapshoot();e.is(".selected")?e.removeClass(
"selected"):(e.addClass("selected"),this.isMultiple()||e.siblings().removeClass("selected"));var n=s.map(this.list.children(".selected"),function(t){return t.index()});r.select.setSelectedIndex.call(this,n),i.done()}};r.register(".ui-listview",i)}}(),function(t){if(t||!VRender.Component.Render.tabbar){var r=t?require(__vrender__).Utils:VRender.Utils,a=t?require("./_base"):VRender.Component.Render,e=function(t,e){a._select.call(this,t,e)},i=e.prototype=new a._select;i.render=function(t,e){e.addClass("ui-tabbar");var i=t("<div class='bar'></div>").appendTo(e);return i.append("<ul class='tabs'></ul>"),i.append("<div class='thumb'></div>"),a._select.render.call(this,t,e),o.call(this,t,e),this},i.isMultiple=function(){return!1},i._renderOneItem=function(t,e,i,n){s.call(this,t,e,i,n)},i._getItemContainer=function(t,e){return e.find(".tabs")},i._getNewItem=function(t,e){return n.call(this,t,e)},i._renderEmptyView=function(){},i._renderLoadView=function(){};var s=function(t,e,i,n){var s=e.children(".box");a._item.renderOneItem.call(this,t,e,s,i,n),i=i||{},r.isNotBlank(i.name)&&e.attr("name",i.name),r.isTrue(i.closable)&&e.addClass("closable").append("<i class='close'></i>")},n=function(t,e){var i=t("<li class='tab'></li>").appendTo(e);return i.append("<div class='box'></div>"),i},o=function(t,e){(e=t("<div class='btns'></div>").appendTo(e)).append("<span class='btn prev'>&lt;</span>"),e.append("<span class='btn next'>&gt;</span>")};t?module.exports=e:(e.renderOneItem=s,e.getNewItem=n,VRender.Component.Render.tabbar=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Tabbar){var n=VRender.Utils,a=VRender.Component,s=a.Render.tabbar,i=window.UITabbar=a.Tabbar=function(t,e){return a.base.isElement(t)?this.init(t,e)!=this?a.get(t):(this.tabsView=this.$el.find(".tabs"),this.$el.on("tap",".tab",r.bind(this)),this.$el.on("tap",".close",d.bind(this)),this.isRenderAsApp()?(this.$el.on("touchstart",l.bind(this)),this.$el.on("touchmove",l.bind(this)),this.$el.on("touchend",l.bind(this))):(this.$el.on("mousedown",".btn",o.bind(this)),this.$el.on("mouseup",".btn",o.bind(this)),this.$el.on("mouseleave",".btn",o.bind(this)),c.call(this)),void u.call(this)):i.create(t)},t=i.prototype=new a.select;i.find=function(t){return a.find(t,".ui-tabbar",i)},i.create=function(t){return a.create(t,i,s)},t.setSelectedIndex=function(t){var e=n.getIndexValue(t);m.call(this,0<=e?this._getItems().eq(e):null),u.call(this)},t.removeItemAt=function(t){this.close(n.getIndexValue(t))},t.close=function(t){var e=null;if("number"==typeof t?0<=t&&(e=this.tabsView.find(".tab").eq(t)):n.isNotBlank(t)&&(e=this.tabsView.find(".tab[name='"+t+"']")),e&&0<e.length){var i=this._getItemData(e);return g.call(this,e),i}return null},t.isMultiple=function(){return!1},t.isClosable=function(t){if("number"==typeof t){var e=this._getItemAt(t);return e&&e.is(".closable")}return"string"==typeof t&&this.isClosable(this.getIndexByName(t))},t.setColsable=function(t,e){if("string"==typeof e)return this.setColsable(t,this.getIndexByName(e));if("number"==typeof e){var i=this._getItemAt(e);i&&0<i.length&&(n.isNull(t)||n.isTrue(t)?i.is(".closable")||i.addClass("closable").append("<i class='close'></i>"):i.is(".closable")&&i.removeClass("closable").children(".close").remove())}},t._getItemContainer=function(){return this.$el.find(".tabs")},t._getItems=function(){return this.$el.find(".tab")},t._getNewItem=function(t,e,i,n){return s.getNewItem.call(this,t,e,i,n)},t._renderOneItem=function(t,e,i,n){return s.renderOneItem.call(this,t,e,i,n)};var r=function(t){var e=$(t.currentTarget);e.is(".disabled")||(this.trigger("itemclick",this._getItemData(e)),m.call(this,e))},o=function(t){$(t.currentTarget);if(this.btnMouseTimerId&&(clearInterval(this.btnMouseTimerId),this.btnMouseTimerId=0),"mousedown"==t.type){var e=this,i=this.tabsView,n=parseInt(i.attr("opt-l"))||0,s=20*($(t.currentTarget).is(".prev")?1:-1);this.btnMouseTimerId=setInterval(function(){n+=s,p.call(e,n)},50)}},l=function(t){var e=t.touches&&t.touches[0];if("touchstart"===t.type)this.touchData={startX:e.pageX},this.touchData.startL=parseInt(this.tabsView.attr("opt-l"))||0;else if("touchmove"===t.type){if(1<t.touches.length||!this.$el.is(".over"))return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&Math.abs(i)<10)return;this.touchData.moving=!0;var n=this.touchData.startL+i;p.call(this,n)}else t.type},d=function(t){var e=$(t.currentTarget).parent();return g.call(this,e),!1},e=function(t){this._isMounted()?h.call(this):$(window).off("resize._"+this.getViewId())},c=function(){var t="resize._"+this.getViewId();$(window).off(t).on(t,e.bind(this)),e.call(this)},u=function(){if(h.call(this),this.$el.is(".over")){var t=this.tabsView.find(".tab.selected");if(t&&0<t.length){var e=this.tabsView.parent(),i=t.offset().left,n=e.offset().left,s=parseInt(this.tabsView.attr("opt-l"))||0;i<n?p.call(this,s+n-i):i-n>e.width()&&p.call(this,s-(i-n-e.width()+t.outerWidth()))}}f.call(this)},h=function(){var t=this.tabsView;t.width()<=this.$el.width()?(this.$el.removeClass("over over-l over-r"),p.call(this,0)):(this.$el.addClass("over"),p.call(this,parseInt(t.attr("opt-l"))||0))},p=function(t){var e=this.tabsView.width(),i=this.tabsView.parent().width();0<=t?t=0:t+e<i&&(t=i-e),this.$el.removeClass("over-l over-r"),t<0&&this.$el.addClass("over-l"),i<t+e&&this.$el.addClass("over-r"),t?(this.tabsView.css("transform","translate("+t+"px,0px)"),this.tabsView.attr("opt-l",t)):this.tabsView.css("transform","").removeAttr("opt-l"),f.call(this)},f=function(){this.thumbTimerId&&clearTimeout(this.thumbTimerId);var r=this;this.thumbTimerId=setTimeout(function(){r.thumbTimerId=0;var t=r.$el.find(".thumb"),e=r.tabsView.find(".tab.selected");if(e&&0<e.length){var i=e.offset().left;i-=r.tabsView.parent().offset().left;var n=e.outerWidth();if(r.isRenderAsApp()){var s=e.width();i+=(n-s)/2,n=s}t.css("left",i+"px"),t.width(n)}else t.width(0)},100)},m=function(t){var e=t&&0<t.length;if(!e||!t.is(".selected")){var i=e?t.index():[];a.select.setSelectedIndex.call(this,i);var n=v.call(this),s=null;n&&0<n.length&&(n.removeClass("selected"),s=this._getItemData(n),this.trigger("hide",s));var r=null;e&&(t.addClass("selected"),r=this._getItemData(t),this.trigger("show",r)),f.call(this),this.trigger("change",r,s)}},g=function(t){var e=t.is(".selected"),i=this._getItemData(t),n=null,s=null;e&&((n=t.next())&&0!=n.length||(n=t.prev()),this.trigger("hide",i)),a.item.removeItem.call(this,t),this.trigger("close",i),n&&0<n.length?(n.addClass("selected"),s=this._getItemData(n),this.trigger("show",s),a.select.setSelectedIndex.call(this,n.index())):a.select.setSelectedIndex.call(this,[]),e&&this.trigger("change",s,i),h.call(this)},v=function(){return this.tabsView.find(".tab.selected")};a.register(".ui-tabbar",i)}}(),function(c){if(c||!VRender.Component.Render.treeview){var u=c?require(__vrender__).Utils:VRender.Utils,h=c?require("./_base"):VRender.Component.Render,s=function(t,e){h._select.call(this,t,e)},t=s.prototype=new h._select;s.getNewItem=function(t,e,i,n){var s=t("<li></li>").appendTo(e),r=t("<div class='tree-node'></div>").appendTo(s);return r.append("<span class='ep'></span>"),this.isChkboxVisible()&&r.append("<span class='chkbox'><i></i></span>"),this._isIconVisible()&&r.append("<span class='ic'><i></i></span>"),r.append("<div class='lbl'></div>"),s},t.render=function(t,e){return e.addClass("ui-treeview"),e.append("<ul class='root' level='0'></ul>"),h._select.render.call(this,t,e),i.call(this,t,e),this},t.getData=function(){var t=u.toArray(this.options.data);if(t._vr_adapter_flag)return t;var i=this,n=0,s=this.getChildrenField()||"children",r=function(t){return u.map(t,function(t,e){return t=h.fn.doAdapter.call(i,t,n++),u.isArray(t[s])&&(t[s]=r(t[s])),t})};return(t=r(t))._vr_adapter_flag=!0,this.options.data=t},t.isChkboxVisible=function(){return u.isTrue(this.options.chkbox)},t.getChildrenField=function(){return this.options.childrenField},t.getLeafField=function(){return this.options.leafField},t._getItemContainer=function(t,e){return e.children("ul")},t._renderItems=function(t,e){var i=this._getItemContainer(t,e);n.call(this,t,e,i,this.getData())},t._renderEmptyView=function(){},t._renderLoadView=function(){},t._getNewItem=function(t,e,i,n){return s.getNewItem.call(this,t,e,i,n)},t._isIconVisible=function(){return u.isTrue(this.options.icon)},t._getIcon=function(t,e){return v.call(this,this.options.icon,t,e)},t._getOpenProps=function(){var t=a.call(this,this.options.openIndex);t=t&&0<t.length?t:null;var e=g.call(this,this.options.openId);return{indexs:t,ids:e=e&&0<e.length?e:null}};var n=function(t,e,i,n){p.call(this,t,i,n,0,1),r.call(this,t,i),c&&i.find("li").removeData("_node_data")},p=function(s,r,t,a,o){var l=this,d=this.getChildrenField()||"children";return u.each(t,function(t){var e=l._getNewItem(s,r,t,a);f.call(l,s,e,t,a,o),a+=1;var i=t&&t[d];if(u.isArray(i)&&0<i.length){var n=s("<ul></ul>").appendTo(e);n.attr("level",o),a=p.call(l,s,n,i,a,o+1)}}),a},f=function(t,e,i,n,s){c&&e.data("_node_data",i);var r=this.getLeafField()||"leaf";u.isTrue(i&&i[r])&&e.addClass("is-leaf");var a=e.children(".tree-node"),o=a.children(".ic");if(o&&0<o.length){var l=this._getIcon(i,n);u.isNotBlank(l)&&o.children("i").css("backgroundImage","url("+l+")")}var d=a.children(".lbl");h._item.renderOneItem.call(this,t,a,d,i,n)},r=function(t,e){var i=this.getSelectedIndex(!0);if(i)for(var n=0,s=i.length;n<s;n++){if((a=o.call(this,e,i[n],!0))&&(a.addClass("selected"),!this.isMultiple()))break}else{var r=this.getSelectedKey(!0);if(r)for(n=0,s=r.length;n<s;n++){var a;if((a=l.call(this,e,r[n]))&&(a.addClass("selected"),!this.isMultiple()))break}}m.call(this,e,!1)},i=function(t,e){this.isChkboxVisible()&&e.attr("opt-chk","1");var i=this.getChildrenField();u.isNotBlank(i)&&e.attr("opt-child",i);var n=this._getOpenProps()||{},s=n.indexs&&n.indexs.join(",");e.attr("opt-openinds",s||null);var r=n.ids&&n.ids.join(",");if(e.attr("opt-openids",r||null),c){var a=this.options.icon;u.isFunction(a)?a=escape(a):"string"!=typeof a&&(a=u.isTrue(a)?1:0),a&&e.attr("opt-icon",a)}},o=function(t,r,a){var o=0,l=function(t){for(var e=t.children(),i=0,n=e.length;i<n;i++){var s=e.eq(i);if(o==r)return s;if(o+=1,(!a||s.is(".open"))&&(s=l(
s.children("ul"))))return s}return null};return l(t)},l=function(t,r,a){var o=this,l=function(t){for(var e=t.children(),i=0,n=e.length;i<n;i++){var s=e.eq(i);if(o._getDataKey(d.call(o,s))==r)return s;if((!a||s.is(".open"))&&(s=l(s.children("ul"))))return s}return null};return l(t)},d=function(t){return c?t.data("_node_data"):t.data("itemData")},m=function(t,e){var i=t.children();if(i&&0<i.length){for(var n=!1,s=!0,r=0,a=i.length;r<a;r++){var o=i.eq(r),l=o.children("ul");if(e||o.is(".selected"))n=!0,o.addClass("selected"),this.isMultiple()&&m.call(this,l,!0);else{var d=m.call(this,l,!1);"all"==d?(o.addClass(this.isMultiple()?"selected":"selected_"),n=!0):"part"==d?(o.addClass("selected_"),s=!(n=!0)):s=!1}}return s?"all":n?"part":null}return null},a=function(t){if(u.isBlank(t))return[];u.isArray(t)||(t=(""+t).split(","));var e=[];return u.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&0<=t&&e.push(t))}),e},g=function(t){if(u.isBlank(t))return[];u.isArray(t)||(t=(""+t).split(","));var e=[];return u.each(t,function(t){(t||0===t)&&e.push(isNaN(t)?t:parseInt(t))}),e},v=function(t,e,i){return u.isFunction(t)?t(e,i):(!0!==t&&1!=t||(t="icon"),"string"==typeof t?/\/|\./.test(t)?t:e&&e[t]||null:null)};c?module.exports=s:(s.getIcon=v,s.getOpenIndex=a,s.getOpenId=g,s.renderItems=n,s.renderOneNode=f,VRender.Component.Render.treeview=s)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Tree){var c=VRender.Utils,i=VRender.Component,o=i.Render,d=o.treeview,n=window.UITreeView=i.Tree=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.$el.on("tap",".tree-node",p.bind(this)),this.$el.on("tap",".tree-node > .chkbox",m.bind(this)),this.$el.on("tap","li.more > div",g.bind(this)),this.isRenderAsApp()||this.$el.on("tap",".tree-node > .ep",f.bind(this)),void s.call(this)):n.create(t)},t=n.prototype=new i.select;n.find=function(t){return i.find(t,".ui-treeview",n)},n.create=function(t){return i.create(t,n,d)},t.getDataAt=function(t,e){var i=C.call(this,t,e);return i?this._getItemData(i):null},t.getDataIndex=function(t,e){var i=I.call(this,t,e);return i?D.call(this,i,e):-1},t.getDataById=function(t,e){var i=x.call(this,t,e);return i?this._getItemData(i):null},t.getIndexById=function(t,e){var i=x.call(this,t,e);return i?D.call(this,i,e):-1},t.getDataByName=function(i,n){if(c.isBlank(i))return null;var s=this,r=null;return V.call(this,function(t){var e=s._getItemData(t);return e&&e.name==i?(r=e,!1):!n&&!t.is(".open")||void 0}),r},t.getIndexByName=function(n,s){if(c.isBlank(n))return-1;var r=this,a=-1;return V.call(this,function(t,e){var i=r._getItemData(t);return i&&i.name==n?(a=e,!1):!s&&!t.is(".open")||void 0}),a},t.isChkboxVisible=function(){return"1"==this.$el.attr("opt-chk")},t.setChkboxVisible=function(t){if(t=!!c.isNull(t)||c.isTrue(t),this.isChkboxVisible()!=t){var e=this._snapshoot(),i=this.$el.find(".tree-node");t?(this.$el.attr("opt-chk","1"),i.children(".ep").after("<span class='chkbox'><i></i></span>")):(this.$el.removeAttr("opt-chk"),i.parent().removeClass("selected").removeClass("selected_"),i.children(".chkbox").remove()),e.done()}},t.getChildrenField=function(){return this.$el.attr("opt-child")||null},t.getLeafField=function(){return this.options.leafField},t.getSelectedIndex=function(t,i){var n=[],s=this.isChkboxVisible(),r=this.isMultiple();return V.call(this,function(t,e){if(s){if(t.is(".selected")){if(n.push(e),!r)return!1;if(!i)return!0}}else if(t.children(".tree-node").is(".active"))return n.push(e),!1;if(!i&&!t.is(".open"))return!0}),t||r?0<n.length?n:null:0<n.length?n[0]:-1},t.setSelectedIndex=function(t,i){var n=this.isChkboxVisible(),s=this.isMultiple(),r=o.fn.getIntValues(t,0);!(1<r.length)||n&&s||(r=[r.pop()]);var e=this._snapshoot(),a=this.$el.find(".tree-node");n?a.parent().removeClass("selected").removeClass("selected_"):a.removeClass("active"),0<r.length&&V.call(this,function(t,e){if(0<=r.indexOf(e)){if(!n)return t.children(".tree-node").addClass("active"),!1;if(!t.is(".selected")){if(t.addClass("selected"),y(t),!s)return!1;b(t,!0)}}if(!i&&!t.is(".open"))return!0}),e.done()},t.getSelectedKey=function(t,e){var i=[],n=this.isChkboxVisible(),s=this.isMultiple(),r=this;return V.call(this,function(t){if(n){if(t.is(".selected")){if(i.push(R.call(r,t)),!s)return!1;if(!e)return!0}}else if(t.children(".tree-node").is(".active"))return i.push(R.call(r,t)),!1;if(!e&&!t.is(".open"))return!0}),t||s?0<i.length?i:null:0<i.length?i[0]:null},t.setSelectedKey=function(t,n){var s=this.isChkboxVisible(),r=this.isMultiple(),a=c.isArray(t)?t:c.isBlank(t)?[]:c.trimToEmpty(t).split(",");!(1<a.length)||s&&r||(a=[a.pop()]);var e=this._snapshoot(),i=this.$el.find(".tree-node");if(s?i.parent().removeClass("selected").removeClass("selected_"):i.removeClass("active"),0<a.length){var o=this;V.call(this,function(t,e){var i=R.call(o,t);if(0<=c.index(a,function(t){return t==i})){if(!s)return t.children(".tree-node").addClass("active"),!1;if(!t.is(".selected")){if(t.addClass("selected"),y(t),!r)return!1;b(t,!0)}}if(!n&&!t.is(".open"))return!0})}e.done()},t.getSelectedData=function(t,e){var i=[],n=this.isChkboxVisible(),s=this.isMultiple(),r=this;return V.call(this,function(t){if(n){if(t.is(".selected")){if(i.push(A.call(r,t)),!s)return!1;if(!e)return!0}}else if(t.children(".tree-node").is(".active"))return i.push(A.call(r,t)),!1;if(!e&&!t.is(".open"))return!0}),t||s?0<i.length?i:null:0<i.length?i[0]:null},t.isAllSelected=function(){var e=!0;return V.call(this,function(t){return!!t.is(".selected")||(e=!1)}),e},t.open=function(t){var e=I.call(this,t,!0);e&&r.call(this,e)},t.openAt=function(t,e){var i=C.call(this,t,e);i&&r.call(this,i)},t.openById=function(t){var e=x.call(this,t,!0);e&&r.call(this,e)},t.close=function(t){var e=I.call(this,t,!0);e&&a.call(this,e)},t.closeAt=function(t,e){var i=C.call(this,t,e);i&&a.call(this,i)},t.closeById=function(t){var e=x.call(this,t,!0);e&&a.call(this,e)},t.addItem=function(t,e,i){if(c.isBlank(t))return!1;var n=this._getItemContainer();if(c.isNotBlank(e)){var s=I.call(this,e,!0);s&&((n=s.children("ul"))&&0<n.length||(n=$("<ul></ul>").appendTo(s)).attr("level",parseInt(s.parent().attr("level"))+1))}var r=n.children(),a=n.is(".root")?0:D.call(this,n.parent(),!0);0<=(i=c.getIndexValue(i))&&i<r.length-1&&(a+=i);var o=this._snapshoot();return _.call(this,n,t,i,a),o.done(),!0},t.updateItem=function(i,t,e){if(c.isBlank(i))return!1;isNaN(t)||!t&&0!==t||(e=t,t=null);var n=this._snapshoot();if(t){var s=I.call(this,t,!0);if(!s)return n.release(),!1;var r=s.children("ul").children();if(c.isBlank(e)){var a=this,o=this._getDataKey(i);(l=c.find(r,function(t){var e=a._getItemData(t);return i==e||o==a._getDataKey(e)}))&&w.call(this,l,i)}else isNaN(e)||0<=(e=parseInt(e))&&e<r.length&&w.call(this,r.eq(e),i)}else if(c.isBlank(e)){(l=I.call(this,i,!0))&&w.call(this,l,i)}else if(!isNaN(e)){var l;e=parseInt(e),(l=C.call(this,e))&&w.call(this,l,i)}return n.done(),!0},t.removeItem=function(i,t){if(c.isBlank(i))return!1;var e=this._snapshoot();if(t){var n=I.call(this,t,!0);if(!n)return e.release(),!1;var s=this,r=this._getDataKey(i),a=n.children("ul").children();(o=c.find(a,function(t){var e=s._getItemData(t);return i==e||r==s._getDataKey(e)}))&&T.call(this,o)}else{var o;(o=I.call(this,i,!0))&&T.call(this,o)}return e.done(),!0},t.removeItemAt=function(t,e){if((t=c.getIndexValue(t))<0)return!1;var i=this._snapshoot();if(e){var n=I.call(this,e,!0);if(!n)return i.release(),!1;var s=n.children("ul").children();t<s.length&&T.call(this,s.eq(t))}else{var r=C.call(this,t);r&&T.call(this,r)}return i.done(),!0},t.addOrUpdateItem=function(t,e){c.isBlank(t)||this.updateItem(t,e)||this.addItem(t,e)},t.setItems=function(t,e){if(t=c.toArray(t),e){var i=I.call(this,e,!0);if(!i)return;for(var n=this._snapshoot(),s=i.children("ul").children(),r=s.length-1;0<=r;r--)T.call(this,s.eq(r));if(t&&0<t.length){var a=i.children("ul");a&&0<a.length||(a=$("<ul></ul>").appendTo(i)).attr("level",parseInt(i.parent().attr("level"))+1);for(var o=D.call(this,i,!0),l=(r=0,t.length);r<l;r++)_.call(this,a,t[r],r,o),o+=1}n.done()}else this.setData(t)},t.load=function(t,e,i){if(t=t||this.lastLoadApi||this.$el.attr("api-name"),c.isBlank(t))return!1;var n=this,s=this._getItemContainer().empty();u.call(this,s,t,e,function(t,e){t?c.isFunction(i)&&i(t):c.isFunction(i)&&i(!1,e),n.trigger("loaded",t,e)})},t.length=function(){return Number.POSITIVE_INFINITY},t._renderItems=function(t,e,i){d.renderItems.call(this,t,this.$el,e,i)},t._getItemContainer=function(){return this.$el.children("ul")},t._getNewItem=function(t,e,i,n){return d.getNewItem.call(this,t,e,i,n)},t._isIconVisible=function(){if(c.isTrue(this.options.icon))return!0},t._getIcon=function(t,e,i){return d.getIcon.call(this,this.options.icon,t,e)},t._getOpenProps=function(){var t={},e=this.$el.attr("opt-openinds");if(c.isNotBlank(e)&&(e=d.getOpenIndex.call(this,e),t.indexs=e&&0<e.length?e:null),!t.indexs){var i=this.$el.attr("opt-openids");c.isNotBlank(i)&&(i=d.getOpenId.call(this,i),t.ids=i&&0<i.length?i:null)}return t},t._getItemData=function(t){return A.call(this,t)},t._doAdapter=function(t){var e=c.toArray(t);if(e._vr_adapter_flag)return e;var i=this,n=0,s=this.getChildrenField()||"children",r=function(t){return c.map(t,function(t,e){return t=o.fn.doAdapter.call(i,t,n++),c.isArray(t[s])&&(t[s]=r(t[s])),t})};return(e=r(e))._vr_adapter_flag=!0,e},t._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(!0)},t._snapshoot_compare=function(t){var e=this.getSelectedIndex(!0);return o.fn.equalIndex(t.selectedIndex,e)};var s=function(){if(!this.options.hasOwnProperty("icon")){var t=this.$el.attr("opt-icon");"1"==t?t=!0:/^function/.test(t)?t=new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")():c.isBlank(t)&&(t=!1),this.options.icon=t}this.$el.removeAttr("opt-icon"),this.$el.removeAttr("data-inds").removeAttr("data-ids"),this.openProps=this._getOpenProps(),h.call(this)},l=function(s,t,e,r){var a=s;if(s.is("li")&&((a=s.children("ul"))&&0<a.length||(a=$("<ul></ul>").appendTo(s)).attr("level",parseInt(s.parent().attr("level"))+1)),s.is(".is-loaded,.is-loading"))return!1;s.addClass("is-loading");var o=$("<li class='loading'></li>").appendTo(a);o.append("<div>"+(this.loadingText||"正在加载..."
)+"</div>"),a.children(".more").remove();var l=this,d=D.call(this,s.is("li")?s:s.children().last);i.load.call(this,t,e,function(t,e){o.remove();var i=t?null:c.toArray(e);if(i&&0<i.length)if(c.each(i,function(t){_.call(l,a,t,-1,d),d+=1}),l.hasMore()){var n=$("<li class='more'></li>").appendTo(a);n.append("<div>"+(l.moreText||"加载更多..")+"</div>"),n.attr("page-no",l._pageInfo.page)}else s.addClass("is-loaded");else s.addClass("is-loaded"),0==a.children().length&&s.addClass("is-leaf").removeClass("open");s.removeClass("is-loading"),c.isFunction(r)&&r(t,i)})},r=function(t){for(var e=[],i=t.parent();!i.is(".root");)i=i.parent(),e.push(i),i=i.parent();var n=this;if(c.each(e,function(t){t.is(".open")||(t.addClass("open"),n.trigger("open",n._getItemData(t)))}),!t.is(".open")&&!t.is(".is-leaf")){N.call(this,t);var s=this._getItemData(t),r=this.lastLoadApi||this.$el.attr("api-name");if(r&&!t.is(".is-loaded")&&0==t.children("ul").children().length){var a={pid:R.call(this,t),p_no:1};a=c.extend(this.lastLoadParams,a),l.call(this,t,r,a,function(t,e){n.trigger("loaded",t,e,s)})}this.trigger("open",s)}},a=function(t){t.is(".open")&&(F.call(this,t),this.trigger("close",this._getItemData(t)))},u=function(t,e,i,n){var s=this;l.call(this,t,e,i,function(t,e){c.isFunction(n)&&n(t,e),h.call(s)})},h=function(){var t=null,e=this.openProps||{};if(e.indexs&&0<e.indexs.length)(t=C.call(this,e.indexs[0],!0))&&e.indexs.shift();else if(e.ids)for(var i=0;i<e.ids.length;i++)if(t=x.call(this,e.ids[i],!0)){e.ids.splice(i,1);break}if(t){t.addClass("open");for(var n=t.parent();n&&0<n.length&&!n.is(".root");)n=n.parent().addClass("open").parent();if(t.is(".is-loaded")||0!=t.children("ul").children().length)h.call(this);else{var s=this.lastLoadApi||this.$el.attr("api-name");if(c.isBlank(s))h.call(this);else{var r=this.lastLoadParams||this.getInitParams();r=c.extend({},r,{pid:R.call(this,t)}),u.call(this,t,s,r)}}}},p=function(t){var e=$(t.currentTarget);if(e.is(".active")||(this.$el.find(".tree-node.active").removeClass("active"),e.addClass("active"),this.trigger("itemclick",this._getItemData(e.parent()))),this.isRenderAsApp()){var i=e.parent();i.is(".open")?a.call(this,i):r.call(this,i)}},f=function(t){var e=$(t.currentTarget).parent().parent();return e.is(".open")?a.call(this,e):r.call(this,e),!1},m=function(t){var e=this._snapshoot(),i=$(t.currentTarget).parent().parent();return v.call(this,i,!i.is(".selected")),e.done(),!1},g=function(t){var e=$(t.currentTarget).parent(),i={p_no:parseInt(e.attr("page-no"))+1},n=e.parent();n.is(".root")?i.pid=null:(n=n.parent(),i.pid=R.call(this,n)),i=c.extend(this.lastLoadParams,i);var s=this,r=this._getItemData(n);l.call(this,n,this.lastLoadApi,i,function(t,e){s.trigger("loaded",t,e,r)})},v=function(t,e){var i=this.isMultiple();if(e){if(t.is(".selected"))return;if(i||(this.$el.find("li.selected").removeClass("selected"),this.$el.find("li.selected_").removeClass("selected_")),t.addClass("selected").removeClass("selected_"),i)b(t,!0),y(t);else for(;;){var n=t.parent();if(n.is(".root"))break;(t=n.parent()).addClass("selected_")}}else{if(t.is(".selected"))t.removeClass("selected");else{if(!t.is(".selected_"))return;t.removeClass(".selected_")}i&&b(t,!1),y(t)}},b=function(t,e){c.each(t.children("ul").children(),function(t){t.is(".more,.loading")||(t.removeClass("selected_"),e?t.addClass("selected"):t.removeClass("selected"),b(t,e))})},y=function(t){var e=t.parent();if(!e.is(".root")){var i=!1,n=!0;c.each(e.children(),function(t){t.is(".more,.loading")||(t.is(".selected")?i=!0:n=!!t.is(".selected_")&&!(i=!0))});var s=e.parent();s.removeClass("selected").removeClass("selected_"),n?s.addClass("selected"):i&&s.addClass("selected_"),y(s)}},_=function(t,e,i,n){i=c.getIndexValue(i);var s=this._getNewItem($,t,e,n);0<=i&&i<t.children().length-1&&t.children().eq(i).before(s);var r=parseInt(t.attr("level"));if(d.renderOneNode.call(this,$,s,e,n,r),!t.is(".root")){var a=t.parent().removeClass("is-leaf");this.isChkboxVisible()&&this.isMultiple()&&a.is(".selected")&&s.addClass("selected")}var o=null;if(t.is(".root"))o=this.getData();else if(o=this._getItemData(t.parent())){var l=this.getChildrenField()||"children";c.isArray(o[l])||(o[l]=[]),o=o[l]}c.isArray(o)&&(0<=i&&i<o.length?o.splice(i,0,e):o.push(e))},w=function(t,e){var i=t.parent(),n=D.call(this,t,!0);t.children(".tree-node .lbl").empty();var s=parseInt(i.attr("level"));d.renderOneNode.call(this,$,t,e,n,s);var r=null;r=i.is(".root")?this.getData():this._getItemData(i.parent());var a=t.index();if(c.isArray(r)&&a<r.length){var o=this.getChildrenField()||"children";c.isArray(e[o])||(e[o]=r[a][o]),r.splice(a,1,e)}},T=function(e){F.call(this,e);var i=e.parent(),t=e.index();if(i.is(".root")){var n=this.getData();n&&t<n.length&&n.splice(t,1)}else{var s=this._getItemData(i.parent()),r=this.getChildrenField()||"children";c.isArray(s[r])&&t<s[r].length&&s[r].splice(t,1)}var a=this;setTimeout(function(){if(e.remove(),!i.is(".root")){e=i.parent();var t=i.children();0<t.length?y.call(a,t.eq(0)):(i.remove(),e.is(".selected_")&&(e.removeClass("selected_"),y.call(a,e)))}},220)},C=function(i,n){if((i=c.getIndexValue(i))<0)return null;var s=null;return V.call(this,function(t,e){return i==e?(s=t,!1):!n&&!t.is(".open")||void 0}),s},x=function(i,n){if(c.isBlank(i))return null;var s=this,r=null;return V.call(this,function(t){var e=R.call(s,t);return i==e?(r=t,!1):!n&&!t.is(".open")||void 0}),r},I=function(n,s){var r=this,a=null,o=this._getDataKey(n);return V.call(this,function(t){var e=r._getItemData(t),i=n==e;i||(i=r._getDataKey(e)==o);return i?(a=t,!1):!s&&!t.is(".open")||void 0}),a},D=function(i,n){var s=-1;return i&&0<i.length&&V.call(this,function(t,e){return t.is(i)?(s=e,!1):!n&&!t.is(".open")||void 0}),s},R=function(t){return this._getDataKey(this._getItemData(t))},A=function(t){var e=t.children(".tree-node").data("itemData");if(c.isBlank(e)){var s=0,r=D.call(this,t,!0),a=this.getChildrenField()||"children",o=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if(s==r)return n;if(s+=1,c.isArray(n[a])&&(n=o(n[a])))return n}};e=o(this.getData())}return e},V=function(o){var l=0,d=function(t){for(var e=parseInt(t.attr("level"))||0,i=t.children(),n=0,s=i.length;n<s;n++){var r=i.eq(n);if(!r.is(".more,.loading")){var a=o(r,l,e);if(l+=1,!1===a)return!0;if(!0!==a&&(a=d(r.children("ul"))))return!0}}};d(this._getItemContainer())},N=function(t){t.addClass("open");var e=t.children("ul");e&&0<e.length&&(e.height(0),c.nextTick(function(){e.addClass("animate-in"),e.height(e[0].scrollHeight),setTimeout(function(){e.css("height","")},300)}))},F=function(t){var e=t.children("ul");e&&0<e.length?(e.addClass("animate-out"),e.height(e[0].scrollHeight),setTimeout(function(){e.height(0),setTimeout(function(){t.removeClass("open"),e.removeClass("animate-in").removeClass("animate-out"),e.css("height","")},300)},0)):t.removeClass("open")};i.register(".ui-treeview",n)}}(),function(n){if(n||!VRender.Component.Render.treecombobox){var s=n?require(__vrender__).Utils:VRender.Utils,i=n?require("./_base"):VRender.Component.Render,r=n?require("../../../ui/component/UITreeView"):VRender.Component.TreeView,t=function(t,e){i._base.call(this,t,e)},e=t.prototype=new i._base;e.render=function(t,e){return i._base.render.call(this,t,e),e.addClass("ui-treecombobox"),e.attr("opt-box",this.options.container),this.isMultiple()&&e.attr("multiple","multiple"),a.call(this,t,e),o.call(this,t,e),this},e.renderData=function(){},e.getDataAdapter=function(){return null},e.getDataMapper=function(){return null},e.isMultiple=function(){return i.fn.isMultiple.call(this)};var a=function(t,e){var i=t("<div class='ipt'></div>").appendTo(e);t("<input type='text'/>").appendTo(i).attr("readonly","readonly"),i.append("<button class='dropdownbtn'></button>"),i.append("<span class='prompt'>"+s.trimToEmpty(this.options.prompt)+"</span>")},o=function(t,e){e=t("<div class='dropdown'></div>").appendTo(e);var i=l.call(this,this.options);n?new r(this,i).render(e):(i.target=e,r.create(i))},l=function(t){var e={};return e.data=t.data,e.keyField=t.keyField,e.labelField=t.labelField,e.labelFunction=t.labelFunction,e.itemRenderer=t.itemRenderer,e.selectedIndex=t.selectedIndex,e.selectedKey=t.selectedKey,e.multiple=this.isMultiple(),e.chkbox=!!e.multiple,e.dataAdapter=t.dataAdapter,e.dataMapper=t.dataMapper,e.loadingView=t.loadingView,e.loadingText=t.loadingText,e.emptyView=t.emptyView,e.emptyText=t.emptyText,e.moreView=t.moreView,e.moreText=t.moreText,e.apiName=t.apiName,e.apiParams=t.apiParams,e.autoLoad=t.autoLoad,e.icon=t.icon,e.openIndex=t.openIndex,e.openId=t.openId,e};n?module.exports=t:VRender.Component.Render.treecombobox=t}}("undefined"==typeof VRender),function(){if(!VRender.Component.TreeCombobox){var n=VRender.Utils,i=VRender.Component,s=i.Render,e=s.treecombobox,r=window.UITreeCombobox=i.TreeCombobox=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.tree=UITreeView.find(this.$el)[0],this.$el.on("tap",".ipt",a.bind(this)),this.$el.on("change",".dropdown",function(){return!1}),this.tree.on("change",l.bind(this)),this.tree.on("itemclick",d.bind(this)),void(this.isRenderAsApp()&&this.$el.on("tap",".dropdown",o.bind(this)))):r.create(t)},t=r.prototype=new i.select;r.find=function(t){return i.find(t,".ui-treecombobox",r)},r.create=function(t){return i.create(t,r,e)},t.getData=function(){return this.tree.getData()},t.setData=function(t){this.tree.setData(t)},t.getPrompt=function(){return this.$el.children(".ipt").find(".prompt").text()},t.setPrompt=function(t){var e=this.$el.children(".ipt");e.find(".prompt").remove(),n.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(e).text(t)},t.getDataAdapter=function(){return this.tree.getDataAdapter()},t.setDataAdapter=function(t){this.tree.setDataAdapter(t)},t.getDataMapper=function(){return this.tree.getDataMapper()},t.setDataMapper=function(t){this.tree.setDataMapper(t)},t.load=function(t,e,i){this.tree.load(t,e,i)},t.reload=function(t,e){this.tree.reload(t,e)},t.isLoading=function(){return this.tree.isLoading()},t.getDataAt=function(t){return this.tree.getDataAt(t)},t.getDataIndex=function(t){return this.tree.getDataIndex(t)},t.getDataByKey=function(t){return this.tree.getDataByKey(t)},t.getIndexByKey=function(t){
return this.tree.getIndexByKey(t)},t.getDataByName=function(t){return this.tree.getDataByName(t)},t.getIndexByName=function(t){return this.tree.getIndexByName(t)},t.getKeyField=function(){return this.tree.getKeyField()},t.setKeyField=function(t){this.tree.setKeyField(t)},t.getLabelField=function(){return this.tree.getLabelField},t.setLabelField=function(t){this.tree.setLabelField(t)},t.getLabelFunction=function(){return this.tree.getLabelFunction()},t.setLabelFunction=function(t){this.tree.setLabelFunction(t)},t.getItemRenderer=function(){return this.tree.getItemRenderer()},t.setItemRenderer=function(t){this.tree.setItemRenderer(t)},t.isDisabled=function(t){return this.tree.isDisabled(t)},t.setDisabled=function(t,e){this.tree.setDisabled(t,e)},t.addItem=function(t,e){return this.tree.addItem(t,e)},t.updateItem=function(t,e){return this.tree.updateItem(t,e)},t.removeItem=function(t){return this.tree.removeItem(t)},t.removeItemAt=function(t){return this.tree.removeItemAt(t)},t.addOrUpdateItem=function(t){this.tree.addOrUpdateItem(t)},t.getItemData=function(t){return this.tree.getItemData(t)},t.isEmpty=function(){return this.tree.isEmpty()},t.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},t.setMultiple=function(t){t=!(!n.isNull(t)&&!n.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this.tree.setMultiple(t))},t.getSelectedIndex=function(t){return this.tree.getSelectedIndex(t,!0)},t.setSelectedIndex=function(t){this.tree.setSelectedIndex(t,!0)},t.getSelectedKey=function(t){return this.tree.getSelectedKey(t,!0)},t.setSelectedKey=function(t){this.tree.setSelectedKey(t,!0)},t.getSelectedData=function(t){return this.tree.getSelectedData(t,!0)},t.isSelectedIndex=function(t){return this.tree.isSelectedIndex(t)},t.isSelectedKey=function(t){return this.tree.isSelectedKey(t)},t.isAllSelected=function(){return this.tree.isAllSelected()},t.length=function(){return this.tree.length()};var a=function(t){u.call(this)},o=function(t){$(t.target).is(".dropdown")&&h.call(this)},l=function(t){p.call(this)},d=function(t,e){this.isMultiple()||(p.call(this),!e.leaf&&this.isRenderAsApp()||h.call(this))},c=function(t){s.fn.mouseDebounce(t,h.bind(this))},u=function(){if(!function(){return this.$el.is(".show-dropdown")}.call(this)){var t=this.$el.addClass("show-dropdown");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",c.bind(this)),t.on("mouseleave",c.bind(this));var e=t.children(".dropdown"),i=s.fn.getDropdownHeight.call(this,e);n.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}setTimeout(function(){t.addClass("animate-in")},0)}},h=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},p=function(){var e=this,t=this.getSelectedData(!0),i=n.map(n.toArray(t),function(t){return e.tree._getDataLabel(t)});i=i.join(", "),this.$el.children(".ipt").find("input").val(i||""),i?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.trigger("change"),this.$el.trigger("change")};i.register(".ui-treecombobox",r)}}(),function(c){if(c||!VRender.Component.Render.datagrid){var u=c?require(__vrender__).Utils:VRender.Utils,a=c?require("./_base"):VRender.Component.Render,o={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss"},h={asc:"/VRender/icons/020c.png",desc:"/VRender/icons/021c.png"},t=function(t,e){a._select.call(this,t,e)},e=t.prototype=new a._select;(t.rowRenderer=function(t,e,i,n){s.call(this,t,e,this.__columns,i,n)})._state=1,e.render=function(t,e){e.addClass("ui-datagrid");var i=u.getFormatSize(this.options.height,this.isRenderAsRem());i&&e.attr("opt-fixed","1").css("height",i),this.isChkboxVisible()&&e.attr("opt-chk","1");var n=parseInt(this.options.expandcols);n&&e.attr("opt-expcols",n);var s=t("<div class='table'></div>").appendTo(e);s.append("<header><div></div></header>"),s.append("<section><div><table><thead></thead><tbody></tbody></table></div></section>");var r=this.__columns=this.getColumns();return a._select.render.call(this,t,e),l.call(this,t,e,r),b.call(this,t,e,r),this.renderComplete=!0,this},e._getItemContainer=function(t,e){return(e=e.children(".table").children("section").children()).children("table").children("tbody")},e._getNewItem=function(t,e,i,n){return t("<tr class='datagrid-row'></tr>").appendTo(e)},e._renderItems=function(t,e){var i=this.getData(),s=!1,n=null,r=[].concat(i);if(i&&0<i.length){var a=this;u.each(this.__columns,function(i){if(u.isTrue(i.filter)&&u.isNotBlank(i.filterValue)){var n=a._getFilterFunction(i,i.filterValue);r=u.filter(r,function(t,e){return n(i,t,i.filterValue)}),s=!0}});var o=u.find(this.__columns,function(t){return u.isTrue(t.sortable)&&t.sortType});if(o){var l=this._getSortFunction(o,o.sortType);r.sort(function(t,e){return l(o,t,e,o.sortType)}),s=!0}}s&&(n=u.map(r,function(e){return u.index(i,function(t){return t==e})})),this._renderDatas=r,g.call(this,t,e,r,n)},e.getItemRenderer=function(){return t.rowRenderer},e._renderEmptyView=function(t,e){a._item.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){a._item.renderLoadView.call(this,t,e)},e._getSortFunction=function(t,e){return T.call(this,t,e)},e._getFilterFunction=function(t,e){return $.call(this,t,e)},e._hasExpand=function(){return 0<=u.index(this.__columns,function(t){return!!t.expand})},e.getColumns=function(){return i(this.options.columns)},e.isChkboxVisible=function(){return u.isTrue(this.options.chkbox)},e.isHeaderVisible=function(){return!this.options.hasOwnProperty("showHeader")||u.isTrue(this.options.showHeader)},e.getHeadRenderer=function(){return this.options.headRenderer},e.getColumnRenderer=function(){return this.options.columnRenderer||this.options.renderer},e.getExpandRenderer=function(){return this.options.expandRenderer},e.getRowStyleFunction=function(){return this.options.rowStyleFunction},e.getCellStyleFunction=function(){return this.options.cellStyleFunction};var l=function(s,t,e){if(this.isHeaderVisible()){var i=this.isRenderAsApp(),n=(t=t.removeClass("no-head").children(".table")).children("section").children().children("table").children("thead").empty();row=s("<tr></tr>").appendTo(n),this.isAllSelected(this._renderDatas||[])&&row.addClass("selected"),this._hasExpand()&&!i&&row.append("<th class='col-exp'></th>"),this.isChkboxVisible()&&row.append("<th class='col-chk'><span class='chkbox'></span></th>");var r=this;u.each(e,function(t,e){if(!t.expand){var i=s("<th></th>").appendTo(row);i.addClass("col-"+e),u.isNotBlank(t.name)&&i.attr("col-name",t.name),u.isNotBlank(t.dataType)&&i.attr("col-type",t.dataType);var n=u.getFormatSize(t.width,r.isRenderAsRem());n&&i.css("width",n),d.call(r,s,i,t,e),p.call(r,s,i,t,e)}}),this._hasExpand()&&i&&row.append("<th class='col-exp'></th>");var a=t.children("header").children().empty();c?a.write("<table><thead>"+n.html()+"</thead></table>"):a.html("<table><thead>"+n.html()+"</thead></table>"),row.find(".dropdown").remove()}else t.addClass("no-head")},d=function(t,e,i,n){if(!i.html){var s=this.getHeadRenderer();if(u.isFunction(s)){var r=s(i,n);if(r)return void(c&&u.isFunction(r.render)?r.render(e):e.append(r.$el||r))}}i.icon&&t("<i>&nbsp;</i>").appendTo(e).css("backgroundImage","url("+i.icon+")");var a=t("<div class='title'></div>").appendTo(e);i.html?a.html(i.html):a.text(i.title||i.name||"列 "+(n+1))},p=function(t,e,i,n){if(i.sortable||i.filter){var s=t("<div class=toolbar></div>").appendTo(e);i.sortable&&(i.sortType&&e.attr("opt-sort",i.sortType),r.call(this,t,s,i)),i.filter&&(i.filterValue&&e.attr("opt-filter",i.filterValue),f.call(this,t,s,i))}},r=function(t,e,i){var n=t("<div class='sort'><i title='排序'></i></div>").appendTo(e);this.isRenderAsApp()||u.isArray(i.sortable)&&0<i.sortable.length&&m.call(this,t,n,i.sortable,i.sortType,"无")},f=function(t,e,i){var n=t("<div class='filter'><i title='筛选'></i></div>").appendTo(e),s=i.filter;if("enum"==s&&(s=(s=y.call(this,i))&&0<s.length?u.map(s,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}]),!this.isRenderAsApp())if(u.isArray(s))m.call(this,t,n,s,i.filterValue,"空");else{var r=t("<div class='dropdown ipt'></div>").appendTo(n),a=t("<input/>").appendTo(r);i.filterValue&&a.val(i.filterValue)}},m=function(a,o,t,l,d){var c=a("<ul class='dropdown'></ul>").appendTo(o);u.each(t,function(t){var e=a("<li></li>").appendTo(c),i=!1;t.hasOwnProperty("type")&&(e.attr("data-type",t.type),i=t.type==l),t.hasOwnProperty("value")&&(e.attr("data-val",t.value),i=t.value==l);var n=a("<i></i>").appendTo(e),s=t.icon||h[t.type];if(s&&n.css("backgroundImage","url("+s+")"),a("<span></span>").appendTo(e).text(t.label||d),i){e.addClass("selected");var r=o.children("i");s&&r.css("backgroundImage","url("+s+")"),t.label&&r.attr("title",t.label)}})},g=function(s,t,e,r,i){var a=this._getItemContainer(s,t).empty(),o=i||this.getSelectedIndex(!0),l=this.getSelectedKey(!0)||[],d=this;u.each(e,function(t,e){var i=r?r[e]:e,n=d._getNewItem(s,a,t,i);n&&(d._renderOneItem(s,n,t,i),d._isSelected(t,e,o,l)&&n.addClass("selected"))})},s=function(n,s,t,r,a){s.attr("opt-ind",a);var e=this.isRenderAsApp(),i=this.getRowStyleFunction();if(u.isFunction(i)){var o=i(r,a);o&&s.css(o)}this._hasExpand()&&!e&&s.append("<td class='col-exp'><span class='expbtn'></span></td>"),this.isChkboxVisible()&&s.append("<td class='col-chk'><span class='chkbox'></span></td>");var l=this;u.each(t,function(t,e){if(!t.expand){var i=n("<td></td>").appendTo(s);v.call(l,n,i,t,r,a,e)}}),this._hasExpand()&&e&&s.append("<td class='col-exp'><span class='expbtn'></span></td>")},v=function(t,e,i,n,s,r){var a=this.getCellStyleFunction();if(u.isFunction(a)){var o=a(i.name,n,s,r);o&&e.css(o)}e.addClass("col-"+r),u.isNotBlank(i.name)&&e.attr("col-name",i.name);var l=null,d=this.getColumnRenderer();u.isFunction(d)&&(l=d(i.name,n,s,r,i)),u.isNull(l)&&(l=I.call(this,i,n,r)),u.isBlank(l)&&(l="&nbsp;"),c&&u.isFunction(l.render)?l.render(e):e.append(l.$el||l)},b=function(t,e,i){if(c){var n=u.map(i,function(t){var e=u.extend({},t);return e.html&&(e.html=escape(
e.html)),u.isFunction(e.sortFunction)?e.sortFunction=escape(e.sortFunction):u.isArray(e.sortable)&&u.each(e.sortable,function(t){u.isFunction(t.handler)&&(t.handler=escape(t.handler))}),u.isFunction(e.filterFunction)?e.filterFunction=escape(e.filterFunction):u.isArray(e.filter)&&u.each(e.filter,function(t){u.isFunction(t.handler)&&(t.handler=escape(t.handler))}),e});e.write("<div class='ui-hidden' name='columns' data='"+JSON.stringify(n)+"'></div>"),a.fn.renderFunction(e,"hrender",this.getHeadRenderer()),a.fn.renderFunction(e,"crender",this.getColumnRenderer()),a.fn.renderFunction(e,"erender",this.getExpandRenderer()),a.fn.renderFunction(e,"rstyle",this.getRowStyleFunction()),a.fn.renderFunction(e,"cstyle",this.getCellStyleFunction())}},y=function(t,e){var i=[],n=t&&t.name;return n&&(e=e||this.getData(!0),u.each(e,function(t){var e=t&&t[n];u.index(i,function(t){return t==e})<0&&i.push(e)})),i.sort()},i=function(t){t=u.map(u.toArray(t),n);var e=null,i=!0;return u.each(t,function(t){t.sortType&&(e&&(e.sortType=null),e=t),t.expand||(i=!1)}),i&&0<t.length&&(t[0].expand=!1),t},n=function(t,e){var i={};return u.isNull(t)?i.title="列 "+(e+1):u.isPrimitive(t)?i.name=u.trimToEmpty(t):(i.name=u.trimToEmpty(t.name),i.title=u.trimToNull(t.title),i.html=u.trimToNull(t.focusHtmlTitle),i.icon=u.trimToNull(t.icon),i.width=u.trimToNull(t.width),i.expand=u.isTrue(t.expand),u.isTrue(t.sortable)&&_(i,t),u.isTrue(t.filter)&&w(i,t)),i},_=function(t,e){u.isFunction(e.sortFunction)?t.sortFunction=e.sortFunction:u.isFunction(e.sortable)&&(t.sortFunction=e.sortable),u.isArray(e.sortable)&&0<e.sortable.length?t.sortable=u.map(e.sortable,function(t){return{type:t.type,label:t.label,icon:t.icon,handler:t.handler,custom:t.custom}}):t.sortable="custom"!=e.sortable||"custom",t.sortType=e.sortType?u.trimToNull(e.sortType):null},w=function(t,e){u.isFunction(e.filterFunction)?t.filterFunction=e.filterFunction:u.isFunction(e.filter)&&(t.filterFunction=e.filter),u.isArray(e.filter)&&0<e.filter.length?t.filter=u.map(e.filter,function(t){return{label:t.label,value:t.value,icon:t.icon,handler:t.handler,custom:t.custom}}):t.filter=!/^(custom|enum)$/.test(e.filter)||e.filter,t.filterValue=e.filterValue?u.trimToNull(e.filterValue):null},T=function(s,t){if(s){if(u.isNotNull(t)&&u.isArray(s.sortable)){var r=u.findBy(s.sortable,"type",t);if(r&&u.isFunction(r.handler))return function(t,e,i,n){return r.handler(e,i,n)}}if(u.isFunction(s.sortFunction))return function(t,e,i,n){return s.sortFunction(e,i,n)}}if(u.isFunction(this.options.sortFunction)){var a=this.options.sortFunction;return function(t,e,i,n){return a(e,i,n,t)}}return C},$=function(n,t){if(n){if(u.isNotNull(t)&&u.isArray(n.filter)){var s=u.findBy(n.filter,"value",t);if(s&&u.isFunction(s.handler))return function(t,e,i){return s.handler(e,i)}}if(u.isFunction(n.filterFunction))return function(t,e,i){return n.filterFunction(e,i)}}if(u.isFunction(this.options.filterFunction)){var r=this.options.filterFunction;return function(t,e,i){return r(e,i,t)}}return x},C=function(i,t,e,n){if(i&&i.name&&/^(asc|desc)$/i.test(n)){var s=t?t[i.name]:null,r=e?e[i.name]:null;return function(){if(u.isNull(s))return u.isNull(r)?0:-1;if(u.isNull(r))return u.isNull(s)?0:1;var t=i.dataType;if(/date/i.test(t)){if(s=u.toDate(s),r=u.toDate(r),!s)return r?1:0;if(!r)return s?-1:0;var e=/^date$/i.test(t)?"yyyyMMddHHmmss":"yyyyMMdd";return s=u.toDateString(s,e),r=u.toDateString(r,e),s<r?-1:r<s?1:0}return/num/i.test(t)||!isNaN(s)&&!isNaN(r)?parseFloat(s)-parseFloat(r):s.localeCompare(r)}()*(/^asc$/i.test(n)?1:-1)}return 0},x=function(t,e,i){if(!t&&!t.name)return!0;if(u.isNull(e))return!1;var n=e[t.name];if(n===i)return!0;var s=t.dataType;if(/date/i.test(s)){if(!(i=u.toDate(i)))return!0;if(n=u.toDate(n)){var r=/^date$/i.test(s)?"yyyyMMdd":"yyyyMMddHHmmss";return i=u.toDateString(i,r),0===(n=u.toDateString(n,r)).indexOf(i)}return!1}return u.isNull(n)?u.isNull(i):u.isNull(i)?u.isNull(n):/num/i.test(s)||!isNaN(i)&&!isNaN(n)?parseFloat(i)==parseFloat(n):i==n||(i=u.trimToEmpty(i),0<=(n=u.trimToEmpty(n)).indexOf(i))},I=function(t,e,i){if(u.isBlank(e))return null;if(u.isBlank(t.name))return""+e;var n=e[t.name];if(t.dataType&&u.isNotBlank(n)){var s=t.dataType;if("localtime"===s)n=u.toLocalDateString(u.toDate(n));else if(/^(date|datetime|time)$/.test(s))(n=u.toDate(n))&&(n=u.toDateString(n,o[s]));else if("money"===s)n=parseFloat(n),n=isNaN(n)?null:"<span class='val'>￥<span class='v1'>"+(n=n.toFixed(2).split("."))[0]+"</span>.<span class='v2'>"+n[1]+"</span></span>";else if("number"===s||"num"===s)if(n=parseFloat(n),isNaN(n))n=null;else{var r=parseFloat(t.decimals);(isNaN(r)||r<0)&&(r=0),n=n.toFixed(r)}}return n};c?module.exports=t:(t.dateFormats=o,t.defaultIcons=h,t.getFormatColumns=i,t.getSortFunction=T,t.getFilterFunction=$,t.renderHeader=l,t.renderItems=g,t.renderCell=v,t.getColumnValueSet=y,t.renderToolDropdown=m,VRender.Component.Render.datagrid=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Datagrid){var c=VRender.Utils,o=VRender.Component,s=o.Render,u=s.datagrid,r=window.UIDatagrid=o.Datagrid=function(t,e){if(!o.base.isElement(t))return r.create(t);if(this.init(t,e)!==this)return o.get(t);this.__columns=this.getColumns();var i=this.$el,n=this.gridHead=i.children(".table").children("header").children(),s=this.gridBody=i.children(".table").children("section").children();n.on("tap","th.col-chk",d.bind(this)),s.on("tap","tr",a.bind(this)),s.on("tap","td.col-exp .expbtn",h.bind(this)),this.isRenderAsApp()?(n.on("tap","th",l.bind(this)),i.on("tap",".sort-and-filter",v.bind(this)),i.on("tap",".sort-and-filter .item",b.bind(this)),i.on("tap",".sort-and-filter input",y.bind(this)),i.on("tap",".sort-and-filter .clearbtn",_.bind(this)),i.on("tap",".sort-and-filter .submitbtn",w.bind(this)),i.on("keyup",".sort-and-filter input",T.bind(this))):(n.on("tap",".toolbar > *",p.bind(this)),n.on("tap",".toolbar .dropdown li",m.bind(this)),n.on("mouseenter",".toolbar > *",f.bind(this)),n.on("mouseleave",".toolbar > *",f.bind(this))),I.call(this),this.renderComplete=!0},t=r.prototype=new o.select;r.find=function(t){return o.find(t,".ui-datagrid",r)},r.create=function(t){return o.create(t,r,u)},t.getData=function(t){if(t)return this.options.data=this._doAdapter(this.options.data),this.options.data;var n=this.getData(!0);return c.map(this._getItems(),function(t){var e=t.data("itemData");if(!e){var i=parseInt(t.attr("opt-ind"))||0;e=n[i]}return e})},t.setData=function(t){var e=this._snapshoot();this.options.data=this._doAdapter(t),o.select.setSelectedIndex.call(this,[]),this._getItems().removeClass("selected").removeClass("expand"),C.call(this),e.done([],[])},t.getColumns=function(){if(this.options.hasOwnProperty("columns"))return this.options.columns;var e=function(t){return new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")()},i=this.$el.children("[name='columns']");if(i&&0<i.length)try{i=JSON.parse(i.remove().attr("data")),c.each(i,function(t){t.html&&(t.html=unescape(t.html)),/^function/.test(t.sortable)?t.sortable=e(t.sortable):c.isArray(t.sortable)&&c.each(t.sortable,function(t){/^function/.test(t.handler)&&(t.handler=e(t.handler))}),/^function/.test(t.sortFunction)&&(t.sortFunction=e(t.sortFunction)),/^function/.test(t.filter)?t.filter=e(t.filter):c.isArray(t.filter)&&c.each(t.filter,function(t){/^function/.test(t.handler)&&(t.handler=e(t.handler))}),/^function/.test(t.filterFunction)&&(t.filterFunction=e(t.filterFunction))})}catch(t){i=[]}else i=[];return this.options.columns=i,this.options.columns},t.setColumns=function(t){this.options.columns=u.getFormatColumns(t);var i=this.__columns=this.options.columns;if(this.currentSort&&this.currentSort.name){var e=c.findBy(i,"name",this.currentSort.name);e&&c.isTrue(e.sortable)&&e.sortType==this.currentSort.type?this.currentSort.column=e:this.currentSort=null}this.currentFilters&&c.remove(this.currentFilters,function(t){if(t.name){var e=c.findBy(i,"name",t.name);if(!e)return!0;t.column=e}}),n.call(this)},t.isHeaderVisible=function(){return!this.$el.is(".no-head")},t.setHeaderVisible=function(t){c.isNull(t)||c.isTrue(t)?this.isHeaderVisible()||(this.$el.removeClass("no-head"),i.call(this)):this.isHeaderVisible()&&(this.$el.addClass("no-head"),i.call(this))},t.isChkboxVisible=function(){return"1"==this.$el.attr("opt-chk")},t.setChkboxVisible=function(t){c.isNull(t)||c.isTrue(t)?this.isChkboxVisible()||(this.$el.attr("opt-chk","1"),n.call(this)):this.isChkboxVisible()&&(this.$el.removeAttr("opt-chk"),n.call(this))},t.getItemRenderer=function(){return u.rowRenderer},t.setItemRenderer=function(t){},t.getHeadRenderer=function(){return s.fn.getFunction.call(this,"headRenderer","hrender")},t.setHeadRenderer=function(t){var e=this.getHeadRenderer()!=t;this.options.headRenderer=t,e&&i.call(this)},t.getColumnRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:s.fn.getFunction.call(this,"columnRenderer","crender")},t.setColumnRenderer=function(t){var e=this.getColumnRenderer()!=t;this.options.columnRenderer=t,delete this.options.renderer,e&&C.call(this)},t.getExpandRenderer=function(){return s.fn.getFunction.call(this,"expandRenderer","erender")},t.setExpandRenderer=function(t){var e=this.getExpandRenderer()!=t;if(this.options.expandRenderer=t,e){var i=this._getItemContainer();i.children(".row-expand").remove(),i.children(".expand").removeClass("expand").children(".col-exp").children(".expbtn").trigger("tap")}},t.getExpandColspan=function(){return parseInt(this.$el.attr("opt-expcols"))||0},t.setExpandColsapn=function(t){if(!isNaN(t)&&(t||0===t)&&(t=parseInt(t),!isNaN(t)&&0<t&&this.getExpandColspan()!=t)){this.$el.attr("opt-expcols",t);var e=this._getItemContainer();e.children(".row-expand").remove(),e.children(".expand").removeClass("expand").children(".col-exp").children(".expbtn").trigger("tap")}},t.getRowStyleFunction=function(){return s.fn.getFunction.call(this,"rowStyleFunction","rstyle")},t.setRowStyleFunction=function(t){var e=this.getRowStyleFunction()!=t;this.options.rowStyleFunction=t,e&&C.call(this)},t.getCellStyleFunction=function(){return s.fn.getFunction.call(this,"cellStyleFunction","cstyle")},t.setCellStyleFunction=function(){var t=this.getCellStyleFunction()!=value
;this.options.cellStyleFunction=value,t&&C.call(this)},delete t.getLabelField,delete t.setLabelField,delete t.getLabelFunction,delete t.setLabelFunction,delete t.setItemRenderer,t.sort=function(t,e,i){c.isFunction(t)&&(i=t,t=e=null),c.isFunction(e)&&(i=e,e=null),t&&(t=L.call(this,""+t)),D.call(this,t,e,i)},t.filter=function(t,e,i){c.isFunction(t)&&(i=t,t=e=null),c.isFunction(e)&&(i=e,e=null),t&&(t=L.call(this,""+t)),R.call(this,t,e,i)},t.addItem=function(t,e){if(!c.isNull(t)){e=c.getIndexValue(e);var i=this.getData(!0);t=s.fn.doAdapter.call(this,t,e),0<=e&&e<i.length?i.splice(e,0,t):i.push(t);var n=this._snapshoot();C.call(this),n.done()}},t.updateItem=function(t,e){if(!c.isNull(t)){var i=this.getData(!0);if(e||0===e?(e=c.getIndexValue(e),t=s.fn.doAdapter.call(this,t,e)):(t=s.fn.doAdapter.call(this,t),e=this.getDataRealIndex(t,i)),0<=e){i.splice(e,1,t);var n=this._snapshoot();C.call(this),n.done()}}},t.removeItem=function(t){c.isNotNull(t)&&this.removeItemAt(this.getDataRealIndex(t))},t.removeItemAt=function(t){if(0<=(t=c.getIndexValue(t))){var e=this.getData(!0);if(t<e.length){e.splice(t,1);var i=this._snapshoot();C.call(this),i.done()}}},t.addOrUpdateItem=function(t){var e=this.getDataRealIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},t.getDataRealIndex=function(e,t){if((t=t||this.getData(!0))&&0<t.length){var i=this,n=this._getDataKey(e);return c.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},t._getItemContainer=function(){if(!this.itemContainer){var t=this.$el.children(".table").children("section").children();this.itemContainer=t.children("table").children("tbody")}return this.itemContainer},t._getNewItem=function(t,e,i,n){return t("<tr class='datagrid-row'></tr>").appendTo(e)},t._getItemData=function(t){var e=t.data("itemData");if(!e){var i=this.getData(!0);if(c.isArray(i)&&0<i.length){var n=parseInt(t.attr("opt-ind"));if(!isNaN(n)&&0<=n)return i[n]}}return e},t._getSortFunction=function(t,e){return u.getSortFunction.call(this,t,e)},t._getFilterFunction=function(t,e){return u.getFilterFunction.call(this,t,e)},t._hasExpand=function(){return 0<=c.index(this.__columns,function(t){return!!t.expand})},t._rerender=function(){n.call(this)},t._snapshoot_change=function(){U.call(this)};var a=function(t){var e=$(t.currentTarget);if(e.parent().is(this._getItemContainer())){if(e.is(".disabled"))return;e.is(".selected")?e.removeClass("selected"):(e.addClass("selected"),this.isMultiple()||e.siblings().removeClass("selected")),U.call(this)}},l=function(t){var e=$(t.currentTarget),i=e.attr("col-name"),n=i&&L.call(this,i);if(n)if(n.filter||c.isArray(n.sortable))S.call(this,n,e);else if(n.sortable){var s=e.attr("opt-sort");s="desc"==s?null:"asc"==s?"desc":"asc",D.call(this,n,s)}},d=function(t){var e=this.gridHead.find("tr"),i=[];if(e.is(".selected"))e.removeClass("selected");else{e.addClass("selected");for(var n=0,s=this.length();n<s;n++)i.push(n)}this.setSelectedIndex(i)},h=function(t){var e=$(t.currentTarget).parent().parent();if(e.parent().is(this._getItemContainer())){if(e.is(".disabled"))return!1;if(e.is(".expand"))e.removeClass("expand"),e.next().remove();else{e.addClass("expand");var i=parseInt(e.attr("opt-ind"))||0,n=this._getItemData(e,i);x.call(this,$,e,n,i)}return!1}},p=function(t){var e=$(t.currentTarget),i=e.parent().parent(),n=L.call(this,i.attr("col-name")),s=e.children(".dropdown");if(s&&0<s.length)e.addClass("show-dropdown"),s.is(".ipt")&&s.find("input").focus().off("keydown").on("keydown",g.bind(this));else if(e.is(".sort")){var r=i.attr("opt-sort");r="desc"==r?null:"asc"==r?"desc":"asc",D.call(this,n,r)}else e.is(".filter")},f=function(t){var e=$(t.currentTarget),i=parseInt(e.attr("opt-t"))||0;i&&(clearTimeout(i),e.removeAttr("opt-t")),"mouseleave"==t.type&&(i=setTimeout(function(){if(e.removeClass("show-dropdown"),e.removeAttr("opt-t"),e.is(".filter")){var t=e.find("input");t&&0<t.length&&VRender.onInputChange(t,null)}},400),e.attr("opt-t",i))},m=function(t){var e=$(t.currentTarget),i=e.parent().parent(),n=i.parent().parent(),s=L.call(this,n.attr("col-name")),r=parseInt(i.attr("opt-t"))||0;return r&&clearTimeout(r),i.removeClass("show-dropdown").removeAttr("opt-t"),i.is(".sort")?D.call(this,s,e.is(".selected")?null:e.attr("data-type")):i.is(".filter")&&R.call(this,s,e.is(".selected")?null:e.attr("data-val")),!1},g=function(t){if(13==t.which){var e=$(t.currentTarget),i=c.parentUntil(e,"th").attr("col-name");if(i){var n=L.call(this,i);R.call(this,n,e.val()||null)}}},v=function(t){if($(t.target).is(".sort-and-filter"))return B.call(this),!1},b=function(t){var e=$(t.currentTarget),i=this.$el.children(".sort-and-filter").data("column");if(e.parent().parent().is(".sort")){var n=e.is(".selected")?null:e.attr("data-type");D.call(this,i,n)}else{var s=e.is(".selected")?null:e.attr("data-val");R.call(this,i,s)}B.call(this)},y=function(t){this.$el.children(".sort-and-filter").addClass("inputing")},_=function(t){var e=this.$el.children(".sort-and-filter"),i=e.find("input").val("");e.is(".inputing")&&setTimeout(function(){i.focus()},0)},w=function(t){var e=this.$el.children(".sort-and-filter"),i=e.data("column"),n=e.find("input").val()||null;R.call(this,i,n),B.call(this)},T=function(t){13==t.which&&this.$el.children(".sort-and-filter").find(".submitbtn").tap()},n=function(){this.t_rerender&&(clearTimeout(this.t_rerender),this.t_rerender=0),this.t_rerenderheader&&(clearTimeout(this.t_rerenderheader),this.t_rerenderheader=0),this.t_rerenderitems&&(clearTimeout(this.t_rerenderitems),this.t_rerenderitems=0);var t=this;this.t_rerender=setTimeout(function(){t.t_rerender=0,u.renderHeader.call(t,$,t.$el,t.__columns),A.call(t,!0)},0)},i=function(){if(!this.t_rerender){this.t_rerenderheader&&(clearTimeout(this.t_rerenderheader),this.t_rerenderheader=0);var t=this;this.t_rerenderheader=setTimeout(function(){t.t_rerenderheader=0,u.renderHeader.call(t,$,t.$el,t.__columns)},0)}},C=function(){if(!this.t_rerender){this.t_rerenderitems&&(clearTimeout(this.t_rerenderitems),this.t_rerenderitems=0);var t=this;this.t_rerenderitems=setTimeout(function(){t.t_rerenderitems=0,A.call(t,!0),e.call(t)},0)}},x=function(s,t,r,a){var e=s("<tr class='row-expand'></tr>").insertAfter(t),i=s("<td></td>").appendTo(e);i.attr("colspan",t.children().length);var n=s("<div class='container'></div>").appendTo(i),o=this.getExpandRenderer();if(c.isFunction(o)){var l=o(r,a);c.isNotNull(l)&&n.append(l.$el||l)}else{var d=this;(l=s("<div class='datagrid-expand'></div>").appendTo(n)).attr("cols",this.getExpandColspan()),c.each(this.__columns,function(t,e){if(c.isTrue(t.expand)){var i=s("<div></div>").appendTo(l);i.addClass("col-"+e).attr("col-name",t.name),i=s("<dl></dl>").appendTo(i),s("<dt></dt>").appendTo(i).text(t.title||t.name||"");var n=s("<dd></dd>").appendTo(i);u.renderCell.call(d,s,n,t,r,a,e),i.removeClass("col-"+e).removeAttr("col-name")}})}},e=function(){if(!this.isRenderAsApp()){var r=this;c.each(F.call(this),function(t){if(t.attr("col-name")){var e=L.call(r,t.attr("col-name"));if(e&&"enum"==e.filter){var i=t.find(".toolbar .filter"),n=u.getColumnValueSet.call(r,e),s=t.attr("opt-filter");n=n&&0<n.length?c.map(n,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}],i.children(".dropdown").remove(),u.renderToolDropdown.call(r,$,i,n,s,"空")}}})}},I=function(){this.$el.children("[name='irender']").remove(),P.call(this)},D=function(t,e,i){var n=F.call(this);n.removeAttr("opt-sort"),n.find(".sort > i").css("backgroundImage",""),n.find(".sort .dropdown li").removeClass("selected");var s=t&&"custom"==t.sortable;if(t&&t.name&&c.isNotNull(e)){var r=n.filter("[col-name='"+t.name+"']");if(r&&0<r.length){r.attr("opt-sort",e);var a=u.defaultIcons[e];if(c.isArray(t.sortable)){this.isRenderAsApp()||r.find(".sort li[data-type='"+e+"']").addClass("selected");var o=c.findBy(t.sortable,"type",e)||{};a=o.icon||a,s=c.isTrue(o.custom)}a&&r.find(".sort > i").css("backgroundImage","url("+a+")")}}if(this.currentSort={column:t,type:e,fn:i,name:t&&t.name},c.isFunction(i)){var l=i;this.currentSort.fn=function(t,e,i,n){return l(e,i,n,t)}}else c.isNotNull(e)&&!s&&(this.currentSort.fn=this._getSortFunction(t,e));!c.isFunction(this.currentSort.fn)&&s||A.call(this),this.trigger("sort",t&&t.name,e)},R=function(t,e,i){var n=t&&"custom"==t.filter,s=c.isNull(e)||!1===e;if(t&&t.name){var r=F.call(this).filter("[col-name='"+t.name+"']");if(r&&0<r.length&&(r.removeAttr("opt-filter"),r.find(".filter > i").css("backgroundImage",""),r.find(".filter li").removeClass("selected"),(!s||c.isFunction(i))&&(r.attr("opt-filter",!!s||e),this.isRenderAsApp()||(r.find(".filter .dropdown").is(".ipt")?r.find(".filter input").val(s?"":e):s||r.find(".filter li[data-val='"+e+"']").addClass("selected")),c.isArray(t.filter)))){var a=c.findBy(t.filter,"value",e)||{};a.icon&&r.find(".filter > i").css("backgroundImage","url("+a.icon+")"),n=c.isTrue(a.custom)}}if(c.isFunction(i)){var o=i;i=function(t,e,i){return o(e,i,t)}}else s||n||(i=this._getFilterFunction(t,e));var l=t&&t.name||"";if(this.currentFilters)if(!s||c.isFunction(i)){var d=c.findBy(this.currentFilters,"name",l);d||(d={name:l,column:t},this.currentFilters.push(d)),d.value=e,d.fn=i}else c.removeBy(this.currentFilters,"name",l);n||A.call(this,!0),this.trigger("filter",l,e)},A=function(t){var n=this.getData(!0);if(t||!this.lastFilterDatas){var s=[].concat(n);s&&0<s.length&&(this.currentFilters||N.call(this),c.each(this.currentFilters,function(e){s=c.filter(s,function(t){return e.fn(e.column,t,e.value)})})),this.lastFilterDatas=s}if(s=this.lastFilterDatas,this.currentSort||V.call(this),this.currentSort&&c.isFunction(this.currentSort.fn)){var i=this.currentSort;s=s.slice(0).sort(function(t,e){return i.fn(i.column,t,e,i.type)})}var e=c.map(s,function(e){return c.index(n,function(t){return t==e})}),r=[],a=[];c.each(this._getItems(),function(t){if(t.is(".selected")){var e=parseInt(t.attr("opt-ind"))||0,i=n&&n[e];i&&0<=(e=c.index(s,function(t){return t==i}))&&r.push(e)}t.is(".expand")&&a.push(t.attr("opt-ind"))}),u.renderItems.call(this,$,this.$el,s,e,r),U.call(this),t&&o.item.checkIfEmpty.call(this),0<a.length&&c.each(this._getItems(),function(t){0<=a.indexOf(t.attr("opt-ind"))&&t.children(".col-exp").children(".expbtn").trigger("tap")})},V=function(){var t=c.find(
F.call(this),function(t){return!!t.attr("opt-sort")});if(this.currentSort=null,t&&0<t.length){var e=t.attr("col-name"),i=t.attr("opt-sort"),n=L.call(this,e),s=this._getSortFunction(n,i);this.currentSort={name:e,column:n,type:i,fn:s}}},N=function(){var r=this.currentFilters=[],a=this;c.each(F.call(this),function(t){var e=t.attr("col-name"),i=t.attr("opt-filter");if(e&&c.isNotNull(i)&&!1!==i){var n=L.call(a,e),s=a._getFilterFunction(n,i);r.push({name:e,column:n,value:i,fn:s})}})},F=function(){return this.gridHead.children("table").children("thead").children("tr").children("th")},S=function(t,e){$("body").addClass("ui-scrollless");var i=$("<div class='sort-and-filter'></div>").appendTo(this.$el),n=$("<div class='container'></div>").appendTo(i);i.data("column",t);var s=c.isTrue(t.sortable),r=c.isTrue(t.filter);s&&k.call(this,n,t,e.attr("opt-sort")),r&&M.call(this,n,t,e.attr("opt-filter")),s||!r||"enum"==t.filter||c.isArray(t.filter)||(i.addClass("inputing"),i.find(".filter").focus()),setTimeout(function(){i.addClass("show")},0)},k=function(t,e,s){var i=$("<div class='sort'></div>").appendTo(t);i.append("<div class='title'>排序</div>");var n=e.sortable;c.isArray(n)||(n=[{label:"升序",type:"asc"},{label:"降序",type:"desc"}]);var r=$("<div class='content'></div>").appendTo(i);c.each(n,function(t){var e=$("<div class='item'></div>").appendTo(r);e.attr("data-type",t.type);var i=$("<i></i>").appendTo(e),n=t.icon||u.defaultIcons[t.type];n&&i.css("backgroundImage","url("+n+")"),$("<span></span>").appendTo(e).text(t.label||"无"),t.type==s&&e.addClass("selected")})},M=function(t,e,n){var i=$("<div class='filter'></div>").appendTo(t);i.append("<div class='title'>筛选</div>");var s=e.filter;"enum"==e.filter&&(s=(s=u.getColumnValueSet.call(this,e))&&0<s.length?c.map(s,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}]);var r=$("<div class='content'></div>").appendTo(i);if(c.isArray(s))c.each(s,function(t){var e=$("<div class='item'></div>").appendTo(r);e.attr("data-val",t.value);var i=$("<i></i>").appendTo(e);t.icon&&i.css("backgroundImage","url("+t.icon+")"),$("<span></span>").appendTo(e).text(t.label||"空"),t.value==n&&e.addClass("selected")});else{var a=$("<div class='filterinput'></div>").appendTo(r);a.append("<input placeholder='请输入文本'/>"),a.append("<div class='clearbtn'></div>"),a.append("<div class='submitbtn'>确定</div>"),n&&a.children("input").val(n)}},B=function(){$("body").removeClass("ui-scrollless");var t=this.$el.children(".sort-and-filter");t.removeClass("show").removeClass("inputing"),setTimeout(function(){t.remove()},300)},P=function(){this.t_layout&&(clearTimeout(this.t_layout),this.t_layout=0);var t=this;this.t_layout=setTimeout(function(){t.t_layout=0,t._isMounted()&&(O.call(t),E.call(t),P.call(t))},50)},O=function(){if(this.isHeaderVisible()){var s=F.call(this),t=this.gridBody.children("table").children("thead").children("tr").children("th");c.each(t,function(t,e){var i=s.eq(e);if(t.is(".is-expand"))i.addClass("is-expand");else{var n=t.width();n!=parseInt(i.attr("opt-w"))&&i.attr("opt-w",n).width(n)}})}},E=function(){},U=function(){var t=this._snapshoot(),e=c.map(this._getItems(".selected"),function(t){return t.index()});if(o.select.setSelectedIndex.call(this,e),this.isMultiple()){var i=this.gridHead.find("tr");this.isAllSelected()?i.addClass("selected"):i.removeClass("selected")}t.done()},L=function(t){return c.findBy(this.__columns,"name",t)};o.register(".ui-datagrid",r)}}(),function(s){if(s||!VRender.Component.Render.scrollbox){var o=s?require(__vrender__).Utils:VRender.Utils,r=s?require("./_base"):VRender.Component.Render,t=function(t,e){r._base.call(this,t,e)};(t.prototype=new r._base).render=function(t,e){if(e.addClass("ui-scrollbox"),e.append("<div class='top'></div>"),e.append("<div class='container'></div>"),e.append("<div class='bottom'></div>"),r._base.render.call(this,t,e),a.call(this,t,e),l.call(this,t,e),d.call(this,t,e),c.call(this,t,e),s){var i=this.options||{},n=h.call(this);n&&e.attr("opt-scroll",n),(i.topDistance||0===i.topDistance)&&e.attr("opt-top",i.topDistance),(i.bottomDistance||0===i.bottomDistance)&&e.attr("opt-bottom",i.bottomDistance),r.fn.renderFunction(e,"refresh",i.refreshFunction),r.fn.renderFunction(e,"more",i.moreFunction)}return this};var a=function(t,e){e=e.children(".container");var i=this.options.content||this.options.view;i&&u(e,i)},l=function(t,e){e=e.children(".top").empty();var i=this.options||{};if(i.refreshView)u(e,this.options.refreshView);else{var n=t("<div class='scrollbox-refreshdef'></div>").appendTo(e),s=o.isNull(i.refreshPullText)?"下拉刷新":o.trimToEmpty(i.refreshPullText);s&&t("<div class='pull'></div>").appendTo(n).text(s);var r=o.isNull(i.refreshDropText)?"松开刷新":o.trimToEmpty(i.refreshDropText);r&&t("<div class='drop'></div>").appendTo(n).text(r);var a=o.isNull(i.refreshLoadText)?"正在刷新..":o.trimToEmpty(i.refreshLoadText);a&&t("<div class='load'></div>").appendTo(n).text(a)}},d=function(t,e){e=e.children(".bottom").empty();var i=t("<div class='scrollbox-load'></div>").appendTo(e);if(this.options.loadingView)u(i,this.options.loadingView);else{var n=t("<div class='scrollbox-loaddef'></div>").appendTo(i),s=this.options.loadingText;(s=o.isNull(s)?"正在加载..":o.trimToEmpty(s))&&t("<p></p>").appendTo(n).text(s)}if(i=t("<div class='scrollbox-bottom'></div>").appendTo(e),this.options.bottomView)u(i,this.options.bottomView);else{var r=t("<div class='scrollbox-bottomdef'></div>").appendTo(i),a=this.options.bottomText;(a=o.isNull(a)?"没有更多了":o.trimToEmpty(a))&&t("<p></p>").appendTo(r).text(a)}},c=function(t,e){r._item.renderEmptyView.call(this,t,e)},u=function(t,e){o.isFunction(e.render)?e.render(t):t.append(e.$el||e)},h=function(){var t=this.options.scroller;if(t){if(o.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']";if("string"==typeof t)return o.trimToNull(t)}return null};s?module.exports=t:VRender.Component.Render.scrollbox=t}}("undefined"==typeof VRender),function(){if(!VRender.Component.ScrollBox){var d=VRender.Utils,i=VRender.Component,t=i.Render,e=t.scrollbox,n=window.UIScrollBox=i.ScrollBox=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):void r.call(this):n.create(t)},s=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-scrollbox",n)},n.create=function(t){return i.create(t,n,e)},s.reset=function(){},s.getContentView=function(){if(!this.contentView){var t=this.$el.children(".container").children();t&&0<t.length&&(1===t.length&&(this.contentView=i.get(t)),this.contentView||(this.contentView=t))}return this.contentView},s.setContentView=function(t){c.call(this);var e=this.options.content=t;(delete this.options.view,this.contentView=null,e)&&this.$el.children(".container").empty().append(e.$el||e);l.call(this)},s.getScrollContainer=function(){return this.scroller||(this.options.hasOwnProperty("scroller")?this.scroller=this.options.scroller:this.scroller=this.$el.attr("opt-scroll"),this.$el.removeAttr("opt-scroll"),this.scroller=this.scroller?$(this.scroller):this.$el),this.scroller},s.setScrollContainer=function(t){o.call(this),this.options.scroller=t,this.scroller=null,a.call(this)},s.getRefreshFunction=function(){return t.fn.getFunction.call(this,"refreshFunction","refresh")},s.setRefreshFunction=function(t){this.options.refreshFunction=t},s.getMoreFunction=function(){return t.fn.getFunction.call(this,"moreFunction","more")},s.setMoreFunction=function(t){this.options.moreFunction=t},s.getTopDistance=function(){return d.isNull(this.topDistance)&&(this.options.hasOwnProperty("topDistance")?this.topDistance=this.options.topDistance:(this.topDistance=this.$el.attr("opt-top"),this.$el.removeAttr("opt-top")),this.topDistance||(this.topDistance=this.isRenderAsRem()?"0.5rem":"50px"),this.topDistance=d.toPx(this.topDistance)),this.topDistance},s.setTopDistance=function(t){this.options.topDistance=t,this.$el.removeAttr("opt-top"),this.topDistance=null},s.getBottomDistance=function(){return d.isNull(this.bottomDistance)&&(this.options.hasOwnProperty("bottomDistance")?this.bottomDistance=this.options.bottomDistance:(this.bottomDistance=this.$el.attr("opt-bottom"),this.$el.removeAttr("opt-bottom")),this.bottomDistance||0===this.bottomDistance||(this.bottomDistance=this.isRenderAsRem()?"0.7rem":"70px"),this.bottomDistance=d.toPx(this.bottomDistance)),this.bottomDistance},s.setBottomDistance=function(t){this.options.bottomDistance=t,this.$el.removeAttr("opt-bottom"),this.bottomDistance=null};var r=function(){a.call(this),l.call(this);var t=this;setTimeout(function(){T.call(t),x.call(t)&&t.$el.addClass("is-loading")},10)},a=function(){var t=this.getScrollContainer();t.on("scroll.scrollbox",u.bind(this)),this.isRenderAsApp()?(t.on("touchstart.scrollbox",p.bind(this)),t.on("touchend.scrollbox",p.bind(this)),t.on("touchmove.scrollbox",p.bind(this)),t.on("touchcancel.scrollbox",p.bind(this))):(t.on("mousedown.scrollbox",h.bind(this)),t.on("mouseup.scrollbox",h.bind(this)),t.on("mousemove.scrollbox",h.bind(this)),t.on("mouseleave.scrollbox",h.bind(this)))},o=function(){var t=this.getScrollContainer();t.off("scroll.scrollbox"),this.isRenderAsApp()?(t.off("touchstart.scrollbox"),t.off("touchend.scrollbox"),t.off("touchmove.scrollbox"),t.off("touchcancel.scrollbox")):(t.off("mousedown.scrollbox"),t.off("mouseup.scrollbox"),t.off("mousemove.scrollbox"),t.off("mouseleave.scrollbox"))},l=function(){var t=this.getContentView();if(t&&d.isFunction(t.on)){t.scrollbox_loaded=function(){f.call(this)}.bind(this),t.on("loaded",t.scrollbox_loaded)}},c=function(){var t=this.getContentView();t&&d.isFunction(t.off)&&t.scrollbox_loaded&&t.off("loaded",t.scrollbox_loaded)},u=function(t){var e=m.call(this,t);e.isUp&&e.bottom<=this.getBottomDistance()&&g.call(this,e)},h=function(t){return"mousedown"==t.type?v.call(this,t):"mousemove"==t.type?b.call(this,t):"mouseup"==t.type?y.call(this,t):"mouseleave"==t.type&&y.call(this,t),!1},p=function(t){return"touchstart"==t.type?v.call(this,t):"touchmove"==t.type?b.call(this,t):"touchend"==t.type?y.call(this,t):"touchcancel"==t.type&&y.call(this,t),!1},f=function(){if(this.$el.removeClass("is-loading").removeClass("is-refresh"),T.call(this),this.$el.children(".container").outerHeight()<this.$el.height()){var t=this;setTimeout(function(){g.call(t)},10)}},
m=function(t){var e={offset:0,isUp:!0};e.time=Date.now();var i=this.getScrollContainer();e.scrollerHeight=i.height();var n=this.$el.children(".container");return e.containerHeight=n.height(),e.top=0-i.scrollTop(),e.bottom=e.containerHeight+e.top-e.scrollerHeight,e.isTop=0<=e.offsetTop,e.isBottom=e.offsetBottom<=0,this.lastState?(e.offset=e.top-this.lastState.top,30<e.time-this.lastState.time?(e.isUp=e.offset<0,this.lastState=e):e.isUp=this.lastState.isUp):this.lastState=e,e},g=function(t){if(!this.$el.is(".is-loading, .is-refresh, .no-more")){var e=this.$el.addClass("is-loading"),i=this,n=function(t){t||e.addClass("no-more"),e.removeClass("is-loading"),T.call(i)},s=!1,r=this.getContentView();if(r&&d.isFunction(r.more))var a=s=r.more(function(){setTimeout(function(){!1!==a&&n(!d.isFunction(r.hasMore)||r.hasMore())},0)});if(!1===s){var o=this.getMoreFunction();if(d.isFunction(o))var l=s=o(function(t){setTimeout(function(){!1!==l&&n(!t||!t.hasOwnProperty("hasMore")||d.isTrue(t.hasMore))},0)})}this.trigger("more"),!1===s&&n()}},v=function(t){if("touchstart"==t.type){if(1<t.touches.length)return;t=t.touches[0]}var e=this.dragData={};e.scroller=this.getScrollContainer(),e.startTop=e.scroller.scrollTop(),e.startX=t.pageX,e.startY=t.pageY},b=function(t){if("touchmove"==t.type&&(t=t.touches[0]),this.dragData){var e=this.dragData,i=t.pageY-e.startY;if(e.offset=i,!e.moveing)if("mousemove"==t.type){if(-10<i&&i<10)return;var n=t.pageX-e.startX;if(n<-10||10<n)return;e.moveing=!0}else{if(-20<i&&i<20)return;e.moveing=!0}if(e.moveing){var s=this.$el.is(".is-loading, .is-refresh"),r=e.startTop-i;0==r?(e.scroller.scrollTop(0),s||this.$el.children(".top").height(0)):0<r?e.scroller.scrollTop(r):(e.scroller.scrollTop(0),s||_.call(this,0-r))}}},y=function(t){if(this.dragData){var e=this.dragData;e.moveing&&e.startTop-e.offset<0&&(this.$el.is(".is-refresh")||w.call(this)),this.dragData=null}},_=function(t){this.$el.addClass("show-top");var e=this.$el.children(".top"),i=e.children();if(i&&0<i.length){var n=this.getTopDistance();if(t<=n)i.attr("state","pull");else{i.attr("state","drop");var s=(t-n-1)/(t-n+2);t=n+s*s*40}var r=Math.min(1,t/n);i.css("transform","scale("+r.toFixed(5)+")")}e.height(t)},w=function(){if(this.$el.is(".show-top")){var t=this.$el.children(".top"),e=t.children();t.addClass("animate");var i=this,n=function(){t.height(0),e.removeAttr("state"),setTimeout(function(){i.$el.removeClass("show-top"),t.removeClass("animate")},200)};e&&0<e.length?(e.css("transform",""),"drop"==e.attr("state")?(e.attr("state","load"),t.height(this.getTopDistance()),function(){if(!this.$el.is(".is-refresh, .is-loading")){var t=this.$el.addClass("is-refresh"),e=this,i=function(){t.removeClass("is-refresh"),t.removeClass("no-more"),w.call(e),T.call(e)},n=!1,s=this.getContentView();if(s&&d.isFunction(s.reload))var r=n=s.reload(1,function(){setTimeout(function(){!1!==r&&i()},0)});if(!1===n){var a=this.getRefreshFunction();if(d.isFunction(a))var o=n=a(function(){setTimeout(function(){!1!==o&&i()},0)})}this.trigger("refresh"),!1===n&&i()}}.call(this)):n()):n()}},T=function(){C.call(this)?this.$el.addClass("is-empty"):this.$el.removeClass("is-empty")},C=function(){var t=this.getContentView();return!t||(d.isFunction(t.isEmpty)?t.isEmpty():t.length<=0)},x=function(){var t=this.getContentView();if(t){if(d.isFunction(t.isLoading))return t.isLoading();if(t.$el)return t.$el.is(".is-loading");if(t instanceof $)return t.is(".is-loading")}return!1};i.register(".ui-scrollbox",n)}}(),function(a){if(a||!VRender.Component.Render.dialog){var o=a?require(__vrender__).Utils:VRender.Utils,r=a?require("./_base"):VRender.Component.Render,l=a?require("../../../ui/component/UIButton"):VRender.Component.Button,d=[{name:"cancel",label:"取消",type:"cancel"},{name:"ok",label:"确定",type:"primary"}],c=[{name:"ok",label:"确定",type:"primary"},{name:"cancel",label:"取消",type:"cancel"}],t=function(t,e){r._base.call(this,t,e)},e=t.prototype=new r._base;e.render=function(t,e){e.addClass("ui-dialog").css("display","none"),e.attr("opt-trans","translate"),r._base.render.call(this,t,e);var i=this.options||{};/^small|big|auto$/.test(i.size)&&e.attr("opt-size",i.size),o.isTrue(i.fill)&&e.attr("opt-fill","1"),e.attr("opt-active",o.trimToNull(this.getActiveButton()));var n=t("<div class='dialog-container'></div>").appendTo(e),s=t("<div class='dialog-view'></div>").appendTo(n);u.call(this,t,e,s),h.call(this,t,e,s),p.call(this,t,e,s)},e.getTitle=function(){var t=this.options.title;return o.isNull(t)?"标题":o.isBlank(t)?"&nbsp;":t},e.getActiveButton=function(){var t=this.options.openbtn;if(a&&t){if("string"==typeof t)return t;if(o.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']"}return null};var u=function(t,e,i){var n=t("<header></header>").appendTo(i);t("<div class='title'></div>").appendTo(n).html(this.getTitle()),n.append("<button class='closebtn'>x</button>")},h=function(t,e,i){i.append("<section></section>");var n=this.options.content||this.options.view;s.call(this,t,e,n)},p=function(t,e,i){i.append("<footer></footer>"),n.call(this,t,e,this.options.buttons)},s=function(t,e,i){var n=f(e).children("section").empty();n=t("<div class='container'></div>").appendTo(n),o.isNotBlank(i)&&(o.isFunction(i.render)?i.render(n):i.$el?i.$el.appendTo(n):n.append(i))},n=function(i,t,e){t.removeClass("has-btns");var n=f(t).children("footer");if(n.children(".btnbar").remove(),e||(e=this.isRenderAsApp()?c:d,e=JSON.parse(JSON.stringify(e))),(e=o.toArray(e))&&0<e.length){t.addClass("has-btns");var s=i("<div class='btnbar'></div>").appendTo(n);s.attr("opt-len",e.length);var r=this;o.each(e,function(t){var e=i("<div class='btn'></div>").appendTo(s);e.attr("name",t.name),!0===t.waitclose?e.attr("opt-wait","-1"):!t.waitclose&&0!==t.waitclose||isNaN(t.waitclose)||e.attr("opt-wait",Math.max(0,parseInt(t.waitclose))),a?new l(r.context,t).render(e):l.create(o.extend({},t,{target:e}))})}},f=function(t){return t.children(".dialog-container").children(".dialog-view")};a?module.exports=t:(t.renderContentView=s,t.renderFootButtons=n,VRender.Component.Render.dialog=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Dialog){var o=VRender.Utils,s=VRender.Component,i=s.Render.dialog,l=[],r=window.UIDialog=s.Dialog=function(t,e){if(!s.base.isElement(t))return r.create(t);if(this.init(t,e)!==this)return s.get(t);var i=this.dialogView=this.$el.children().children();i.children("header").on("tap",".closebtn",a.bind(this)),i.children("footer").on("tap",".btnbar > .btn",d.bind(this));var n=f.call(this);n&&0<n.length&&n.on("tap",c.bind(this)),this.isRenderAsApp()?this.$el.on("tap",u.bind(this)):p.call(this),h.call(this)},t=r.prototype=new s.base;r.find=function(t){return s.find(t,".ui-dialog",r)},r.create=function(t){if(!(t=t||{}).target){var e=$("body").children(".ui-dialog-wrap");e&&0!=e.length||(e=$("<div class='ui-dialog-wrap'></div>").appendTo($("body"))),t.target=e}return s.create(t,r,i)},r.close=function(t,e,i){if(t.is(".ui-dialog")||(t=o.parentUntil(t,".ui-dialog")),t&&0<t.length){var n=s.get(t);n&&n instanceof r&&n.close(e,i)}},t.getTitle=function(){return this.dialogView.children("header").find(".title").text()},t.setTitle=function(t){t=o.isBlank(t)?"&nbsp;":t,this.dialogView.children("header").find(".title").html(t)},t.getContent=function(){var t=this._getContentView();return t&&(t=s.get(t)||t),t},t.setContent=function(t){i.renderContentView.call(this,$,this.$el,t),h.call(this)},t.setButtons=function(t){i.renderFootButtons.call(this,$,this.$el,t)},t.getSize=function(){return this.$el.attr("opt-size")||"normal"},t.setSize=function(t){/^small|big|auto$/.test(t)?this.$el.attr("opt-size",t):this.$el.removeAttr("opt-size")},t.isFill=function(){return 1==this.$el.attr("opt-fill")},t.setFill=function(t){o.isNull(t)||o.isTrue(t)?this.$el.attr("opt-fill","1"):this.$el.removeAttr("opt-fill")},t.open=function(){if(this.isopened)return this;this.isopened=!0;var t=$("body").addClass("ui-scrollless");0==t.children(".ui-dialog-mask").length&&t.append("<div class='ui-dialog-mask'></div>"),this.$el.css("display","").addClass("show-dialog"),l.push(this),this._getContentView().trigger("dialog_open");var e=this.$el.attr("opt-trans");if(e){var i=this.$el.addClass(e+"-open");setTimeout(function(){i.addClass(e+"-opened")},0),setTimeout(function(){i.removeClass(e+"-open").removeClass(e+"-opened")},300)}return this.trigger("opened"),this},t.close=function(t,n){if(this.isopened){o.isFunction(t)&&(n=t,t=!1);var e={type:"dialog_close"};if(this._getContentView().trigger(e),t||!e.isPreventDefault){this.isopened=!1;var s=this.$el.removeClass("show-dialog"),r=s.attr("opt-trans");r&&(s.addClass(r+"-close"),setTimeout(function(){s.addClass(r+"-closed")},0));var a=this;setTimeout(function(){r&&s.removeClass(r+"-close").removeClass(r+"-closed");var t=$("body").children(".ui-dialog-wrap");a.$el.parent().is(t)&&a.$el.remove();for(var e=l.length-1;0<=e;e--)l[e]===a&&l.splice(e,1);if(0==l.length){var i=$("body").removeClass("ui-scrollless").children(".ui-dialog-mask").fadeOut(200);setTimeout(function(){i.remove()},200)}o.isFunction(n)&&n()},r?200:0),this.trigger("closed")}}},t.destory=function(){var t=this;this.close(!0,function(){t.$el.remove()})},t.isOpen=function(){return!!this.isopened},t.waiting=function(t,e){var i=null;o.isNotBlank(e)&&((i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+e+"']"))&&0<i.length||(i=null));var n=i&&parseInt(i.attr("opt-wait"))||0;n=o.isNull(t)||!0===t?n||-1:t?isNaN(t)?o.isTrue(t)?n||-1:0:Math.max(0,parseInt(t)):0,m.call(this,n,i)},t.setButtonValue=function(t,e){if(o.isNotBlank(t)&&o.isNotNull(e)){var i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+t+"']");i&&0<i.length&&(i=s.get(i.children()))&&i.setLabel(e)}},t._getContentView=function(){return this.dialogView.children("section").children(".container").children()},t._isTouchCloseable=function(){return!1!==this.options.touchCloseEnabled};var a=function(t){this.close()},d=function(t){var e=$(t.currentTarget);if(!e.is(".disabled, .waiting")){var i=e.attr("name")||"";i&&this._getContentView().trigger("dialog_btn_"+i,i,this);var n=!1;if(i){var s="btn_"+i;this.hasListen(s)&&(n=!0,this.trigger(s,i,this))}this.hasListen("btnclk")&&(n=!0,this.trigger("btnclk",i,this)
);var r=e.attr("opt-wait");if(r||0==r){if(r=parseInt(r)||0,m.call(this,r,e),0<r){var a=this;this.closeTimerId=setTimeout(function(){a.closeTimerId=0,a.close()},r)}}else n||/^ok|cancel|submit|close|save|finish$/.test(i)&&this.close(/^cancel|close$/.test(i))}},c=function(t){this._isMounted()?this.open():this.activeBtn.off("tap",arguments.callee)},n=function(){this._isMounted()?this.dialogView.children("section").children(".container").css("maxHeight",$(window).height()-200):$(window).off("resize._"+this.getViewId())},u=function(t){$(t.target).is(this.$el)&&(console.log("===",this.options.touchCloseEnabled),this._isTouchCloseable()&&this.close())},h=function(){var t=this._getContentView();if(t&&0<t.length){t.off("submit_to_dialog");var i=this;t.on("submit_to_dialog",function(t,e){i.trigger("view_submit",e),i.close()})}},p=function(){var t="resize._"+this.getViewId(),e=$(window).off(t);"auto"==this.getSize()&&(e.on(t,n.bind(this)),n.call(this))},f=function(){this.options.hasOwnProperty("openbtn")||(this.options.openbtn=this.$el.attr("opt-active"),this.$el.removeAttr("opt-active"));var t=this.options.openbtn;return t?t.$el?t.$el:$(t):null},m=function(t,e){var i=e?s.get(e.children()):null;if(t){if(i?(e.addClass("waiting"),i.waiting()):this.$el.addClass("waiting"),0<t){var n=this;setTimeout(function(){m.call(n,!1,e)},t)}}else i?(e.removeClass("waiting"),i.waiting(!1)):this.$el.removeClass("waiting")};s.register(".ui-dialog",r)}}(),function(t){if(t||!VRender.Component.Render.notice){var a=t?require(__vrender__).Utils:VRender.Utils,n=t?require("./_base"):VRender.Component.Render,e=function(t,e){n._base.call(this,t,e)},i=e.prototype=new n._base;i.render=function(t,e){n._base.render.call(this,t,e),e.addClass("ui-notice");var i=this.getType();return i&&e.addClass("show-icon").attr("opt-type",i),e.attr("opt-duration",this.getDuration()),s.call(this,t,e),this},i.getType=function(){return/^(success|warn|danger|info)$/i.test(this.options.type)?this.options.type:null},i.getDuration=function(){return a.isBlank(this.options.duration)?null:isNaN(this.options.duration)?null:parseInt(this.options.duration)||0},i.isClosable=function(){return!!a.isNull(this.options.closable)||a.isTrue(this.options.closable)};var s=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=t("<i class='img'></i>").appendTo(i),s=a.trimToNull(this.options.title);s&&t("<div class='title'></div>").appendTo(i).text(s);var r=t("<div class='content'></div>").appendTo(i);r=t("<div></div>").appendTo(r),this.options.hasOwnProperty("focusHtmlContent")?r.html(this.options.focusHtmlContent||"无内容"):r.text(this.options.content||"无内容"),this.isClosable()&&i.append("<div class='closebtn'></div>"),this.options.icon&&(e.addClass("show-icon"),n.css("backgroundImage","url("+this.options.icon+")"))};t?module.exports=e:VRender.Component.Render.notice=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.Notice){var i=VRender.Utils,n=VRender.Component,e=n.Render.notice,s=window.UINotice=n.Notice=function(t,e){return n.base.isElement(t)?this.init(t,e)!==this?n.get(t):void this.open():s.create(t)},t=s.prototype=new n.base;s.find=function(t){return n.find(t,".ui-notice",s)},s.create=function(t){return n.create(t,s,e)},t.open=function(){o.call(this),this.$el.on("tap",".closebtn",r.bind(this)),this.isRenderAsApp()||(this.$el.on("mouseenter",a.bind(this)),this.$el.on("mouseleave",a.bind(this)))},t.close=function(){l.call(this)};var r=function(){l.call(this)},a=function(t){"mouseenter"==t.type?this.t_close&&(clearTimeout(this.t_close),this.t_close=null):d.call(this)},o=function(){var t=$("body").children(".ui-notice-wrap");t&&0!=t.length||(t=$("<div class='ui-notice-wrap'></div>").appendTo("body"));var s=this.$el;this.isRenderAsApp()?t.append(s):t.prepend(s),setTimeout(function(){s.addClass("animate-in")},50),this.isRenderAsApp()&&setTimeout(function(){var t=s.find(".content"),e=t.children(),i=(t.width(),e.width()-t.width());if(0<i){t.addClass("over");var n=Math.max(5e3,20*i);e.css("animation","ui-notice-animate "+n+"ms infinite linear")}},1e3),d.call(this)},l=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-notice-wrap");0==t.children().length&&t.remove()},1500),this.trigger("close")},d=function(){this.t_close&&(clearTimeout(this.t_close),this.t_close=null);var t=this.$el.attr("opt-duration");if(0<(t=i.isBlank(t)?1e4:parseInt(t)||0)){var e=this;this.t_close=setTimeout(function(){e.t_close=null,l.call(e)},t)}};n.register(".ui-notice",s)}}(),function(t){if(t||!VRender.Component.Render.tooltip){var e=t?require(__vrender__).Utils:VRender.Utils,n=t?require("./_base"):VRender.Component.Render,i=function(t,e){n._base.call(this,t,e)},s=i.prototype=new n._base;s.render=function(t,e){n._base.render.call(this,t,e),e.addClass("ui-tooltip");var i=this.getType();return i&&e.addClass("show-icon").attr("opt-type",i),e.attr("opt-duration",this.getDuration()),r.call(this,t,e),this},s.getType=function(){return/^(success|warn|danger|info)$/i.test(this.options.type)?this.options.type:null},s.getDuration=function(){return e.isBlank(this.options.duration)?null:isNaN(this.options.duration)?null:parseInt(this.options.duration)||0},s.isClosable=function(){return!!e.isNull(this.options.closable)||e.isTrue(this.options.closable)};var r=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=t("<i class='img'></i>").appendTo(i),s=t("<div class='content'></div>").appendTo(i);this.options.hasOwnProperty("focusHtmlContent")?s.html(this.options.focusHtmlContent||"无"):s.text(this.options.content||"无"),this.isClosable()&&i.append("<div class='closebtn'></div>"),this.options.icon&&(e.addClass("show-icon"),n.css("backgroundImage","url("+this.options.icon+")"))};t?module.exports=i:VRender.Component.Render.tooltip=i}}("undefined"==typeof VRender),function(){if(!VRender.Component.Tooltip){var i=VRender.Utils,n=VRender.Component,e=n.Render.tooltip,s=window.UITooltip=n.Tooltip=function(t,e){return n.base.isElement(t)?this.init(t,e)!==this?n.get(t):void this.open():s.create(t)},t=s.prototype=new n.base;s.find=function(t){return n.find(t,".ui-tooltip",s)},s.create=function(t){return n.create(t,s,e)},t.open=function(){d.call(this),this.isRenderAsApp()?0<this.$el.find(".closebtn").length&&this.$el.on("tap",r.bind(this)):(this.$el.on("tap",".closebtn",a.bind(this)),this.$el.on("tap",".content",o.bind(this)),this.$el.on("mouseenter",l.bind(this)),this.$el.on("mouseleave",l.bind(this)))},t.close=function(){c.call(this)};var r=function(t){$(t.target).is(this.$el)&&c.call(this)},a=function(){c.call(this)},o=function(){this.$el.addClass("active")},l=function(t){"mouseenter"==t.type?this.t_close&&(clearTimeout(this.t_close),this.t_close=null):(this.$el.removeClass("active"),u.call(this))},d=function(){var t=$("body").children(".ui-tooltip-wrap");t&&0!=t.length||(t=$("<div class='ui-tooltip-wrap'></div>").appendTo("body"));var e=this.$el.appendTo(t);setTimeout(function(){e.addClass("animate-in")},50),u.call(this)},c=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-tooltip-wrap");0==t.children().length&&t.remove()},500),this.trigger("close")},u=function(){this.t_close&&(clearTimeout(this.t_close),this.t_close=null);var t=this.$el.attr("opt-duration");if(0<(t=i.isBlank(t)?3e3:parseInt(t)||0)){var e=this;this.t_close=setTimeout(function(){e.t_close=null,c.call(e)},t)}};n.register(".ui-tooltip",s)}}(),function(n){if(n||!VRender.Component.Render.confirm){var a=n?require(__vrender__).Utils:VRender.Utils,i=n?require("./_base"):VRender.Component.Render,s=n?require("../../../ui/component/UIButton"):VRender.Component.Button,t=function(t,e){i._base.call(this,t,e)},e=t.prototype=new i._base;e.render=function(t,e){return i._base.render.call(this,t,e),e.addClass("ui-confirm"),r.call(this,t,e),this},e.getConfirmLabel=function(){return a.trimToNull(this.options.confirmLabel)||"确认"},e.getCancelLabel=function(){return a.trimToNull(this.options.cancelLabel)||"取消"};var r=function(t,e){var i=t("<div class='container'></div>").appendTo(e),n=a.trimToNull(this.options.title);n&&t("<div class='title'></div>").appendTo(i).text(n);var s=t("<div class='content'></div>").appendTo(i);s=t("<div></div>").appendTo(s),this.options.hasOwnProperty("focusHtmlContent")?s.html(this.options.focusHtmlContent||"无内容"):s.text(this.options.content||"无内容");var r=t("<div class='btnbar'></div>").appendTo(i);o(t,r,{name:"ok",label:this.getConfirmLabel(),type:"primary"}),o(t,r,{name:"cancel",label:this.getCancelLabel()}),t("<span class='closebtn'></span>").appendTo(i)},o=function(t,e,i){e=t("<div></div>").appendTo(e),n?new s(this.context,i).render(e):s.create(a.extend(i,{target:e}))};n?module.exports=t:VRender.Component.Render.confirm=t}}("undefined"==typeof VRender),function(){if(!VRender.Component.Confirm){var t=VRender.Utils,i=VRender.Component,e=i.Render.confirm,n=window.UIConfirm=i.Confirm=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):void this.open():n.create(t)},s=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-confirm",n)},n.create=function(t){return i.create(t,n,e)},s.open=function(){o.call(this),this.$el.on("tap",".closebtn",r.bind(this)),this.$el.on("tap",".btnbar .ui-btn",a.bind(this))},s.close=function(){l.call(this)},s.onSubmit=function(t){return this.submitHandler=t,this},s.onCancel=function(t){return this.cancelHandler=t,this};var r=function(t){c.call(this)},a=function(t){"ok"==$(t.currentTarget).attr("name")?d.call(this):c.call(this)},o=function(){var t=$("body").children(".ui-confirm-wrap");t&&0!=t.length||(t=$("<div class='ui-confirm-wrap'></div>").appendTo("body"));var e=this.$el.appendTo(t);setTimeout(function(){e.addClass("animate-in")},50)},l=function(){var e=this.$el.addClass("animate-out");setTimeout(function(){e.removeClass("animate-in").removeClass("animate-out"),e.remove();var t=$("body").children(".ui-confirm-wrap");0==t.children().length&&t.remove()},500),this.trigger("close")},d=function(){l.call(this),t.isFunction(this.submitHandler)&&this.submitHandler(),this.trigger("submit")}
,c=function(){l.call(this),t.isFunction(this.cancelHandler)&&this.cancelHandler(),this.trigger("cancel")};i.register(".ui-confirm",n)}}();